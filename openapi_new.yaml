openapi: 3.0.3
info:
  title: 商南茶城 API
  description: |
    商南茶城电商平台 API 接口文档
    
    ## 认证方式
    使用 Bearer Token 认证，在请求头中添加：
    ```
    Authorization: Bearer <token>
    ```
    
    ## 响应格式
    所有接口统一返回 HTTP 200，通过 `code` 字段区分业务状态：
    ```json
    {
      "code": 2000,
      "data": { ... }
    }
    ```
    
    ## 业务状态码规则
    | 模块 | 成功码范围 | 失败码范围 |
    |------|-----------|-----------|
    | 通用 | 10xx | 11xx |
    | 用户 | 20xx-22xx | 21xx-22xx |
    | 茶叶 | 30xx-33xx | 31xx-33xx |
    | 订单 | 40xx-46xx | 41xx-46xx |
    | 店铺 | 50xx-53xx | 51xx-53xx |
    | 论坛 | 60xx-66xx | 61xx-66xx |
    | 消息 | 70xx-72xx | 71xx-72xx |
    
    **判断规则**：百位为 0 表示成功，百位为 1 表示失败
  version: 1.0.0
  contact:
    name: API Support
    email: support@shangnantea.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://127.0.0.1:4523/m1/7594087-7332672-default
    description: Mock 服务器
  - url: /api
    description: 生产环境 API

tags:
  - name: 用户模块
    description: 用户认证、信息管理相关接口
  - name: 茶叶模块
    description: 茶叶商品相关接口
  - name: 店铺模块
    description: 店铺信息相关接口
  - name: 订单模块
    description: 订单管理相关接口
  - name: 论坛模块
    description: 论坛帖子相关接口
  - name: 消息模块
    description: 消息通知相关接口
  - name: 公共模块
    description: 文件上传等公共接口

paths:
  # ==================== 用户模块 ====================
  /user/login:
    post:
      operationId: userLogin
      tags:
        - 用户模块
      summary: 用户登录
      description: 使用用户名和密码进行登录，返回 JWT Token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            example:
              username: "testuser"
              password: "password123"
      responses:
        '200':
          description: 请求完成，通过 code 判断业务结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                success:
                  summary: 登录成功
                  value:
                    code: 2000
                    data:
                      token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                failure:
                  summary: 登录失败
                  value:
                    code: 2100
                    data: null

  /user/register:
    post:
      operationId: userRegister
      tags:
        - 用户模块
      summary: 用户注册
      description: 注册新用户账号
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            example:
              username: "newuser"
              password: "password123"
              confirmPassword: "password123"
      responses:
        '200':
          description: 请求完成，通过 code 判断业务结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
              examples:
                success:
                  summary: 注册成功
                  value:
                    code: 2001
                    data:
                      id: "cy100003"
                      username: "newuser"
                      nickname: "新用户"
                      avatar: "/images/default-avatar.png"
                      role: 2
                      status: 1
                failure:
                  summary: 注册失败
                  value:
                    code: 2101
                    data: null

  /user/logout:
    post:
      operationId: userLogout
      tags:
        - 用户模块
      summary: 退出登录
      description: 退出当前用户登录状态
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 退出成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2002
                data: null

  /user/refresh:
    post:
      operationId: refreshToken
      tags:
        - 用户模块
      summary: 刷新令牌
      description: 刷新JWT令牌
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 刷新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
              example:
                code: 200
                data:
                  token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

  /user/me:
    get:
      operationId: getUserMe
      tags:
        - 用户模块
      summary: 获取当前用户信息
      description: 获取当前登录用户的详细信息
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
              example:
                code: 200
                data:
                  id: "cy100002"
                  username: "user"
                  nickname: "测试用户"
                  avatar: "/images/default-avatar.png"
                  email: "user@example.com"
                  phone: "13800138000"
                  role: 2
                  status: 1

  /user/{userId}:
    get:
      operationId: getUserById
      tags:
        - 用户模块
      summary: 获取指定用户信息
      description: 根据用户ID获取用户公开信息
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
              example:
                code: 200
                data:
                  id: "cy100002"
                  username: "user"
                  nickname: "测试用户"
                  avatar: "/images/default-avatar.png"
                  role: 2
                  status: 1

  /user:
    put:
      operationId: updateUser
      tags:
        - 用户模块
      summary: 更新用户信息
      description: 更新当前用户的个人信息
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
            example:
              nickname: "新昵称"
              email: "newemail@example.com"
              phone: "13900139000"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 2010
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 2110
                    data: null

  /user/avatar:
    post:
      operationId: uploadAvatar
      tags:
        - 用户模块
      summary: 上传头像
      description: 上传用户头像图片
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 头像图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
              examples:
                success:
                  summary: 上传成功
                  value:
                    code: 2012
                    data:
                      avatarUrl: "/uploads/avatar/user_cy100002.jpg"
                failure:
                  summary: 上传失败
                  value:
                    code: 2112
                    data: null

  /user/password:
    put:
      operationId: updatePassword
      tags:
        - 用户模块
      summary: 修改密码
      description: 修改当前用户密码
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePasswordRequest'
            example:
              oldPassword: "oldpass123"
              newPassword: "newpass123"
              confirmNewPassword: "newpass123"
      responses:
        '200':
          description: 修改结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 修改成功
                  value:
                    code: 2011
                    data: null
                failure:
                  summary: 修改失败
                  value:
                    code: 2111
                    data: null

  /user/password/reset:
    post:
      operationId: resetPassword
      tags:
        - 用户模块
      summary: 密码找回/重置
      description: 通过验证码重置密码
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
            example:
              username: "testuser"
              phone: "13800138000"
              verificationCode: "123456"
              newPassword: "newpass123"
      responses:
        '200':
          description: 重置结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 重置成功
                  value:
                    code: 2004
                    data: null
                failure:
                  summary: 重置失败
                  value:
                    code: 2104
                    data: null

  /user/addresses:
    get:
      operationId: getAddresses
      tags:
        - 用户模块
      summary: 获取收货地址列表
      description: 获取当前用户的所有收货地址
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddressListResponse'
              example:
                code: 200
                data:
                  - id: 1
                    receiverName: "张三"
                    receiverPhone: "13800138000"
                    province: "陕西省"
                    city: "商洛市"
                    district: "商南县"
                    detailAddress: "茶城路1号"
                    isDefault: 1
    post:
      operationId: addAddress
      tags:
        - 用户模块
      summary: 添加收货地址
      description: 为当前用户添加新的收货地址
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressRequest'
            example:
              receiverName: "张三"
              receiverPhone: "13800138000"
              province: "陕西省"
              city: "商洛市"
              district: "商南县"
              detailAddress: "茶城路1号"
              isDefault: 0
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加成功
                  value:
                    code: 4060
                    data: null
                failure:
                  summary: 添加失败
                  value:
                    code: 4161
                    data: null

  /user/addresses/{id}:
    put:
      operationId: updateAddress
      tags:
        - 用户模块
      summary: 更新收货地址
      description: 更新指定的收货地址信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1004
                data: null
    delete:
      operationId: deleteAddress
      tags:
        - 用户模块
      summary: 删除收货地址
      description: 删除指定的收货地址
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1003
                data: null

  /user/addresses/{id}/default:
    put:
      operationId: setDefaultAddress
      tags:
        - 用户模块
      summary: 设置默认地址
      description: 将指定地址设置为默认收货地址
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1004
                data: null

  /user/shop-certification:
    get:
      operationId: getShopCertification
      tags:
        - 用户模块
      summary: 获取商家认证状态
      description: 获取当前用户的商家认证申请状态
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertificationResponse'
              example:
                code: 200
                data:
                  id: 1
                  userId: "cy100002"
                  shopName: "茶香阁"
                  businessLicense: "/uploads/license.jpg"
                  idCardFront: "/uploads/id_front.jpg"
                  idCardBack: "/uploads/id_back.jpg"
                  status: 0
                  createTime: "2025-01-01T12:00:00Z"
    post:
      operationId: submitShopCertification
      tags:
        - 用户模块
      summary: 提交商家认证申请
      description: 提交商家认证申请资料
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CertificationRequest'
            example:
              shopName: "茶香阁"
              businessLicense: "/uploads/license.jpg"
              idCardFront: "/uploads/id_front.jpg"
              idCardBack: "/uploads/id_back.jpg"
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1000
                data: null

  /user/follows:
    get:
      operationId: getFollows
      tags:
        - 用户模块
      summary: 获取关注列表
      description: 获取当前用户的关注列表（用户或店铺）
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [user, shop]
            description: 关注类型
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FollowListResponse'
              example:
                code: 200
                data:
                  - id: 1
                    targetId: "cy100003"
                    targetType: "user"
                    targetName: "茶友小王"
                    targetAvatar: "/images/avatar1.png"
                    createTime: "2025-01-01T12:00:00Z"
    post:
      operationId: addFollow
      tags:
        - 用户模块
      summary: 添加关注
      description: 关注用户或店铺
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FollowRequest'
            example:
              targetId: "cy100003"
              targetType: "user"
      responses:
        '200':
          description: 关注成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 5000
                data: null

  /user/follows/{id}:
    delete:
      operationId: removeFollow
      tags:
        - 用户模块
      summary: 取消关注
      description: 取消关注用户或店铺
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 5001
                data: null

  /user/favorites:
    get:
      operationId: getFavorites
      tags:
        - 用户模块
      summary: 获取收藏列表
      description: 获取当前用户的收藏列表（茶叶、帖子、文章）
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [tea, post, article]
            description: 收藏类型
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteListResponse'
              example:
                code: 200
                data:
                  - id: 1
                    targetId: "1"
                    targetType: "tea"
                    targetName: "商南绿茶"
                    targetImage: "/images/tea1.jpg"
                    createTime: "2025-01-01T12:00:00Z"
    post:
      operationId: addFavorite
      tags:
        - 用户模块
      summary: 添加收藏
      description: 收藏茶叶、帖子或文章
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
            example:
              targetId: "1"
              targetType: "tea"
      responses:
        '200':
          description: 收藏成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 收藏成功
                  value:
                    code: 3010
                    data: null
                failure:
                  summary: 收藏失败
                  value:
                    code: 3110
                    data: null

  /user/favorites/{id}:
    delete:
      operationId: removeFavorite
      tags:
        - 用户模块
      summary: 取消收藏
      description: 取消收藏茶叶、帖子或文章
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3011
                data: null

  /user/likes:
    post:
      operationId: addLike
      tags:
        - 用户模块
      summary: 点赞
      description: 对帖子、评论等内容点赞
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LikeRequest'
            example:
              targetId: "1"
              targetType: "post"
      responses:
        '200':
          description: 点赞成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 点赞成功
                  value:
                    code: 6010
                    data: null
                failure:
                  summary: 点赞失败
                  value:
                    code: 6110
                    data: null

  /user/likes/{id}:
    delete:
      operationId: removeLike
      tags:
        - 用户模块
      summary: 取消点赞
      description: 取消对内容的点赞
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6011
                data: null

  /user/preferences:
    get:
      operationId: getPreferences
      tags:
        - 用户模块
      summary: 获取用户偏好设置
      description: 获取当前用户的偏好设置（主题、显示模式等）
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreferencesResponse'
              example:
                code: 200
                data:
                  theme: "light"
                  displayMode: "grid"
                  language: "zh-CN"
    put:
      operationId: updatePreferences
      tags:
        - 用户模块
      summary: 更新用户偏好设置
      description: 更新当前用户的偏好设置
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreferencesRequest'
            example:
              theme: "dark"
              displayMode: "list"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 2013
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 2114
                    data: null

  /user/admin/users:
    get:
      operationId: adminGetUsers
      tags:
        - 用户模块
      summary: 获取用户列表（管理员）
      description: 管理员获取用户列表，支持筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: role
          in: query
          schema:
            type: integer
            enum: [1, 2, 3]
            description: 角色筛选
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1]
            description: 状态筛选
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "cy100001"
                      username: "admin"
                      nickname: "管理员"
                      role: 1
                      status: 1
                      createTime: "2024-01-01T00:00:00Z"
                    - id: "cy100002"
                      username: "user"
                      nickname: "普通用户"
                      role: 2
                      status: 1
                      createTime: "2024-01-02T00:00:00Z"
                  total: 100
                  page: 1
                  pageSize: 10
    post:
      operationId: adminCreateUser
      tags:
        - 用户模块
      summary: 创建管理员账号（管理员）
      description: 管理员创建新的管理员账号
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAdminRequest'
            example:
              username: "newadmin"
              password: "admin123"
              nickname: "新管理员"
              email: "admin@example.com"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2023
                data: null

  /user/admin/users/{userId}:
    put:
      operationId: adminUpdateUser
      tags:
        - 用户模块
      summary: 更新用户信息（管理员）
      description: 管理员更新指定用户的信息
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserRequest'
            example:
              nickname: "新昵称"
              email: "newemail@example.com"
              status: 1
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2022
                data: null
    delete:
      operationId: adminDeleteUser
      tags:
        - 用户模块
      summary: 删除用户（管理员）
      description: 管理员删除指定用户
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2020
                data: null

  /user/admin/users/{userId}/role:
    put:
      operationId: adminUpdateUserRole
      tags:
        - 用户模块
      summary: 更新用户角色（管理员，已废弃）
      description: 管理员更新用户角色（此接口已废弃）
      deprecated: true
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [role]
              properties:
                role:
                  type: integer
                  enum: [1, 2, 3]
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2022
                data: null

  /user/admin/users/{userId}/status:
    put:
      operationId: adminUpdateUserStatus
      tags:
        - 用户模块
      summary: 启用/禁用用户（管理员）
      description: 管理员启用或禁用指定用户
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=禁用, 1=启用
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 2021
                data: null

  /user/admin/certifications:
    get:
      operationId: adminGetCertifications
      tags:
        - 用户模块
      summary: 获取商家认证申请列表（管理员）
      description: 管理员获取所有商家认证申请列表，支持状态筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2]
            description: 0=待审核, 1=已通过, 2=已拒绝
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertificationListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: 1
                      userId: "cy100002"
                      shopName: "茶香阁"
                      status: 0
                      createTime: "2025-01-01T12:00:00Z"
                  total: 10

  /user/admin/certifications/{id}:
    put:
      operationId: adminReviewCertification
      tags:
        - 用户模块
      summary: 审核认证申请（管理员）
      description: 管理员审核商家认证申请，通过或拒绝
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: integer
                  enum: [1, 2]
                  description: 1=通过, 2=拒绝
                reason:
                  type: string
                  description: 拒绝原因（status=2时必填）
      responses:
        '200':
          description: 审核成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 审核成功
                  value:
                    code: 1000
                    data: null
                failure:
                  summary: 审核失败
                  value:
                    code: 1100
                    data: null

  # ==================== 茶叶模块 ====================
  /tea/list:
    get:
      operationId: getTeaList
      tags:
        - 茶叶模块
      summary: 获取茶叶列表
      description: 分页获取茶叶商品列表，支持分类、关键词搜索和排序
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
            description: 页码
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
            description: 每页数量
        - name: categoryId
          in: query
          schema:
            type: integer
            description: 分类ID
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: shopId
          in: query
          schema:
            type: string
            description: 店铺ID
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [price, sales, rating]
            description: 排序字段
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
            description: 排序方向
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListResponse'
              example:
                code: 3000
                data:
                  list:
                    - id: "1"
                      name: "商南绿茶"
                      categoryId: 1
                      shopId: "1"
                      price: 99.00
                      originalPrice: 128.00
                      stock: 100
                      sales: 50
                      description: "优质商南高山绿茶"
                      images: ["/images/tea1.jpg"]
                      status: 1
                  total: 100
                  page: 1
                  pageSize: 10
    post:
      operationId: addTea
      tags:
        - 茶叶模块
      summary: 添加茶叶（商家/管理员）
      description: 商家或管理员添加新的茶叶商品
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
            example:
              name: "商南绿茶"
              categoryId: 1
              shopId: "1"
              price: 99.00
              originalPrice: 128.00
              stock: 100
              description: "优质商南高山绿茶"
              images: ["/images/tea1.jpg"]
              status: 1
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加成功
                  value:
                    code: 3026
                    data: null
                failure:
                  summary: 添加失败
                  value:
                    code: 3126
                    data: null

  /tea/{id}:
    get:
      operationId: getTeaDetail
      tags:
        - 茶叶模块
      summary: 获取茶叶详情
      description: 根据ID获取茶叶商品的详细信息
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaDetailResponse'
              example:
                code: 3001
                data:
                  id: "1"
                  name: "商南绿茶"
                  categoryId: 1
                  shopId: "1"
                  price: 99.00
                  originalPrice: 128.00
                  stock: 100
                  sales: 50
                  description: "优质商南高山绿茶"
                  images: ["/images/tea1.jpg"]
                  status: 1
    put:
      operationId: updateTea
      tags:
        - 茶叶模块
      summary: 更新茶叶信息（商家/管理员）
      description: 商家或管理员更新茶叶商品信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 3025
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 3125
                    data: null
    delete:
      operationId: deleteTea
      tags:
        - 茶叶模块
      summary: 删除茶叶（商家/管理员）
      description: 商家或管理员删除茶叶商品
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 3024
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 3124
                    data: null

  /tea/categories:
    get:
      operationId: getTeaCategories
      tags:
        - 茶叶模块
      summary: 获取茶叶分类列表
      description: 获取所有茶叶分类，包括父子分类关系
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaCategoryListResponse'
              example:
                code: 200
                data:
                  - id: 1
                    name: "绿茶"
                    parentId: 0
                    sortOrder: 1
                    icon: "/icons/green-tea.png"
                  - id: 2
                    name: "红茶"
                    parentId: 0
                    sortOrder: 2
                    icon: "/icons/black-tea.png"
    post:
      operationId: createTeaCategory
      tags:
        - 茶叶模块
      summary: 创建茶叶分类（管理员）
      description: 管理员创建新的茶叶分类
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaCategoryRequest'
            example:
              name: "白茶"
              parentId: 0
              sortOrder: 3
              icon: "/icons/white-tea.png"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 3030
                    data: null
                failure:
                  summary: 创建失败
                  value:
                    code: 3130
                    data: null

  /tea/categories/{id}:
    put:
      operationId: updateTeaCategory
      tags:
        - 茶叶模块
      summary: 更新茶叶分类（管理员）
      description: 管理员更新茶叶分类信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaCategoryRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 3031
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 3131
                    data: null
    delete:
      operationId: deleteTeaCategory
      tags:
        - 茶叶模块
      summary: 删除茶叶分类（管理员）
      description: 管理员删除茶叶分类
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 3032
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 3132
                    data: null

  /tea/{teaId}/reviews:
    get:
      operationId: getTeaReviews
      tags:
        - 茶叶模块
      summary: 获取茶叶评价列表
      description: 获取指定茶叶的用户评价列表，支持分页
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: 1
                      userId: "cy100002"
                      username: "茶友"
                      avatar: "/images/avatar.png"
                      rating: 5
                      content: "茶叶很好喝"
                      images: []
                      createTime: "2025-01-01T12:00:00Z"
                  total: 10

  /tea/{teaId}/reviews/stats:
    get:
      operationId: getTeaReviewStats
      tags:
        - 茶叶模块
      summary: 获取茶叶评价统计
      description: 获取茶叶的评价统计信息，包括平均评分和评分分布
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewStatsResponse'
              example:
                code: 200
                data:
                  averageRating: 4.5
                  totalCount: 100
                  ratingDistribution:
                    "5": 60
                    "4": 25
                    "3": 10
                    "2": 3
                    "1": 2

  /tea/reviews:
    post:
      operationId: submitTeaReview
      tags:
        - 茶叶模块
      summary: 提交茶叶评价
      description: 用户提交茶叶商品评价
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
            example:
              teaId: "1"
              rating: 5
              content: "茶叶很好喝"
              images: []
              orderId: "order001"
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 提交成功
                  value:
                    code: 4050
                    data: null
                failure:
                  summary: 提交失败
                  value:
                    code: 4150
                    data: null

  /tea/reviews/{reviewId}/reply:
    post:
      operationId: replyTeaReview
      tags:
        - 茶叶模块
      summary: 商家回复评价
      description: 商家对用户评价进行回复
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [reply]
              properties:
                reply:
                  type: string
                  description: 回复内容
      responses:
        '200':
          description: 回复成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 回复成功
                  value:
                    code: 3013
                    data: null
                failure:
                  summary: 回复失败
                  value:
                    code: 3113
                    data: null

  /tea/reviews/{reviewId}/like:
    post:
      operationId: likeTeaReview
      tags:
        - 茶叶模块
      summary: 点赞评价
      description: 用户对评价进行点赞
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 点赞成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 点赞成功
                  value:
                    code: 6010
                    data: null
                failure:
                  summary: 点赞失败
                  value:
                    code: 6110
                    data: null

  /tea/{teaId}/specifications:
    get:
      operationId: getTeaSpecifications
      tags:
        - 茶叶模块
      summary: 获取茶叶规格列表
      description: 获取指定茶叶的所有规格选项
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpecificationListResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    teaId: "1"
                    specName: "250g装"
                    price: 99.00
                    stock: 100
                    isDefault: 1
    post:
      operationId: addTeaSpecification
      tags:
        - 茶叶模块
      summary: 添加茶叶规格
      description: 为茶叶添加新的规格选项
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SpecificationRequest'
            example:
              specName: "500g装"
              price: 188.00
              stock: 50
              isDefault: 0
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加成功
                  value:
                    code: 1000
                    data: null
                failure:
                  summary: 添加失败
                  value:
                    code: 1100
                    data: null

  /tea/specifications/{specId}:
    put:
      operationId: updateTeaSpecification
      tags:
        - 茶叶模块
      summary: 更新茶叶规格
      description: 更新茶叶规格信息
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SpecificationRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 1004
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 1104
                    data: null
    delete:
      operationId: deleteTeaSpecification
      tags:
        - 茶叶模块
      summary: 删除茶叶规格
      description: 删除指定的茶叶规格
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 1003
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 1103
                    data: null

  /tea/specifications/{specId}/default:
    put:
      operationId: setDefaultSpecification
      tags:
        - 茶叶模块
      summary: 设置默认规格
      description: 将指定规格设置为默认规格
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 设置成功
                  value:
                    code: 1004
                    data: null
                failure:
                  summary: 设置失败
                  value:
                    code: 1104
                    data: null

  /tea/{teaId}/images:
    post:
      operationId: uploadTeaImages
      tags:
        - 茶叶模块
      summary: 上传茶叶图片
      description: 为茶叶上传商品图片
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: 图片文件列表
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadImagesResponse'
              examples:
                success:
                  summary: 上传成功
                  value:
                    code: 1001
                    data:
                      - id: "img1"
                        url: "/uploads/tea/tea1_1.jpg"
                failure:
                  summary: 上传失败
                  value:
                    code: 1101
                    data: null

  /tea/images/{imageId}:
    delete:
      operationId: deleteTeaImage
      tags:
        - 茶叶模块
      summary: 删除茶叶图片
      description: 删除指定的茶叶图片
      security:
        - BearerAuth: []
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 1003
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 1103
                    data: null

  /tea/images/{imageId}/main:
    put:
      operationId: setMainTeaImage
      tags:
        - 茶叶模块
      summary: 设置主图
      description: 将指定图片设置为茶叶主图
      security:
        - BearerAuth: []
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1004
                data: null

  /tea/images/order:
    put:
      operationId: updateTeaImageOrder
      tags:
        - 茶叶模块
      summary: 更新图片顺序
      description: 更新茶叶图片的显示顺序
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teaId:
                  type: string
                  description: 茶叶ID
                orders:
                  type: array
                  items:
                    type: object
                    properties:
                      imageId:
                        type: string
                      order:
                        type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 1004
                data: null

  /tea/{teaId}/status:
    put:
      operationId: updateTeaStatus
      tags:
        - 茶叶模块
      summary: 更新茶叶状态（上架/下架）
      description: 商家或管理员更新茶叶的上架/下架状态
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3020
                data: null

  /tea/batch-status:
    put:
      operationId: batchUpdateTeaStatus
      tags:
        - 茶叶模块
      summary: 批量更新茶叶状态
      description: 批量更新多个茶叶的上架/下架状态
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teaIds:
                  type: array
                  items:
                    type: string
                  description: 茶叶ID列表
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 3022
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 3122
                    data: null

  /tea/recommend:
    get:
      operationId: getRecommendTeas
      tags:
        - 茶叶模块
      summary: 获取推荐茶叶
      description: 获取推荐的茶叶列表，支持随机推荐、相似推荐、热门推荐
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [random, similar, popular]
            description: 推荐类型
        - name: teaId
          in: query
          schema:
            type: string
            description: 参考茶叶ID（相似推荐时使用）
        - name: count
          in: query
          schema:
            type: integer
            default: 6
            description: 推荐数量
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListSimpleResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    name: "商南绿茶"
                    price: 99.00
                    images: ["/images/tea1.jpg"]

  # ==================== 店铺模块 ====================
  /shop/list:
    get:
      operationId: getShopList
      tags:
        - 店铺模块
      summary: 获取店铺列表
      description: 获取店铺列表，支持搜索、筛选和排序
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          schema:
            type: integer
            default: 10
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: rating
          in: query
          schema:
            type: number
            description: 最低评分筛选
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [rating, salesCount, followCount]
            description: 排序字段
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      name: "商南茶庄"
                      logo: "/images/shop-logo.png"
                      description: "专营商南高山绿茶"
                      rating: 4.8
                      salesCount: 1000
                      followCount: 500
                      ownerId: "cy100003"
                  total: 50
                  page: 1
                  pageSize: 10

    post:
      operationId: createShop
      tags:
        - 店铺模块
      summary: 创建店铺
      description: 商家创建新店铺
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopRequest'
            example:
              name: "商南茶庄"
              logo: "/images/shop-logo.png"
              description: "专营商南高山绿茶"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 1000
                    data: null
                failure:
                  summary: 创建失败
                  value:
                    code: 1100
                    data: null

  /shop/{id}:
    get:
      operationId: getShopDetail
      tags:
        - 店铺模块
      summary: 获取店铺详情
      description: 根据ID获取店铺详细信息
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetailResponse'
              example:
                code: 200
                data:
                  id: "1"
                  name: "商南茶庄"
                  logo: "/images/shop-logo.png"
                  description: "专营商南高山绿茶"
                  rating: 4.8
                  salesCount: 1000
                  followCount: 500
                  ownerId: "cy100003"

    put:
      operationId: updateShop
      tags:
        - 店铺模块
      summary: 更新店铺信息
      description: 商家更新店铺信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 1004
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 1104
                    data: null

  /shop/my:
    get:
      operationId: getMyShop
      tags:
        - 店铺模块
      summary: 获取我的店铺信息
      description: 获取当前登录商家的店铺信息
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetailResponse'
              example:
                code: 200
                data:
                  id: "1"
                  name: "商南茶庄"
                  logo: "/images/shop-logo.png"
                  description: "专营商南高山绿茶"
                  rating: 4.8
                  salesCount: 1000
                  followCount: 500

  /shop/{shopId}/teas:
    get:
      operationId: getShopTeas
      tags:
        - 店铺模块
      summary: 获取店铺茶叶列表
      description: 获取指定店铺的茶叶商品列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      name: "商南绿茶"
                      price: 99.00
                      status: 1
                  total: 20
    post:
      operationId: addShopTea
      tags:
        - 店铺模块
      summary: 添加茶叶到店铺
      description: 商家为店铺添加新的茶叶商品
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3026
                data: null

  /shop/teas/{teaId}:
    put:
      operationId: updateShopTea
      tags:
        - 店铺模块
      summary: 更新店铺茶叶
      description: 商家更新店铺中的茶叶信息
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3025
                data: null
    delete:
      operationId: deleteShopTea
      tags:
        - 店铺模块
      summary: 删除店铺茶叶
      description: 商家删除店铺中的茶叶
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3024
                data: null

  /shop/teas/{teaId}/status:
    put:
      operationId: updateShopTeaStatus
      tags:
        - 店铺模块
      summary: 茶叶上下架
      description: 商家更新店铺茶叶的上下架状态
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 3020
                data: null

  /shop/{shopId}/statistics:
    get:
      operationId: getShopStatistics
      tags:
        - 店铺模块
      summary: 获取店铺统计数据
      description: 获取店铺的销售统计数据
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
            description: 开始日期
        - name: endDate
          in: query
          schema:
            type: string
            format: date
            description: 结束日期
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopStatisticsResponse'
              example:
                code: 200
                data:
                  totalSales: 50000.00
                  orderCount: 200
                  productCount: 30
                  followCount: 500

  /shop/{shopId}/logo:
    post:
      operationId: uploadShopLogo
      tags:
        - 店铺模块
      summary: 上传店铺Logo
      description: 商家上传店铺Logo图片
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Logo图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
              examples:
                success:
                  summary: 上传成功
                  value:
                    code: 5030
                    data:
                      url: "/uploads/shop/logo_1.jpg"
                failure:
                  summary: 上传失败
                  value:
                    code: 5130
                    data: null

  /shop/{shopId}/banners:
    get:
      operationId: getShopBanners
      tags:
        - 店铺模块
      summary: 获取店铺Banner列表
      description: 获取店铺的轮播Banner列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BannerListResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    imageUrl: "/images/banner1.jpg"
                    title: "新品上市"
                    linkUrl: "/tea/1"
                    sortOrder: 1
    post:
      operationId: uploadShopBanner
      tags:
        - 店铺模块
      summary: 上传店铺Banner
      description: 商家上传店铺Banner图片
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: Banner图片
                title:
                  type: string
                  description: Banner标题
                linkUrl:
                  type: string
                  description: 跳转链接
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 上传成功
                  value:
                    code: 5010
                    data: null
                failure:
                  summary: 上传失败
                  value:
                    code: 5110
                    data: null

  /shop/banners/{bannerId}:
    put:
      operationId: updateShopBanner
      tags:
        - 店铺模块
      summary: 更新店铺Banner
      description: 商家更新Banner信息
      security:
        - BearerAuth: []
      parameters:
        - name: bannerId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                linkUrl:
                  type: string
                sortOrder:
                  type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 5011
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 5111
                    data: null
    delete:
      operationId: deleteShopBanner
      tags:
        - 店铺模块
      summary: 删除店铺Banner
      description: 商家删除Banner
      security:
        - BearerAuth: []
      parameters:
        - name: bannerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 5012
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 5112
                    data: null

  /shop/banners/order:
    put:
      operationId: updateBannerOrder
      tags:
        - 店铺模块
      summary: 更新Banner顺序
      description: 商家更新Banner的显示顺序
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                orders:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      order:
                        type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 5013
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 5113
                    data: null

  /shop/{shopId}/announcements:
    get:
      operationId: getShopAnnouncements
      tags:
        - 店铺模块
      summary: 获取店铺公告列表
      description: 获取店铺的公告列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementListResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    title: "春茶上市"
                    content: "2025年春茶已上市"
                    isTop: true
                    createTime: "2025-01-01T12:00:00Z"

    post:
      operationId: createShopAnnouncement
      tags:
        - 店铺模块
      summary: 创建店铺公告
      description: 商家创建店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnnouncementRequest'
            example:
              title: "春茶上市"
              content: "2025年春茶已上市"
              isTop: true
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 5020
                    data: null
                failure:
                  summary: 创建失败
                  value:
                    code: 5120
                    data: null

  /shop/announcements/{announcementId}:
    put:
      operationId: updateShopAnnouncement
      tags:
        - 店铺模块
      summary: 更新店铺公告
      description: 商家更新店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: announcementId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnnouncementRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 5021
                data: null

    delete:
      operationId: deleteShopAnnouncement
      tags:
        - 店铺模块
      summary: 删除店铺公告
      description: 商家删除店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: announcementId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 5022
                data: null

  /shop/{shopId}/follow:
    post:
      operationId: followShop
      tags:
        - 店铺模块
      summary: 关注店铺
      description: 用户关注店铺
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 关注成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 关注成功
                  value:
                    code: 5000
                    data: null
                failure:
                  summary: 关注失败
                  value:
                    code: 5100
                    data: null
    delete:
      operationId: unfollowShop
      tags:
        - 店铺模块
      summary: 取消关注店铺
      description: 用户取消关注店铺
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 取消成功
                  value:
                    code: 5001
                    data: null
                failure:
                  summary: 取消失败
                  value:
                    code: 5101
                    data: null

  /shop/{shopId}/follow-status:
    get:
      operationId: getShopFollowStatus
      tags:
        - 店铺模块
      summary: 获取店铺关注状态
      description: 获取当前用户对店铺的关注状态
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FollowStatusResponse'
              example:
                code: 200
                data:
                  isFollowed: true

  /shop/{shopId}/reviews:
    get:
      operationId: getShopReviews
      tags:
        - 店铺模块
      summary: 获取店铺评价列表
      description: 获取店铺的用户评价列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: 1
                      userId: "cy100002"
                      username: "茶友"
                      rating: 5
                      content: "店铺服务很好"
                      createTime: "2025-01-01T12:00:00Z"
                  total: 50

  # ==================== 订单模块 ====================
  /order/create:
    post:
      operationId: createOrder
      tags:
        - 订单模块
      summary: 创建订单
      description: 用户创建新的购买订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
            example:
              items:
                - teaId: "1"
                  specId: "1"
                  quantity: 2
              addressId: "1"
              remark: "请尽快发货"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 4000
                    data:
                      orderId: "order001"
                      totalPrice: 199.00
                      status: 0
                failure:
                  summary: 创建失败
                  value:
                    code: 4100
                    data: null

  /order/list:
    get:
      operationId: getOrderList
      tags:
        - 订单模块
      summary: 获取订单列表
      description: 获取当前用户的订单列表，支持状态筛选
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2, 3, 4]
            description: 0=待付款, 1=待发货, 2=待收货, 3=已完成, 4=已取消
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "order001"
                      status: 1
                      totalPrice: 199.00
                      createTime: "2024-01-15T10:30:00Z"
                  total: 20

  /order/{id}:
    get:
      operationId: getOrderDetail
      tags:
        - 订单模块
      summary: 获取订单详情
      description: 根据ID获取订单详细信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
              example:
                code: 200
                data:
                  id: "order001"
                  userId: "cy100002"
                  status: 1
                  totalPrice: 199.00
                  items:
                    - teaId: "1"
                      teaName: "商南绿茶"
                      quantity: 2
                      price: 99.00
                  address:
                    receiverName: "张三"
                    receiverPhone: "13800138000"
                    detailAddress: "陕西省商洛市商南县茶城路1号"
                  createTime: "2024-01-15T10:30:00Z"

  /order/cancel:
    post:
      tags: [订单模块]
      summary: 取消订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              example:
                code: 4002
                data: null
                  value:
                    code: 4101
                    data: null

  /order/pay:
    post:
      tags: [订单模块]
      summary: 支付订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, paymentMethod]
              properties:
                orderId:
                  type: string
                paymentMethod:
                  type: string
                  enum: [alipay, wechat, balance]
      responses:
        '200':
          description: 支付成功
          content:
            application/json:
              example:
                code: 4020
                data: null

  /order/confirm:
    post:
      tags: [订单模块]
      summary: 确认收货
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
      responses:
        '200':
          description: 确认成功
          content:
            application/json:
              example:
                code: 4003
                data: null

  /order/review:
    post:
      tags: [订单模块]
      summary: 评价订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, rating, content]
              properties:
                orderId:
                  type: string
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                content:
                  type: string
                images:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: 评价成功
          content:
            application/json:
              example:
                code: 4050
                data: null

  /order/{id}/ship:
    post:
      tags: [订单模块]
      summary: 发货
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: logisticsCompany
          in: query
          required: true
          schema:
            type: string
        - name: logisticsNumber
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 发货成功
          content:
            application/json:
              example:
                code: 4004
                data: null

  /order/batch-ship:
    post:
      tags: [订单模块]
      summary: 批量发货
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderIds, logisticsCompany, logisticsNumber]
              properties:
                orderIds:
                  type: array
                  items:
                    type: string
                logisticsCompany:
                  type: string
                logisticsNumber:
                  type: string
      responses:
        '200':
          description: 批量发货成功
          content:
            application/json:
              example:
                code: 4006
                data: null

  /order/{id}/refund:
    get:
      tags: [订单模块]
      summary: 获取退款详情
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  id: 1
                  orderId: "1"
                  reason: "商品质量问题"
                  status: 0
                  createTime: "2025-01-01T12:00:00Z"

  /order/{id}/refund/process:
    post:
      tags: [订单模块]
      summary: 审批退款
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [approve]
              properties:
                approve:
                  type: boolean
                reason:
                  type: string
      responses:
        '200':
          description: 审批成功
          content:
            application/json:
              example:
                code: 4031
                data: null

  /order/{id}/logistics:
    get:
      tags: [订单模块]
      summary: 获取订单物流信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  logisticsCompany: "顺丰速运"
                  logisticsNumber: "SF1234567890"
                  traces:
                    - time: "2025-01-01T12:00:00Z"
                      status: "已发货"
                    - time: "2025-01-02T10:00:00Z"
                      status: "运输中"

  /order/refund:
    post:
      tags: [订单模块]
      summary: 申请退款（兼容旧接口）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, reason]
              properties:
                orderId:
                  type: string
                reason:
                  type: string
      responses:
        '200':
          description: 申请成功
          content:
            application/json:
              example:
                code: 4030
                data: null
                data:
                  expressCompany: "顺丰速运"
                  expressNumber: "SF1234567890"
                  traces:
                    - time: "2025-01-15T10:00:00Z"
                      status: "已发货"
                    - time: "2025-01-15T14:00:00Z"
                      status: "运输中"

  /order/cart:
    get:
      operationId: getCart
      tags:
        - 订单模块
      summary: 获取购物车
      description: 获取当前用户的购物车商品列表
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
              example:
                code: 200
                data:
                  items:
                    - id: "1"
                      teaId: "1"
                      teaName: "商南绿茶"
                      specId: "1"
                      specName: "250g装"
                      price: 99.00
                      quantity: 2
                      selected: true
                  totalPrice: 198.00

  /order/cart/add:
    post:
      tags: [订单模块]
      summary: 添加商品到购物车
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [teaId, quantity]
              properties:
                teaId:
                  type: string
                quantity:
                  type: integer
                specificationId:
                  type: string
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              example:
                code: 4010
                data: null

  /order/cart/update:
    put:
      tags: [订单模块]
      summary: 更新购物车商品
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: integer
                quantity:
                  type: integer
                specificationId:
                  type: string
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              example:
                code: 4011
                data: null

  /order/cart/remove:
    delete:
      tags: [订单模块]
      summary: 移除购物车商品
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 移除成功
          content:
            application/json:
              example:
                code: 4013
                data: null

  /order/cart/clear:
    delete:
      operationId: clearCart
      tags:
        - 订单模块
      summary: 清空购物车
      description: 清空购物车中的所有商品
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 清空成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 4063
                data: null

  /order/statistics:
    get:
      operationId: getOrderStatistics
      tags:
        - 订单模块
      summary: 获取订单统计（商家/管理员）
      description: 获取订单统计数据
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: query
          schema:
            type: string
            description: 店铺ID（商家必填）
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderStatisticsResponse'
              example:
                code: 200
                data:
                  totalOrders: 100
                  totalSales: 10000.00
                  pendingOrders: 10
                  shippedOrders: 20
                  completedOrders: 60
                  cancelledOrders: 10

  /order/export:
    get:
      tags: [订单模块]
      summary: 导出订单数据
      security:
        - BearerAuth: []
      parameters:
        - name: format
          in: query
          schema:
            type: string
            enum: [excel, csv]
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2, 3, 4, 5]
        - name: shopId
          in: query
          schema:
            type: string
      responses:
        '200':
          description: 导出成功
          content:
            application/json:
              example:
                code: 200
                data: null
            application/octet-stream:
              schema:
                type: string
                format: binary

  # ==================== 论坛模块 ====================
  /forum/home:
    get:
      tags: [论坛模块]
      summary: 获取论坛首页数据
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  banners:
                    - id: 1
                      imageUrl: "/images/forum-banner1.jpg"
                      title: "茶文化专题"
                      linkUrl: "/forum/articles/1"
                  hotPosts:
                    - id: 1
                      title: "商南茶文化分享"
                      viewCount: 1000
                  latestArticles:
                    - id: 1
                      title: "茶道入门"
                      summary: "茶道基础知识"
    put:
      tags: [论坛模块]
      summary: 更新论坛首页数据（管理员）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              example:
                code: 6060
                data: null

  /forum/banners:
    get:
      tags: [论坛模块]
      summary: 获取论坛Banner列表
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  - id: 1
                    imageUrl: "/images/forum-banner1.jpg"
                    title: "茶文化专题"
                    linkUrl: "/forum/articles/1"
                    sortOrder: 1
    post:
      tags: [论坛模块]
      summary: 上传论坛Banner（管理员）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                title:
                  type: string
                linkUrl:
                  type: string
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              example:
                code: 5010
                data: null

  /forum/banners/{id}:
    put:
      tags: [论坛模块]
      summary: 更新论坛Banner（管理员）
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                linkUrl:
                  type: string
                sortOrder:
                  type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              example:
                code: 5011
                data: null
    delete:
      tags: [论坛模块]
      summary: 删除论坛Banner（管理员）
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              example:
                code: 5012
                data: null

  /forum/banners/order:
    put:
      tags: [论坛模块]
      summary: 更新Banner顺序（管理员）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bannerIds:
                  type: array
                  items:
                    type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              example:
                code: 5013
                data: null

  /forum/topics:
    get:
      tags: [论坛模块]
      summary: 获取版块列表
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  - id: 1
                    name: "茶文化"
                    description: "茶文化交流"
                    icon: "/icons/culture.png"
                    sortOrder: 1
    post:
      tags: [论坛模块]
      summary: 创建版块（管理员）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name]
              properties:
                name:
                  type: string
                description:
                  type: string
                icon:
                  type: string
                sortOrder:
                  type: integer
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              example:
                code: 6040
                data: null

  /forum/topics/{id}:
    get:
      tags: [论坛模块]
      summary: 获取版块详情
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              example:
                code: 200
                data:
                  id: 1
                  name: "茶文化"
                  description: "茶文化交流"
                  icon: "/icons/culture.png"
                  postCount: 100
    put:
      tags: [论坛模块]
      summary: 更新版块（管理员）
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                icon:
                  type: string
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              example:
                code: 6041
                data: null
    delete:
      tags: [论坛模块]
      summary: 删除版块（管理员）
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              example:
                code: 6042
                data: null

  /forum/posts:
    get:
      operationId: getForumPosts
      tags:
        - 论坛模块
      summary: 获取帖子列表
      description: 获取论坛帖子列表，支持分类筛选和排序
      parameters:
        - name: categoryId
          in: query
          schema:
            type: string
            description: 分类ID
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [latest, hot, recommend]
            default: latest
            description: 排序方式
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      title: "茶文化分享"
                      content: "今天来聊聊商南茶的历史..."
                      authorId: "cy100002"
                      authorName: "茶友"
                      categoryId: "cat001"
                      viewCount: 100
                      likeCount: 10
                      commentCount: 5
                      createTime: "2025-01-15T10:30:00Z"
                  total: 50

    post:
      operationId: createForumPost
      tags:
        - 论坛模块
      summary: 发布帖子
      description: 用户发布新的论坛帖子
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
            example:
              title: "茶文化分享"
              content: "今天来聊聊商南茶的历史..."
              categoryId: "cat001"
              images: ["/images/post1.jpg"]
      responses:
        '200':
          description: 发布成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePostResponse'
              examples:
                success:
                  summary: 发布成功
                  value:
                    code: 6000
                    data:
                      postId: "post001"
                      title: "茶文化分享"
                      createTime: "2024-01-15T10:30:00Z"
                failure:
                  summary: 发布失败
                  value:
                    code: 6100
                    data: null

  /forum/posts/{id}:
    get:
      operationId: getForumPostDetail
      tags:
        - 论坛模块
      summary: 获取帖子详情
      description: 根据ID获取帖子详细内容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailResponse'
              example:
                code: 200
                data:
                  id: "1"
                  title: "茶文化分享"
                  content: "今天来聊聊商南茶的历史..."
                  authorId: "cy100002"
                  authorName: "茶友"
                  authorAvatar: "/images/avatar.png"
                  categoryId: "cat001"
                  images: ["/images/post1.jpg"]
                  viewCount: 100
                  likeCount: 10
                  commentCount: 5
                  isLiked: false
                  createTime: "2025-01-15T10:30:00Z"

    put:
      operationId: updateForumPost
      tags:
        - 论坛模块
      summary: 更新帖子
      description: 作者更新自己的帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePostRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 6001
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 6101
                    data: null
    delete:
      operationId: deleteForumPost
      tags:
        - 论坛模块
      summary: 删除帖子
      description: 作者或管理员删除帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 6002
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 6102
                    data: null

  /forum/posts/{id}/like:
    post:
      operationId: likeForumPost
      tags:
        - 论坛模块
      summary: 点赞帖子
      description: 用户对帖子进行点赞
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 点赞成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 点赞成功
                  value:
                    code: 6010
                    data: null
                failure:
                  summary: 点赞失败
                  value:
                    code: 6110
                    data: null

    delete:
      operationId: unlikeForumPost
      tags:
        - 论坛模块
      summary: 取消点赞帖子
      description: 用户取消对帖子的点赞
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6011
                data: null

  /forum/posts/{id}/replies:
    get:
      operationId: getPostComments
      tags:
        - 论坛模块
      summary: 获取帖子评论列表
      description: 获取指定帖子的评论列表
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      postId: "1"
                      userId: "cy100002"
                      username: "茶友"
                      avatar: "/images/avatar.png"
                      content: "写得很好"
                      likeCount: 5
                      createTime: "2025-01-15T11:00:00Z"
                  total: 20
    post:
      operationId: addPostComment
      tags:
        - 论坛模块
      summary: 发表评论
      description: 用户对帖子发表评论
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                content:
                  type: string
                  description: 评论内容
                  minLength: 1
                  maxLength: 500
                parentId:
                  type: string
                  description: 父评论ID（回复评论时使用）
      responses:
        '200':
          description: 发表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 发表成功
                  value:
                    code: 6020
                    data: null
                failure:
                  summary: 发表失败
                  value:
                    code: 6120
                    data: null

  /forum/replies/{id}:
    delete:
      operationId: deleteComment
      tags:
        - 论坛模块
      summary: 删除评论
      description: 作者或管理员删除评论
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 6021
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 6121
                    data: null

  /forum/replies/{id}/like:
    post:
      operationId: likeComment
      tags:
        - 论坛模块
      summary: 点赞评论
      description: 用户对评论进行点赞
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 点赞成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6010
                data: null
    delete:
      operationId: unlikeComment
      tags:
        - 论坛模块
      summary: 取消点赞评论
      description: 用户取消对评论的点赞
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6011
                data: null

  /forum/categories:
    get:
      operationId: getForumCategories
      tags:
        - 论坛模块
      summary: 获取论坛分类列表
      description: 获取所有论坛分类
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForumCategoryListResponse'
              example:
                code: 200
                data:
                  - id: "cat001"
                    name: "茶文化"
                    description: "分享茶文化知识"
                    icon: "/icons/culture.png"
                    sortOrder: 1

    post:
      operationId: createForumCategory
      tags:
        - 论坛模块
      summary: 创建论坛分类（管理员）
      description: 管理员创建新的论坛分类
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForumCategoryRequest'
            example:
              name: "茶艺交流"
              description: "茶艺技巧交流"
              icon: "/icons/tea-art.png"
              sortOrder: 2
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 6030
                    data: null
                failure:
                  summary: 创建失败
                  value:
                    code: 6130
                    data: null

  /forum/categories/{id}:
    put:
      operationId: updateForumCategory
      tags:
        - 论坛模块
      summary: 更新论坛分类（管理员）
      description: 管理员更新论坛分类信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForumCategoryRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6031
                data: null
    delete:
      operationId: deleteForumCategory
      tags:
        - 论坛模块
      summary: 删除论坛分类（管理员）
      description: 管理员删除论坛分类
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6032
                data: null

  /forum/articles:
    get:
      operationId: getArticles
      tags:
        - 论坛模块
      summary: 获取文章列表
      description: 获取茶文化文章列表
      parameters:
        - name: categoryId
          in: query
          schema:
            type: string
        - name: keyword
          in: query
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      title: "商南茶的历史"
                      summary: "商南茶有着悠久的历史..."
                      coverImage: "/images/article1.jpg"
                      authorId: "cy100001"
                      authorName: "管理员"
                      viewCount: 500
                      createTime: "2025-01-01T00:00:00Z"
                  total: 20
    post:
      operationId: createArticle
      tags:
        - 论坛模块
      summary: 创建文章（管理员）
      description: 管理员创建茶文化文章
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleRequest'
            example:
              title: "商南茶的历史"
              content: "商南茶有着悠久的历史..."
              summary: "商南茶历史简介"
              coverImage: "/images/article1.jpg"
              categoryId: "cat001"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建成功
                  value:
                    code: 6040
                    data: null
                failure:
                  summary: 创建失败
                  value:
                    code: 6140
                    data: null

  /forum/articles/{id}:
    get:
      operationId: getArticleDetail
      tags:
        - 论坛模块
      summary: 获取文章详情
      description: 根据ID获取文章详细内容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleDetailResponse'
              example:
                code: 200
                data:
                  id: "1"
                  title: "商南茶的历史"
                  content: "商南茶有着悠久的历史..."
                  summary: "商南茶历史简介"
                  coverImage: "/images/article1.jpg"
                  authorId: "cy100001"
                  authorName: "管理员"
                  categoryId: "cat001"
                  viewCount: 500
                  createTime: "2025-01-01T00:00:00Z"
    put:
      operationId: updateArticle
      tags:
        - 论坛模块
      summary: 更新文章（管理员）
      description: 管理员更新文章内容
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6041
                data: null
    delete:
      operationId: deleteArticle
      tags:
        - 论坛模块
      summary: 删除文章（管理员）
      description: 管理员删除文章
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6042
                data: null

  /forum/posts/my:
    get:
      operationId: getMyPosts
      tags:
        - 论坛模块
      summary: 获取我的帖子列表
      description: 获取当前用户发布的帖子列表
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      title: "我的茶文化分享"
                      viewCount: 100
                      likeCount: 10
                      commentCount: 5
                      createTime: "2025-01-15T10:30:00Z"
                  total: 10

  /forum/posts/user/{userId}:
    get:
      operationId: getUserPosts
      tags:
        - 论坛模块
      summary: 获取用户帖子列表
      description: 获取指定用户发布的帖子列表
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      title: "茶文化分享"
                      viewCount: 100
                      likeCount: 10
                      commentCount: 5
                      createTime: "2025-01-15T10:30:00Z"
                  total: 20

  /forum/posts/hot:
    get:
      operationId: getHotPosts
      tags:
        - 论坛模块
      summary: 获取热门帖子
      description: 获取热门帖子列表
      parameters:
        - name: count
          in: query
          schema:
            type: integer
            default: 10
            description: 获取数量
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListSimpleResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    title: "茶文化分享"
                    viewCount: 1000
                    likeCount: 100

  /forum/posts/recommend:
    get:
      operationId: getRecommendPosts
      tags:
        - 论坛模块
      summary: 获取推荐帖子
      description: 获取推荐帖子列表
      parameters:
        - name: count
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListSimpleResponse'
              example:
                code: 200
                data:
                  - id: "1"
                    title: "茶文化分享"
                    viewCount: 500
                    likeCount: 50

  /forum/posts/{id}/view:
    post:
      operationId: incrementPostView
      tags:
        - 论坛模块
      summary: 增加帖子浏览量
      description: 记录帖子浏览，增加浏览量
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 记录成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 200
                data: null

  /forum/posts/{id}/pin:
    put:
      operationId: pinPost
      tags:
        - 论坛模块
      summary: 置顶帖子（管理员）
      description: 管理员将帖子置顶
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 置顶成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6050
                data: null
    delete:
      operationId: unpinPost
      tags:
        - 论坛模块
      summary: 取消置顶帖子（管理员）
      description: 管理员取消帖子置顶
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6051
                data: null

  /forum/posts/{id}/recommend:
    put:
      operationId: recommendPost
      tags:
        - 论坛模块
      summary: 推荐帖子（管理员）
      description: 管理员将帖子设为推荐
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 推荐成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6052
                data: null
    delete:
      operationId: unrecommendPost
      tags:
        - 论坛模块
      summary: 取消推荐帖子（管理员）
      description: 管理员取消帖子推荐
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 6053
                data: null

  /forum/search:
    get:
      operationId: searchForum
      tags:
        - 论坛模块
      summary: 搜索论坛内容
      description: 搜索帖子和文章
      parameters:
        - name: keyword
          in: query
          required: true
          schema:
            type: string
            description: 搜索关键词
        - name: type
          in: query
          schema:
            type: string
            enum: [post, article, all]
            default: all
            description: 搜索类型
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 搜索成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResultResponse'
              example:
                code: 200
                data:
                  posts:
                    - id: "1"
                      title: "茶文化分享"
                      type: "post"
                  articles:
                    - id: "1"
                      title: "商南茶的历史"
                      type: "article"
                  total: 2

  # ==================== 消息模块 ====================
  /message/conversations:
    get:
      operationId: getConversations
      tags:
        - 消息模块
      summary: 获取会话列表
      description: 获取当前用户的聊天会话列表
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      targetUserId: "cy100003"
                      targetUsername: "茶友"
                      targetAvatar: "/images/avatar.png"
                      lastMessage: "你好"
                      lastMessageTime: "2025-01-15T10:30:00Z"
                      unreadCount: 2
                  total: 10

  /message/conversations/{userId}:
    get:
      operationId: getConversationMessages
      tags:
        - 消息模块
      summary: 获取会话消息列表
      description: 获取与指定用户的聊天消息列表
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      senderId: "cy100002"
                      receiverId: "cy100003"
                      content: "你好"
                      type: "text"
                      isRead: true
                      createTime: "2025-01-15T10:30:00Z"
                  total: 50

    post:
      operationId: sendMessage
      tags:
        - 消息模块
      summary: 发送消息
      description: 向指定用户发送聊天消息
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
            example:
              content: "你好"
              type: "text"
      responses:
        '200':
          description: 发送成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendMessageResponse'
              examples:
                success:
                  summary: 发送成功
                  value:
                    code: 7000
                    data:
                      messageId: "msg001"
                      createTime: "2025-01-15T10:30:00Z"
                failure:
                  summary: 发送失败
                  value:
                    code: 7100
                    data: null

  /message/conversations/{userId}/read:
    put:
      operationId: markConversationRead
      tags:
        - 消息模块
      summary: 标记会话已读
      description: 将与指定用户的会话标记为已读
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 标记成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7001
                data: null

  /message/conversations/{userId}/delete:
    delete:
      operationId: deleteConversation
      tags:
        - 消息模块
      summary: 删除会话
      description: 删除与指定用户的会话记录
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7002
                data: null

  /message/unread-count:
    get:
      operationId: getUnreadCount
      tags:
        - 消息模块
      summary: 获取未读消息数
      description: 获取当前用户的未读消息总数
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnreadCountResponse'
              example:
                code: 200
                data:
                  chatCount: 5
                  notificationCount: 3
                  totalCount: 8

  /message/notifications:
    get:
      operationId: getNotifications
      tags:
        - 消息模块
      summary: 获取系统通知列表
      description: 获取系统通知、点赞、评论等通知列表
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [system, like, comment, follow, all]
            default: all
            description: 通知类型
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationListResponse'
              example:
                code: 200
                data:
                  list:
                    - id: "1"
                      type: "like"
                      title: "点赞通知"
                      content: "茶友 点赞了你的帖子"
                      isRead: false
                      createTime: "2025-01-15T10:30:00Z"
                  total: 20

  /message/notifications/{id}/read:
    put:
      operationId: markNotificationRead
      tags:
        - 消息模块
      summary: 标记通知已读
      description: 将指定通知标记为已读
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 标记成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7010
                data: null

  /message/notifications/read-all:
    put:
      operationId: markAllNotificationsRead
      tags:
        - 消息模块
      summary: 标记所有通知已读
      description: 将所有通知标记为已读
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 标记成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7011
                data: null

  /message/notifications/{id}:
    delete:
      operationId: deleteNotification
      tags:
        - 消息模块
      summary: 删除通知
      description: 删除指定通知
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7012
                data: null

  /message/notifications/clear:
    delete:
      operationId: clearNotifications
      tags:
        - 消息模块
      summary: 清空通知
      description: 清空所有通知
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 清空成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7013
                data: null

  /message/system:
    post:
      operationId: sendSystemMessage
      tags:
        - 消息模块
      summary: 发送系统消息（管理员）
      description: 管理员发送系统消息给指定用户或全体用户
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [title, content]
              properties:
                title:
                  type: string
                  description: 消息标题
                content:
                  type: string
                  description: 消息内容
                targetUserId:
                  type: string
                  description: 目标用户ID（不填则发送给全体用户）
      responses:
        '200':
          description: 发送成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 发送成功
                  value:
                    code: 7020
                    data: null
                failure:
                  summary: 发送失败
                  value:
                    code: 7120
                    data: null

  /message/settings:
    get:
      operationId: getMessageSettings
      tags:
        - 消息模块
      summary: 获取消息设置
      description: 获取当前用户的消息通知设置
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageSettingsResponse'
              example:
                code: 200
                data:
                  enableChatNotification: true
                  enableLikeNotification: true
                  enableCommentNotification: true
                  enableFollowNotification: true
                  enableSystemNotification: true
    put:
      operationId: updateMessageSettings
      tags:
        - 消息模块
      summary: 更新消息设置
      description: 更新当前用户的消息通知设置
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageSettingsRequest'
            example:
              enableChatNotification: true
              enableLikeNotification: false
              enableCommentNotification: true
              enableFollowNotification: true
              enableSystemNotification: true
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7021
                data: null

  /message/blacklist:
    get:
      operationId: getBlacklist
      tags:
        - 消息模块
      summary: 获取黑名单列表
      description: 获取当前用户的黑名单用户列表
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlacklistResponse'
              example:
                code: 200
                data:
                  - userId: "cy100004"
                    username: "用户A"
                    avatar: "/images/avatar.png"
                    createTime: "2025-01-15T10:30:00Z"
    post:
      operationId: addToBlacklist
      tags:
        - 消息模块
      summary: 添加到黑名单
      description: 将指定用户添加到黑名单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId]
              properties:
                userId:
                  type: string
                  description: 用户ID
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加成功
                  value:
                    code: 7030
                    data: null
                failure:
                  summary: 添加失败
                  value:
                    code: 7130
                    data: null

  /message/blacklist/{userId}:
    delete:
      operationId: removeFromBlacklist
      tags:
        - 消息模块
      summary: 从黑名单移除
      description: 将指定用户从黑名单移除
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 移除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                code: 7031
                data: null

  # ==================== 公共模块 ====================
  /common/upload:
    post:
      operationId: uploadFile
      tags:
        - 公共模块
      summary: 上传文件
      description: 上传图片或其他文件
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 文件
                type:
                  type: string
                  enum: [avatar, tea, shop, post, article]
                  description: 文件类型
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
              examples:
                success:
                  summary: 上传成功
                  value:
                    code: 1001
                    data:
                      url: "/uploads/images/file123.jpg"
                failure:
                  summary: 上传失败
                  value:
                    code: 1101
                    data: null

  /common/captcha:
    get:
      operationId: getCaptcha
      tags:
        - 公共模块
      summary: 获取验证码
      description: 获取图形验证码
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaptchaResponse'
              example:
                code: 200
                data:
                  captchaId: "captcha123"
                  captchaImage: "data:image/png;base64,iVBORw0KGgo..."


components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT 认证令牌

  schemas:
    # ========== 基础响应 ==========
    BaseResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: integer
          description: 业务状态码
        data:
          nullable: true
          description: 响应数据

    # ========== 用户模块基础 Schemas ==========
    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          description: 用户名
          minLength: 3
          maxLength: 50
        password:
          type: string
          description: 密码
          format: password
          minLength: 6

    LoginResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [2000, 2100]
          description: 2000=登录成功, 2100=登录失败
        data:
          type: object
          nullable: true
          properties:
            token:
              type: string
              description: JWT Token

    RegisterRequest:
      type: object
      required:
        - username
        - password
        - confirmPassword
      properties:
        username:
          type: string
          description: 用户名
          minLength: 3
          maxLength: 50
        password:
          type: string
          description: 密码
          format: password
          minLength: 6
        confirmPassword:
          type: string
          description: 确认密码
          format: password
          minLength: 6
        email:
          type: string
          format: email
          description: 邮箱
        phone:
          type: string
          description: 手机号

    RegisterResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [2001, 2101]
          description: 2001=注册成功, 2101=注册失败
        data:
          type: object
          nullable: true
          properties:
            id:
              type: string
              description: 用户ID
            username:
              type: string
              description: 用户名
            nickname:
              type: string
              description: 昵称
            avatar:
              type: string
              description: 头像URL
            role:
              type: integer
              description: 角色
            status:
              type: integer
              description: 状态

    RefreshTokenResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
          description: 200=刷新成功
        data:
          type: object
          properties:
            token:
              type: string
              description: 新的JWT Token

    UserInfoResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
          description: 200=获取成功
        data:
          $ref: '#/components/schemas/UserInfo'

    UserInfo:
      type: object
      properties:
        id:
          type: string
          description: 用户ID
        username:
          type: string
          description: 用户名
        nickname:
          type: string
          description: 昵称
        avatar:
          type: string
          description: 头像URL
        email:
          type: string
          format: email
          description: 邮箱
        phone:
          type: string
          description: 手机号
        role:
          type: integer
          description: 角色 (1=管理员, 2=普通用户, 3=商家)
        status:
          type: integer
          description: 状态 (0=禁用, 1=启用)

    # ========== 用户模块 Schemas ==========
    UpdateUserRequest:
      type: object
      properties:
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string

    UpdatePasswordRequest:
      type: object
      required:
        - oldPassword
        - newPassword
        - confirmNewPassword
      properties:
        oldPassword:
          type: string
          format: password
        newPassword:
          type: string
          format: password
        confirmNewPassword:
          type: string
          format: password

    ResetPasswordRequest:
      type: object
      required:
        - username
        - newPassword
      properties:
        username:
          type: string
        phone:
          type: string
        email:
          type: string
        verificationCode:
          type: string
        newPassword:
          type: string
          format: password

    AddressListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Address'

    Address:
      type: object
      properties:
        id:
          type: integer
        receiverName:
          type: string
        receiverPhone:
          type: string
        province:
          type: string
        city:
          type: string
        district:
          type: string
        detailAddress:
          type: string
        isDefault:
          type: integer
          enum: [0, 1]

    CertificationResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Certification'

    Certification:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: string
        shopName:
          type: string
        businessLicense:
          type: string
        idCardFront:
          type: string
        idCardBack:
          type: string
        status:
          type: integer
          enum: [0, 1, 2]
          description: 0=待审核, 1=已通过, 2=已拒绝
        createTime:
          type: string
          format: date-time

    CertificationRequest:
      type: object
      required:
        - shopName
        - businessLicense
        - idCardFront
        - idCardBack
      properties:
        shopName:
          type: string
        businessLicense:
          type: string
        idCardFront:
          type: string
        idCardBack:
          type: string

    FollowListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Follow'

    Follow:
      type: object
      properties:
        id:
          type: integer
        targetId:
          type: string
        targetType:
          type: string
          enum: [user, shop]
        targetName:
          type: string
        targetAvatar:
          type: string
        createTime:
          type: string
          format: date-time

    FollowRequest:
      type: object
      required:
        - targetId
        - targetType
      properties:
        targetId:
          type: string
        targetType:
          type: string
          enum: [user, shop]

    FavoriteListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Favorite'

    Favorite:
      type: object
      properties:
        id:
          type: integer
        targetId:
          type: string
        targetType:
          type: string
          enum: [tea, post, article]
        targetName:
          type: string
        targetImage:
          type: string
        createTime:
          type: string
          format: date-time

    FavoriteRequest:
      type: object
      required:
        - targetId
        - targetType
      properties:
        targetId:
          type: string
        targetType:
          type: string
          enum: [tea, post, article]

    LikeRequest:
      type: object
      required:
        - targetId
        - targetType
      properties:
        targetId:
          type: string
        targetType:
          type: string
          enum: [post, comment, review]

    PreferencesResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Preferences'

    Preferences:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark]
        displayMode:
          type: string
          enum: [grid, list]
        language:
          type: string

    PreferencesRequest:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark]
        displayMode:
          type: string
          enum: [grid, list]
        language:
          type: string

    UserListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/UserInfo'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    CreateAdminRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
        password:
          type: string
          format: password
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        avatar:
          type: string

    AdminUpdateUserRequest:
      type: object
      properties:
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        status:
          type: integer
          enum: [0, 1]
        avatar:
          type: string

    CertificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Certification'
            total:
              type: integer

    # ========== 茶叶模块 Schemas ==========
    TeaListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [3000, 200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Tea'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    Tea:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        categoryId:
          type: integer
        shopId:
          type: string
        price:
          type: number
          format: double
        originalPrice:
          type: number
          format: double
        stock:
          type: integer
        sales:
          type: integer
        description:
          type: string
        images:
          type: array
          items:
            type: string
        status:
          type: integer
          enum: [0, 1]

    TeaRequest:
      type: object
      properties:
        name:
          type: string
        categoryId:
          type: integer
        shopId:
          type: string
        price:
          type: number
          format: double
        originalPrice:
          type: number
          format: double
        stock:
          type: integer
        description:
          type: string
        images:
          type: array
          items:
            type: string
        status:
          type: integer
          enum: [0, 1]

    TeaDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [3001, 200]
        data:
          $ref: '#/components/schemas/Tea'

    TeaCategoryListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/TeaCategory'

    TeaCategory:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        parentId:
          type: integer
        sortOrder:
          type: integer
        icon:
          type: string

    TeaCategoryRequest:
      type: object
      properties:
        name:
          type: string
        parentId:
          type: integer
        sortOrder:
          type: integer
        icon:
          type: string

    ReviewListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Review'
            total:
              type: integer

    Review:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: string
        username:
          type: string
        avatar:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        content:
          type: string
        images:
          type: array
          items:
            type: string
        createTime:
          type: string
          format: date-time

    ReviewStatsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            averageRating:
              type: number
              format: float
            totalCount:
              type: integer
            ratingDistribution:
              type: object
              additionalProperties:
                type: integer

    ReviewRequest:
      type: object
      required:
        - teaId
        - rating
        - content
      properties:
        teaId:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        content:
          type: string
        images:
          type: array
          items:
            type: string
        orderId:
          type: string

    SpecificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Specification'

    Specification:
      type: object
      properties:
        id:
          type: string
        teaId:
          type: string
        specName:
          type: string
        price:
          type: number
          format: double
        stock:
          type: integer
        isDefault:
          type: integer
          enum: [0, 1]

    SpecificationRequest:
      type: object
      properties:
        specName:
          type: string
        price:
          type: number
          format: double
        stock:
          type: integer
        isDefault:
          type: integer
          enum: [0, 1]

    UploadImagesResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [1001]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              url:
                type: string

    TeaListSimpleResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              name:
                type: string
              price:
                type: number
              images:
                type: array
                items:
                  type: string

    # ========== 店铺模块 Schemas ==========
    ShopListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Shop'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    Shop:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        logo:
          type: string
        description:
          type: string
        rating:
          type: number
          format: float
        salesCount:
          type: integer
        followCount:
          type: integer
        ownerId:
          type: string

    ShopRequest:
      type: object
      properties:
        name:
          type: string
        logo:
          type: string
        description:
          type: string

    ShopDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Shop'

    ShopStatisticsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            totalSales:
              type: number
              format: double
            orderCount:
              type: integer
            productCount:
              type: integer
            followCount:
              type: integer

    BannerListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Banner'

    Banner:
      type: object
      properties:
        id:
          type: string
        imageUrl:
          type: string
        title:
          type: string
        linkUrl:
          type: string
        sortOrder:
          type: integer

    AnnouncementListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Announcement'

    Announcement:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        content:
          type: string
        isTop:
          type: boolean
        createTime:
          type: string
          format: date-time

    AnnouncementRequest:
      type: object
      properties:
        title:
          type: string
        content:
          type: string
        isTop:
          type: boolean

    FollowStatusResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            isFollowed:
              type: boolean

    # ========== 订单模块 Schemas ==========
    CreateOrderRequest:
      type: object
      required:
        - items
        - addressId
      properties:
        items:
          type: array
          items:
            type: object
            properties:
              teaId:
                type: string
              specId:
                type: string
              quantity:
                type: integer
                minimum: 1
        addressId:
          type: string
        remark:
          type: string

    CreateOrderResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [4000]
        data:
          type: object
          properties:
            orderId:
              type: string
            totalPrice:
              type: number
              format: double
            status:
              type: integer

    OrderListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Order'
            total:
              type: integer

    Order:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        shopId:
          type: string
        status:
          type: integer
          enum: [0, 1, 2, 3, 4]
          description: 0=待付款, 1=待发货, 2=待收货, 3=已完成, 4=已取消
        totalPrice:
          type: number
          format: double
        createTime:
          type: string
          format: date-time

    OrderDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            userId:
              type: string
            status:
              type: integer
            totalPrice:
              type: number
            items:
              type: array
              items:
                type: object
                properties:
                  teaId:
                    type: string
                  teaName:
                    type: string
                  quantity:
                    type: integer
                  price:
                    type: number
            address:
              type: object
              properties:
                receiverName:
                  type: string
                receiverPhone:
                  type: string
                detailAddress:
                  type: string
            createTime:
              type: string
              format: date-time

    PayOrderResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [4002]
        data:
          type: object
          properties:
            paymentUrl:
              type: string

    ExpressInfoResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            expressCompany:
              type: string
            expressNumber:
              type: string
            traces:
              type: array
              items:
                type: object
                properties:
                  time:
                    type: string
                    format: date-time
                  status:
                    type: string

    CartResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/CartItem'
            totalPrice:
              type: number
              format: double

    CartItem:
      type: object
      properties:
        id:
          type: string
        teaId:
          type: string
        teaName:
          type: string
        specId:
          type: string
        specName:
          type: string
        price:
          type: number
          format: double
        quantity:
          type: integer
        selected:
          type: boolean

    OrderStatisticsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            totalOrders:
              type: integer
            totalSales:
              type: number
              format: double
            pendingOrders:
              type: integer
            shippedOrders:
              type: integer
            completedOrders:
              type: integer
            cancelledOrders:
              type: integer

    # ========== 论坛模块 Schemas ==========
    PostListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Post'
            total:
              type: integer

    Post:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        content:
          type: string
        authorId:
          type: string
        authorName:
          type: string
        categoryId:
          type: string
        viewCount:
          type: integer
        likeCount:
          type: integer
        commentCount:
          type: integer
        createTime:
          type: string
          format: date-time

    PostDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            title:
              type: string
            content:
              type: string
            authorId:
              type: string
            authorName:
              type: string
            authorAvatar:
              type: string
            categoryId:
              type: string
            images:
              type: array
              items:
                type: string
            viewCount:
              type: integer
            likeCount:
              type: integer
            commentCount:
              type: integer
            isLiked:
              type: boolean
            createTime:
              type: string
              format: date-time

    UpdatePostRequest:
      type: object
      properties:
        title:
          type: string
        content:
          type: string
        categoryId:
          type: string
        images:
          type: array
          items:
            type: string

    CommentListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Comment'
            total:
              type: integer

    Comment:
      type: object
      properties:
        id:
          type: string
        postId:
          type: string
        userId:
          type: string
        username:
          type: string
        avatar:
          type: string
        content:
          type: string
        likeCount:
          type: integer
        createTime:
          type: string
          format: date-time

    ForumCategoryListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/ForumCategory'

    ForumCategory:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        sortOrder:
          type: integer

    ForumCategoryRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        sortOrder:
          type: integer

    ArticleListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Article'
            total:
              type: integer

    Article:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        summary:
          type: string
        coverImage:
          type: string
        authorId:
          type: string
        authorName:
          type: string
        viewCount:
          type: integer
        createTime:
          type: string
          format: date-time

    ArticleDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            title:
              type: string
            content:
              type: string
            summary:
              type: string
            coverImage:
              type: string
            authorId:
              type: string
            authorName:
              type: string
            categoryId:
              type: string
            viewCount:
              type: integer
            createTime:
              type: string
              format: date-time

    ArticleRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
        content:
          type: string
        summary:
          type: string
        coverImage:
          type: string
        categoryId:
          type: string

    PostListSimpleResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              title:
                type: string
              viewCount:
                type: integer
              likeCount:
                type: integer

    SearchResultResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            posts:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  title:
                    type: string
                  type:
                    type: string
            articles:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  title:
                    type: string
                  type:
                    type: string
            total:
              type: integer

    # ========== 消息模块 Schemas ==========
    ConversationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Conversation'
            total:
              type: integer

    Conversation:
      type: object
      properties:
        id:
          type: string
        targetUserId:
          type: string
        targetUsername:
          type: string
        targetAvatar:
          type: string
        lastMessage:
          type: string
        lastMessageTime:
          type: string
          format: date-time
        unreadCount:
          type: integer

    MessageListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Message'
            total:
              type: integer

    Message:
      type: object
      properties:
        id:
          type: string
        senderId:
          type: string
        receiverId:
          type: string
        content:
          type: string
        type:
          type: string
          enum: [text, image, file]
        isRead:
          type: boolean
        createTime:
          type: string
          format: date-time

    SendMessageRequest:
      type: object
      required:
        - content
        - type
      properties:
        content:
          type: string
        type:
          type: string
          enum: [text, image, file]

    SendMessageResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [7000]
        data:
          type: object
          properties:
            messageId:
              type: string
            createTime:
              type: string
              format: date-time

    UnreadCountResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            chatCount:
              type: integer
            notificationCount:
              type: integer
            totalCount:
              type: integer

    NotificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Notification'
            total:
              type: integer

    Notification:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          enum: [system, like, comment, follow]
        title:
          type: string
        content:
          type: string
        isRead:
          type: boolean
        createTime:
          type: string
          format: date-time

    MessageSettingsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/MessageSettings'

    MessageSettings:
      type: object
      properties:
        enableChatNotification:
          type: boolean
        enableLikeNotification:
          type: boolean
        enableCommentNotification:
          type: boolean
        enableFollowNotification:
          type: boolean
        enableSystemNotification:
          type: boolean

    MessageSettingsRequest:
      type: object
      properties:
        enableChatNotification:
          type: boolean
        enableLikeNotification:
          type: boolean
        enableCommentNotification:
          type: boolean
        enableFollowNotification:
          type: boolean
        enableSystemNotification:
          type: boolean

    BlacklistResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
              username:
                type: string
              avatar:
                type: string
              createTime:
                type: string
                format: date-time

    # ========== 公共模块 Schemas ==========
    UploadResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [1001, 2012, 5030]
        data:
          type: object
          properties:
            url:
              type: string
            avatarUrl:
              type: string

    CaptchaResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            captchaId:
              type: string
            captchaImage:
              type: string

    AddressRequest:
      type: object
      required:
        - receiverName
        - receiverPhone
      properties:
        receiverName:
          type: string
          description: 收货人姓名
        receiverPhone:
          type: string
          description: 收货人电话
        province:
          type: string
          description: 省份
        city:
          type: string
          description: 城市
        district:
          type: string
          description: 区县
        detailAddress:
          type: string
          description: 详细地址
        isDefault:
          type: integer
          enum: [0, 1]
          description: 是否默认地址

    CreatePostRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
          description: 帖子标题
          minLength: 1
          maxLength: 200
        content:
          type: string
          description: 帖子内容
          minLength: 1
        categoryId:
          type: string
          description: 分类ID
        images:
          type: array
          items:
            type: string
          description: 图片URL列表

    CreatePostResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [6000]
          description: 6000=帖子发布成功
        data:
          type: object
          properties:
            postId:
              type: string
              description: 帖子ID
            title:
              type: string
              description: 帖子标题
            createTime:
              type: string
              format: date-time
              description: 创建时间
