openapi: 3.0.3
info:
  title: 商南茶城 API
  description: |
    商南茶城电商平台 API 接口文档
    
    ## 认证方式
    使用 Bearer Token 认证，在请求头中添加：
    ```
    Authorization: Bearer <token>
    ```
    
    ## 响应格式
    所有接口统一返回 HTTP 200，通过 `code` 字段区分业务状态：
    ```json
    {
      "code": 2000,
      "data": { ... }
    }
    ```
    
    ## 业务状态码规则
    | 模块 | 成功码范围 | 失败码范围 |
    |------|-----------|-----------|
    | 通用 | 10xx | 11xx |
    | 用户 | 20xx-22xx | 21xx-22xx |
    | 茶叶 | 30xx-33xx | 31xx-33xx |
    | 订单 | 40xx-46xx | 41xx-46xx |
    | 店铺 | 50xx-53xx | 51xx-53xx |
    | 论坛 | 60xx-66xx | 61xx-66xx |
    | 消息 | 70xx-72xx | 71xx-72xx |
    
    **判断规则**：百位为 0 表示成功，百位为 1 表示失败
  version: 1.0.0
  contact:
    name: API Support
    email: support@shangnantea.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://127.0.0.1:4523/m1/7594087-7332672-default
    description: Mock 服务器
  - url: /api
    description: 生产环境 API

tags:
  - name: 用户模块
    description: 用户认证、信息管理相关接口
  - name: 茶叶模块
    description: 茶叶商品相关接口
  - name: 店铺模块
    description: 店铺信息相关接口
  - name: 订单模块
    description: 订单管理相关接口
  - name: 论坛模块
    description: 论坛帖子相关接口
  - name: 消息模块
    description: 消息通知相关接口

paths:
  # ==================== 用户模块 ====================
  /user/login:
    post:
      operationId: userLogin
      tags:
        - 用户模块
      summary: 用户登录
      description: |
        使用用户名和密码进行登录，返回 JWT Token。
        
        JWT Token Payload 包含以下字段：
        - sub: 用户ID
        - role: 用户角色 (1-管理员, 2-普通用户, 3-商家)
        - username: 用户名
        - iat: 签发时间 (Unix时间戳，秒)
        - exp: 过期时间 (Unix时间戳，秒)
        - iss: 签发者 ("shangnantea")
        
        Token有效期：24小时
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            example:
              username: "testuser"
              password: "password123"
      responses:
        '200':
          description: 请求完成，通过 code 判断业务结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                success:
                  summary: 登录成功
                  description: |
                    返回JWT Token，前端需要：
                    1. 存储token到localStorage
                    2. 解析token获取用户信息(sub=用户ID, role=角色, username=用户名)
                    3. 后续请求在Header中携带: Authorization: Bearer <token>
                  value:
                    code: 2000
                    data:
                      token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeTEwMDAwMiIsInJvbGUiOjIsInVzZXJuYW1lIjoidGVzdHVzZXIiLCJpYXQiOjE3MzcwMDAwMDAsImV4cCI6MTg5MzQ1NjAwMCwiaXNzIjoic2hhbmduYW50ZWEifQ.mock_signature_for_testing"
                failure_wrong_password:
                  summary: 登录失败，请检查用户名和密码
                  value:
                    code: 2100
                    data: null
                failure_token_generation:
                  summary: 登录失败，服务器Token生成失败
                  value:
                    code: 2101
                    data: null

  /user/register:
    post:
      operationId: userRegister
      tags:
        - 用户模块
      summary: 用户注册
      description: 注册新用户账号
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            example:
              username: "newuser"
              password: "password123"
              confirmPassword: "password123"
      responses:
        '200':
          description: 请求完成，通过 code 判断业务结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
              examples:
                success:
                  summary: 注册成功，请登录
                  value:
                    code: 2001
                    data: null
                failure:
                  summary: 注册失败，用户名已存在或数据格式错误
                  value:
                    code: 2102
                    data: null

  /user/logout:
    post:
      operationId: userLogout
      tags:
        - 用户模块
      summary: 退出登录
      description: 退出当前用户登录状态
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 退出成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已安全退出系统
                  value:
                    code: 2002
                    data: null
                failure:
                  summary: 退出登录失败
                  value:
                    code: 2103
                    data: null

  /user/refresh:
    post:
      operationId: refreshToken
      tags:
        - 用户模块
      summary: 刷新令牌
      description: |
        刷新JWT令牌，获取新的有效token。
        
        刷新规则：
        - 需要在Header中携带原token: Authorization: Bearer <token>
        - 即使原token已过期，只要未被篡改，仍可刷新
        - 刷新后返回新token，原token失效
        - 新token有效期：24小时
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 刷新结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
              examples:
                success:
                  summary: 刷新成功
                  value:
                    code: 200
                    data:
                      token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeTEwMDAwMiIsInJvbGUiOjIsInVzZXJuYW1lIjoidGVzdHVzZXIiLCJpYXQiOjE3MzcwMDAwMDAsImV4cCI6MTg5MzQ1NjAwMCwiaXNzIjoic2hhbmduYW50ZWEifQ.mock_signature_for_testing"
                failure_refresh_failed:
                  summary: 刷新令牌失败
                  value:
                    code: 2105
                    data: null
                failure_token_expired:
                  summary: 您的登录已过期，请重新登录
                  value:
                    code: 2106
                    data: null

  /user/me:
    get:
      operationId: getUserMe
      tags:
        - 用户模块
      summary: 获取当前用户信息
      description: 获取当前登录用户的详细信息
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
              examples:
                success:
                  summary: 获取当前用户信息成功
                  value:
                    code: 200
                    data:
                      id: "cy100002"
                      username: "user"
                      nickname: "测试用户"
                      avatar: "/images/default-avatar.png"
                      email: "user@example.com"
                      phone: "13800138000"
                      role: 2
                      status: 1
                failure:
                  summary: 获取当前用户信息失败
                  value:
                    code: 2104
                    data: null

  /user/{userId}:
    get:
      operationId: getUserById
      tags:
        - 用户模块
      summary: 获取指定用户信息
      description: 根据用户ID获取用户公开信息
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
              examples:
                success:
                  summary: 获取用户信息成功
                  value:
                    code: 200
                    data:
                      id: "cy100002"
                      username: "user"
                      nickname: "测试用户"
                      avatar: "/images/default-avatar.png"
                      role: 2
                      status: 1
                      isFollowed: false
                failure:
                  summary: 获取用户信息失败
                  value:
                    code: 2107
                    data: null

  /user:
    put:
      operationId: updateUser
      tags:
        - 用户模块
      summary: 更新用户信息
      description: 更新当前用户的个人信息
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
            example:
              nickname: "新昵称"
              email: "newemail@example.com"
              phone: "13900139000"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 个人资料更新成功
                  value:
                    code: 2003
                    data: null
                failure:
                  summary: 个人资料更新失败
                  value:
                    code: 2108
                    data: null

  /user/avatar:
    post:
      operationId: uploadAvatar
      tags:
        - 用户模块
      summary: 上传头像
      description: 上传用户头像图片
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 头像图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
              examples:
                success:
                  summary: 头像更新成功
                  value:
                    code: 2004
                    data:
                      avatarUrl: "/uploads/avatar/user_cy100002.jpg"
                failure_upload:
                  summary: 头像更新失败
                  value:
                    code: 2109
                    data: null
                failure_file_type:
                  summary: 不支持的文件类型
                  value:
                    code: 2110
                    data: null
                failure_file_size:
                  summary: 文件大小超限
                  value:
                    code: 2111
                    data: null

  /user/password:
    put:
      operationId: updatePassword
      tags:
        - 用户模块
      summary: 修改密码
      description: 修改当前用户密码
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePasswordRequest'
            example:
              oldPassword: "oldpass123"
              newPassword: "newpass123"
              confirmNewPassword: "newpass123"
      responses:
        '200':
          description: 修改结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 密码修改成功，请使用新密码登录
                  value:
                    code: 2005
                    data: null
                failure_wrong_password:
                  summary: 密码修改失败，请检查原密码是否正确
                  value:
                    code: 2112
                    data: null
                failure_mismatch:
                  summary: 两次输入的密码不一致
                  value:
                    code: 2113
                    data: null

  /user/password/reset:
    post:
      operationId: resetPassword
      tags:
        - 用户模块
      summary: 密码找回/重置
      description: 通过验证码重置密码
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
            example:
              username: "testuser"
              phone: "13800138000"
              verificationCode: "123456"
              newPassword: "newpass123"
      responses:
        '200':
          description: 重置结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 密码重置成功
                  value:
                    code: 2006
                    data: null
                failure:
                  summary: 密码重置失败
                  value:
                    code: 2114
                    data: null

  /user/addresses:
    get:
      operationId: getAddresses
      tags:
        - 用户模块
      summary: 获取收货地址列表
      description: 获取当前用户的所有收货地址
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddressListResponse'
              examples:
                success:
                  summary: 获取地址列表成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        receiverName: "张三"
                        receiverPhone: "13800138000"
                        province: "陕西省"
                        city: "商洛市"
                        district: "商南县"
                        detailAddress: "茶城路1号"
                        isDefault: 1
                failure:
                  summary: 获取地址失败
                  value:
                    code: 2115
                    data: null
    post:
      operationId: addAddress
      tags:
        - 用户模块
      summary: 添加收货地址
      description: 为当前用户添加新的收货地址
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressRequest'
            example:
              receiverName: "张三"
              receiverPhone: "13800138000"
              province: "陕西省"
              city: "商洛市"
              district: "商南县"
              detailAddress: "茶城路1号"
              isDefault: 0
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 地址添加成功
                  value:
                    code: 2007
                    data: null
                failure:
                  summary: 保存地址失败
                  value:
                    code: 2116
                    data: null

  /user/addresses/{id}:
    put:
      operationId: updateAddress
      tags:
        - 用户模块
      summary: 更新收货地址
      description: 更新指定的收货地址信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 2008
                    data: null
                failure:
                  summary: 保存地址失败
                  value:
                    code: 2117
                    data: null
    delete:
      operationId: deleteAddress
      tags:
        - 用户模块
      summary: 删除收货地址
      description: 删除指定的收货地址
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 2009
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2118
                    data: null

  /user/addresses/{id}/default:
    put:
      operationId: setDefaultAddress
      tags:
        - 用户模块
      summary: 设置默认地址
      description: 将指定地址设置为默认收货地址
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新成功
                  value:
                    code: 2010
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2119
                    data: null

  /user/shop-certification:
    get:
      operationId: getShopCertification
      tags:
        - 用户模块
      summary: 获取商家认证状态
      description: 获取当前用户的商家认证申请状态
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertificationResponse'
              examples:
                success:
                  summary: 获取认证状态成功
                  value:
                    code: 200
                    data:
                      id: 1
                      userId: "cy100002"
                      shopName: "茶香阁"
                      businessLicense: "/uploads/license.jpg"
                      idCardFront: "/uploads/id_front.jpg"
                      idCardBack: "/uploads/id_back.jpg"
                      status: 0
                      createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 加载失败
                  value:
                    code: 2121
                    data: null
    post:
      operationId: submitShopCertification
      tags:
        - 用户模块
      summary: 提交商家认证申请
      description: 提交商家认证申请资料
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CertificationRequest'
            example:
              shopName: "茶香阁"
              businessLicense: "/uploads/license.jpg"
              idCardFront: "/uploads/id_front.jpg"
              idCardBack: "/uploads/id_back.jpg"
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 2011
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2120
                    data: null

  /user/follows:
    get:
      operationId: getFollows
      tags:
        - 用户模块
      summary: 获取关注列表
      description: 获取当前用户的关注列表（用户或店铺）
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [user, shop]
            description: 关注类型
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FollowListResponse'
              examples:
                success:
                  summary: 获取关注列表成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        targetId: "cy100003"
                        targetType: "user"
                        targetName: "茶友小王"
                        targetAvatar: "/images/avatar1.png"
                        createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 加载失败
                  value:
                    code: 2122
                    data: null
    post:
      operationId: addFollow
      tags:
        - 用户模块
      summary: 添加关注
      description: 关注用户或店铺
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FollowRequest'
            example:
              targetId: "cy100003"
              targetType: "user"
      responses:
        '200':
          description: 关注成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已关注店铺
                  value:
                    code: 2012
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2123
                    data: null

  /user/follows:
    delete:
      operationId: removeFollow
      tags:
        - 用户模块
      summary: 取消关注
      description: 取消关注用户或店铺
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FollowRequest'
            example:
              targetId: "cy100003"
              targetType: "user"
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已取消关注
                  value:
                    code: 2013
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2124
                    data: null

  /user/favorites:
    get:
      operationId: getFavorites
      tags:
        - 用户模块
      summary: 获取收藏列表
      description: 获取当前用户的收藏列表（茶叶、帖子、文章）
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [tea, post, article]
            description: 收藏类型
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteListResponse'
              examples:
                success:
                  summary: 获取收藏列表成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        targetId: "1"
                        targetType: "tea"
                        targetName: "商南绿茶"
                        targetImage: "/images/tea1.jpg"
                        createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 加载失败
                  value:
                    code: 2125
                    data: null
    post:
      operationId: addFavorite
      tags:
        - 用户模块
      summary: 添加收藏
      description: 收藏茶叶、帖子或文章
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
            example:
              itemId: "1"
              itemType: "tea"
      responses:
        '200':
          description: 收藏成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已收藏
                  value:
                    code: 2014
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2126
                    data: null

  /user/favorites:
    delete:
      operationId: removeFavorite
      tags:
        - 用户模块
      summary: 取消收藏
      description: 取消收藏茶叶、帖子或文章
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
            example:
              itemId: "1"
              itemType: "tea"
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已取消收藏
                  value:
                    code: 2015
                    data: null
                failure:
                  summary: 操作失败
                  value:
                    code: 2127
                    data: null

  /user/likes:
    post:
      operationId: addLike
      tags:
        - 用户模块
      summary: 点赞
      description: 对帖子、评论等内容点赞
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LikeRequest'
            example:
              targetId: "1"
              targetType: "post"
      responses:
        '200':
          description: 点赞成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 点赞成功
                  value:
                    code: 2016
                    data: null
                failure:
                  summary: 点赞失败
                  value:
                    code: 2128
                    data: null

  /user/likes:
    delete:
      operationId: removeLike
      tags:
        - 用户模块
      summary: 取消点赞
      description: 取消对内容的点赞
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LikeRequest'
            example:
              targetId: "1"
              targetType: "post"
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 已取消点赞
                  value:
                    code: 2017
                    data: null
                failure:
                  summary: 取消点赞失败
                  value:
                    code: 2129
                    data: null

  /user/preferences:
    get:
      operationId: getPreferences
      tags:
        - 用户模块
      summary: 获取用户偏好设置
      description: 获取当前用户的偏好设置（主题、显示模式等）
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreferencesResponse'
              examples:
                success:
                  summary: 获取用户偏好设置成功
                  value:
                    code: 200
                    data:
                      theme: "light"
                      displayMode: "grid"
                      language: "zh-CN"
                failure:
                  summary: 加载失败
                  value:
                    code: 2130
                    data: null
    put:
      operationId: updatePreferences
      tags:
        - 用户模块
      summary: 更新用户偏好设置
      description: 更新当前用户的偏好设置
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreferencesRequest'
            example:
              theme: "dark"
              displayMode: "list"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 偏好设置更新成功
                  value:
                    code: 2018
                    data: null
                failure:
                  summary: 偏好设置更新失败
                  value:
                    code: 2131
                    data: null

  /user/admin/users:
    get:
      operationId: adminGetUsers
      tags:
        - 用户模块
      summary: 获取用户列表（管理员）
      description: 管理员获取用户列表，支持筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: role
          in: query
          schema:
            type: integer
            enum: [1, 2, 3]
            description: 角色筛选
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1]
            description: 状态筛选
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
              examples:
                success:
                  summary: 获取用户列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "cy100001"
                          username: "admin"
                          nickname: "管理员"
                          role: 1
                          status: 1
                          createTime: "2024-01-01T00:00:00Z"
                        - id: "cy100002"
                          username: "user"
                          nickname: "普通用户"
                          role: 2
                          status: 1
                          createTime: "2024-01-02T00:00:00Z"
                      total: 100
                      page: 1
                      pageSize: 10
                failure:
                  summary: 获取用户列表失败
                  value:
                    code: 2132
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2133
                    data: null
    post:
      operationId: adminCreateUser
      tags:
        - 用户模块
      summary: 创建管理员账号（管理员）
      description: 管理员创建新的管理员账号
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAdminRequest'
            example:
              username: "newadmin"
              password: "admin123"
              nickname: "新管理员"
              email: "admin@example.com"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建管理员成功
                  value:
                    code: 2019
                    data: null
                failure:
                  summary: 创建管理员失败
                  value:
                    code: 2134
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2135
                    data: null

  /user/admin/users/{userId}:
    put:
      operationId: adminUpdateUser
      tags:
        - 用户模块
      summary: 更新用户信息（管理员）
      description: 管理员更新指定用户的信息
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserRequest'
            example:
              nickname: "新昵称"
              email: "newemail@example.com"
              status: 1
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新用户成功
                  value:
                    code: 2020
                    data: null
                failure:
                  summary: 更新用户失败
                  value:
                    code: 2136
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2137
                    data: null
    delete:
      operationId: adminDeleteUser
      tags:
        - 用户模块
      summary: 删除用户（管理员）
      description: 管理员删除指定用户
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除用户成功
                  value:
                    code: 2021
                    data: null
                failure:
                  summary: 删除用户失败
                  value:
                    code: 2138
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2139
                    data: null

  /user/admin/users/{userId}/status:
    put:
      operationId: adminUpdateUserStatus
      tags:
        - 用户模块
      summary: 启用/禁用用户（管理员）
      description: 管理员启用或禁用指定用户
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=禁用, 1=启用
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 切换用户状态成功
                  value:
                    code: 2022
                    data: null
                failure:
                  summary: 切换用户状态失败
                  value:
                    code: 2140
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2141
                    data: null

  /user/admin/certifications:
    get:
      operationId: adminGetCertifications
      tags:
        - 用户模块
      summary: 获取商家认证申请列表（管理员）
      description: 管理员获取所有商家认证申请列表，支持状态筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2]
            description: 0=待审核, 1=已通过, 2=已拒绝
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertificationListResponse'
              examples:
                success:
                  summary: 获取认证列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          userId: "cy100002"
                          shopName: "茶香阁"
                          status: 0
                          createTime: "2025-01-01T12:00:00Z"
                      total: 10
                failure:
                  summary: 获取认证列表失败
                  value:
                    code: 2142
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2143
                    data: null

  /user/admin/certifications/{id}:
    put:
      operationId: adminReviewCertification
      tags:
        - 用户模块
      summary: 审核认证申请（管理员）
      description: 管理员审核商家认证申请，通过或拒绝
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: integer
                  enum: [1, 2]
                  description: 1=通过, 2=拒绝
                reason:
                  type: string
                  description: 拒绝原因（status=2时必填）
      responses:
        '200':
          description: 审核成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 审核认证成功
                  value:
                    code: 2023
                    data: null
                failure:
                  summary: 审核认证失败
                  value:
                    code: 2144
                    data: null
                forbidden:
                  summary: 权限不足
                  value:
                    code: 2145
                    data: null

  /user/merchant/certification/image:
    post:
      operationId: uploadCertificationImage
      tags:
        - 用户模块
      summary: 上传商家认证图片
      description: 上传商家认证相关图片（身份证、营业执照）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file, type]
              properties:
                file:
                  type: string
                  format: binary
                  description: 图片文件
                type:
                  type: string
                  enum: [id_front, id_back, business_license]
                  description: 图片类型
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 图片上传成功
                  value:
                    code: 2024
                    data:
                      url: "/files/images/certification/id_front_1234567890.jpg"
                failure:
                  summary: 图片上传失败
                  value:
                    code: 2146
                    data: null
                file_type_error:
                  summary: 不支持的文件类型
                  value:
                    code: 2147
                    data: null
                file_size_error:
                  summary: 文件大小超限
                  value:
                    code: 2148
                    data: null

  /user/verification-code/send:
    post:
      operationId: sendVerificationCode
      tags:
        - 用户模块
      summary: 发送验证码
      description: 发送验证码到用户的手机或邮箱，支持注册、重置密码、更换手机号等场景
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  type: string
                  description: 联系方式（手机号或邮箱）
                contactType:
                  type: string
                  description: 联系方式类型（phone/email）
                sceneType:
                  type: string
                  description: 使用场景（register/reset_password/change_phone）
      responses:
        '200':
          description: 发送结果
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 验证码已发送
                  value:
                    code: 2025
                    data: null
                failure:
                  summary: 发送验证码失败
                  value:
                    code: 2149
                    data: null
                rate_limit:
                  summary: 发送过于频繁，请稍后再试
                  value:
                    code: 2150
                    data: null
                expired:
                  summary: 验证码已过期
                  value:
                    code: 2151
                    data: null

  # ==================== 茶叶模块 ====================
  /tea/list:
    get:
      operationId: getTeaList
      tags:
        - 茶叶模块
      summary: 获取茶叶列表
      description: 分页获取茶叶商品列表，支持分类、关键词搜索和排序
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
            description: 页码
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
            description: 每页数量
        - name: categoryId
          in: query
          schema:
            type: integer
            description: 分类ID
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: shopId
          in: query
          schema:
            type: string
            description: 店铺ID
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [price, sales, rating]
            description: 排序字段
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
            description: 排序方向
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListResponse'
              examples:
                success:
                  summary: 获取茶叶列表成功
                  value:
                    code: 3000
                    data:
                      list:
                        - id: "1"
                          name: "商南绿茶"
                          categoryId: 1
                          shopId: "1"
                          price: 99.00
                          originalPrice: 128.00
                          stock: 100
                          sales: 50
                          description: "优质商南高山绿茶"
                          images: ["/images/tea1.jpg"]
                          status: 1
                      total: 100
                      page: 1
                      pageSize: 10
                failure:
                  summary: 获取茶叶列表失败
                  value:
                    code: 3100
                    data: null
    post:
      operationId: addTea
      tags:
        - 茶叶模块
      summary: 添加茶叶（商家/管理员）
      description: 商家或管理员添加新的茶叶商品
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
            example:
              name: "商南绿茶"
              categoryId: 1
              shopId: "1"
              price: 99.00
              originalPrice: 128.00
              stock: 100
              description: "优质商南高山绿茶"
              images: ["/images/tea1.jpg"]
              status: 1
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加茶叶成功
                  value:
                    code: 3001
                    data: null
                failure:
                  summary: 添加茶叶失败
                  value:
                    code: 3101
                    data: null

  /tea/{id}:
    get:
      operationId: getTeaDetail
      tags:
        - 茶叶模块
      summary: 获取茶叶详情
      description: 根据ID获取茶叶商品的详细信息
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaDetailResponse'
              examples:
                success:
                  summary: 获取茶叶详情成功
                  value:
                    code: 200
                    data:
                      id: "1"
                      name: "商南绿茶"
                      categoryId: 1
                      shopId: "1"
                      price: 99.00
                      originalPrice: 128.00
                      stock: 100
                      sales: 50
                      description: "优质商南高山绿茶"
                      images: ["/images/tea1.jpg"]
                      status: 1
                      isFavorited: false
                failure:
                  summary: 获取茶叶详情失败
                  value:
                    code: 3102
                    data: null
    put:
      operationId: updateTea
      tags:
        - 茶叶模块
      summary: 更新茶叶信息（商家/管理员）
      description: 商家或管理员更新茶叶商品信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新茶叶成功
                  value:
                    code: 3002
                    data: null
                failure:
                  summary: 更新茶叶失败
                  value:
                    code: 3103
                    data: null
    delete:
      operationId: deleteTea
      tags:
        - 茶叶模块
      summary: 删除茶叶（商家/管理员）
      description: 商家或管理员删除茶叶商品
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除茶叶成功
                  value:
                    code: 3003
                    data: null
                failure:
                  summary: 删除茶叶失败
                  value:
                    code: 3104
                    data: null

  /tea/categories:
    get:
      operationId: getTeaCategories
      tags:
        - 茶叶模块
      summary: 获取茶叶分类列表
      description: 获取所有茶叶分类，包括父子分类关系
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaCategoryListResponse'
              examples:
                success:
                  summary: 获取分类列表成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        name: "绿茶"
                        parentId: 0
                        sortOrder: 1
                        icon: "/icons/green-tea.png"
                      - id: 2
                        name: "红茶"
                        parentId: 0
                        sortOrder: 2
                        icon: "/icons/black-tea.png"
                failure:
                  summary: 获取分类列表失败
                  value:
                    code: 3106
                    data: null
    post:
      operationId: createTeaCategory
      tags:
        - 茶叶模块
      summary: 创建茶叶分类（管理员）
      description: 管理员创建新的茶叶分类
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaCategoryRequest'
            example:
              name: "白茶"
              parentId: 0
              sortOrder: 3
              icon: "/icons/white-tea.png"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建分类成功
                  value:
                    code: 3004
                    data: null
                failure:
                  summary: 创建分类失败
                  value:
                    code: 3107
                    data: null

  /tea/categories/{id}:
    put:
      operationId: updateTeaCategory
      tags:
        - 茶叶模块
      summary: 更新茶叶分类（管理员）
      description: 管理员更新茶叶分类信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaCategoryRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新分类成功
                  value:
                    code: 3005
                    data: null
                failure:
                  summary: 更新分类失败
                  value:
                    code: 3108
                    data: null
    delete:
      operationId: deleteTeaCategory
      tags:
        - 茶叶模块
      summary: 删除茶叶分类（管理员）
      description: 管理员删除茶叶分类
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除分类成功
                  value:
                    code: 3006
                    data: null
                failure:
                  summary: 删除分类失败
                  value:
                    code: 3109
                    data: null

  /tea/{teaId}/reviews:
    get:
      operationId: getTeaReviews
      tags:
        - 茶叶模块
      summary: 获取茶叶评价列表
      description: 获取指定茶叶的用户评价列表，支持分页
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
              examples:
                success:
                  summary: 获取评价列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          userId: "cy100002"
                          username: "茶友"
                          avatar: "/images/avatar.png"
                          rating: 5
                          content: "茶叶很好喝"
                          images: []
                          isLiked: false
                          createTime: "2025-01-01T12:00:00Z"
                      total: 10
                failure:
                  summary: 获取评价列表失败
                  value:
                    code: 3110
                    data: null

  /tea/{teaId}/reviews/stats:
    get:
      operationId: getTeaReviewStats
      tags:
        - 茶叶模块
      summary: 获取茶叶评价统计
      description: 获取茶叶的评价统计信息，包括平均评分和评分分布
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewStatsResponse'
              examples:
                success:
                  summary: 获取评价统计成功
                  value:
                    code: 200
                    data:
                      averageRating: 4.5
                      totalCount: 100
                      ratingDistribution:
                        "5": 60
                        "4": 25
                        "3": 10
                        "2": 3
                        "1": 2
                failure:
                  summary: 获取评价统计失败
                  value:
                    code: 3111
                    data: null

  /tea/reviews/{reviewId}/reply:
    post:
      operationId: replyTeaReview
      tags:
        - 茶叶模块
      summary: 商家回复评价
      description: 商家对用户评价进行回复
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [reply]
              properties:
                reply:
                  type: string
                  description: 回复内容
      responses:
        '200':
          description: 回复成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 回复评价成功
                  value:
                    code: 3008
                    data: null
                failure:
                  summary: 回复评价失败
                  value:
                    code: 3113
                    data: null

  /tea/{teaId}/specifications:
    get:
      operationId: getTeaSpecifications
      tags:
        - 茶叶模块
      summary: 获取茶叶规格列表
      description: 获取指定茶叶的所有规格选项
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpecificationListResponse'
              examples:
                success:
                  summary: 获取规格列表成功
                  value:
                    code: 200
                    data:
                      - id: "1"
                        teaId: "1"
                        specName: "250g装"
                        price: 99.00
                        stock: 100
                        isDefault: 1
                failure:
                  summary: 获取规格列表失败
                  value:
                    code: 3115
                    data: null
    post:
      operationId: addTeaSpecification
      tags:
        - 茶叶模块
      summary: 添加茶叶规格
      description: 为茶叶添加新的规格选项
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SpecificationRequest'
            example:
              specName: "500g装"
              price: 188.00
              stock: 50
              isDefault: 0
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加规格成功
                  value:
                    code: 3010
                    data: null
                failure:
                  summary: 添加规格失败
                  value:
                    code: 3116
                    data: null

  /tea/specifications/{specId}:
    put:
      operationId: updateTeaSpecification
      tags:
        - 茶叶模块
      summary: 更新茶叶规格
      description: 更新茶叶规格信息
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SpecificationRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新规格成功
                  value:
                    code: 3011
                    data: null
                failure:
                  summary: 更新规格失败
                  value:
                    code: 3117
                    data: null
    delete:
      operationId: deleteTeaSpecification
      tags:
        - 茶叶模块
      summary: 删除茶叶规格
      description: 删除指定的茶叶规格
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除规格成功
                  value:
                    code: 3012
                    data: null
                failure:
                  summary: 删除规格失败
                  value:
                    code: 3118
                    data: null

  /tea/specifications/{specId}/default:
    put:
      operationId: setDefaultSpecification
      tags:
        - 茶叶模块
      summary: 设置默认规格
      description: 将指定规格设置为默认规格
      security:
        - BearerAuth: []
      parameters:
        - name: specId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 设置默认规格成功
                  value:
                    code: 3013
                    data: null
                failure:
                  summary: 设置默认规格失败
                  value:
                    code: 3119
                    data: null

  /tea/{teaId}/images:
    post:
      operationId: uploadTeaImages
      tags:
        - 茶叶模块
      summary: 上传茶叶图片
      description: 为茶叶上传商品图片
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: 图片文件列表
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadImagesResponse'
              examples:
                success:
                  summary: 上传图片成功
                  value:
                    code: 3014
                    data:
                      - id: "img1"
                        url: "/uploads/tea/tea1_1.jpg"
                failure:
                  summary: 上传图片失败
                  value:
                    code: 3120
                    data: null
                file_type_error:
                  summary: 文件类型错误
                  value:
                    code: 3121
                    data: null
                file_size_error:
                  summary: 文件过大
                  value:
                    code: 3122
                    data: null

  /tea/images/{imageId}:
    delete:
      operationId: deleteTeaImage
      tags:
        - 茶叶模块
      summary: 删除茶叶图片
      description: 删除指定的茶叶图片
      security:
        - BearerAuth: []
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除图片成功
                  value:
                    code: 3015
                    data: null
                failure:
                  summary: 删除图片失败
                  value:
                    code: 3123
                    data: null

  /tea/images/{imageId}/main:
    put:
      operationId: setMainTeaImage
      tags:
        - 茶叶模块
      summary: 设置主图
      description: 将指定图片设置为茶叶主图
      security:
        - BearerAuth: []
      parameters:
        - name: imageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 设置主图成功
                  value:
                    code: 3016
                    data: null
                failure:
                  summary: 设置主图失败
                  value:
                    code: 3124
                    data: null

  /tea/images/order:
    put:
      operationId: updateTeaImageOrder
      tags:
        - 茶叶模块
      summary: 更新图片顺序
      description: 更新茶叶图片的显示顺序
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teaId:
                  type: string
                  description: 茶叶ID
                orders:
                  type: array
                  items:
                    type: object
                    properties:
                      imageId:
                        type: string
                      order:
                        type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新图片顺序成功
                  value:
                    code: 3017
                    data: null
                failure:
                  summary: 更新图片顺序失败
                  value:
                    code: 3125
                    data: null

  /tea/{teaId}/status:
    put:
      operationId: updateTeaStatus
      tags:
        - 茶叶模块
      summary: 更新茶叶状态（上架/下架）
      description: 商家或管理员更新茶叶的上架/下架状态
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_online:
                  summary: 茶叶上架成功
                  value:
                    code: 3018
                    data: null
                success_offline:
                  summary: 茶叶下架成功
                  value:
                    code: 3019
                    data: null
                failure_online:
                  summary: 茶叶上架失败
                  value:
                    code: 3126
                    data: null
                failure_offline:
                  summary: 茶叶下架失败
                  value:
                    code: 3127
                    data: null

  /tea/batch-status:
    put:
      operationId: batchUpdateTeaStatus
      tags:
        - 茶叶模块
      summary: 批量更新茶叶状态
      description: 批量更新多个茶叶的上架/下架状态
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teaIds:
                  type: array
                  items:
                    type: string
                  description: 茶叶ID列表
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_online:
                  summary: 批量上架成功
                  value:
                    code: 3020
                    data: null
                success_offline:
                  summary: 批量下架成功
                  value:
                    code: 3021
                    data: null
                failure_online:
                  summary: 批量上架失败
                  value:
                    code: 3128
                    data: null
                failure_offline:
                  summary: 批量下架失败
                  value:
                    code: 3129
                    data: null

  /tea/recommend:
    get:
      operationId: getRecommendTeas
      tags:
        - 茶叶模块
      summary: 获取推荐茶叶
      description: 获取推荐的茶叶列表，支持随机推荐、相似推荐、热门推荐
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [random, similar, popular]
            description: 推荐类型
        - name: teaId
          in: query
          schema:
            type: string
            description: 参考茶叶ID（相似推荐时使用）
        - name: count
          in: query
          schema:
            type: integer
            default: 6
            description: 推荐数量
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListSimpleResponse'
              examples:
                success:
                  summary: 获取推荐茶叶成功
                  value:
                    code: 200
                    data:
                      - id: "1"
                        name: "商南绿茶"
                        price: 99.00
                        images: ["/images/tea1.jpg"]
                failure:
                  summary: 获取推荐茶叶失败
                  value:
                    code: 3105
                    data: null

  # ==================== 店铺模块 ====================
  /shop/list:
    get:
      operationId: getShopList
      tags:
        - 店铺模块
      summary: 获取店铺列表
      description: 获取店铺列表，支持搜索、筛选和排序
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          schema:
            type: integer
            default: 10
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: rating
          in: query
          schema:
            type: number
            description: 最低评分筛选
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [rating, salesCount, followCount]
            description: 排序字段
        - name: sortOrder
          in: query
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopListResponse'
              examples:
                success:
                  summary: 获取店铺列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "1"
                          name: "商南茶庄"
                          logo: "/images/shop-logo.png"
                          description: "专营商南高山绿茶"
                          rating: 4.8
                          salesCount: 1000
                          followCount: 500
                          ownerId: "cy100003"
                      total: 50
                      page: 1
                      pageSize: 10
                failure:
                  summary: 获取店铺列表失败
                  value:
                    code: 4100
                    data: null

    post:
      operationId: createShop
      tags:
        - 店铺模块
      summary: 创建店铺
      description: 商家创建新店铺
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopRequest'
            example:
              name: "商南茶庄"
              logo: "/images/shop-logo.png"
              description: "专营商南高山绿茶"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建店铺成功
                  value:
                    code: 4000
                    data: null
                failure:
                  summary: 创建店铺失败
                  value:
                    code: 4101
                    data: null

  /shop/{id}:
    get:
      operationId: getShopDetail
      tags:
        - 店铺模块
      summary: 获取店铺详情
      description: 根据ID获取店铺详细信息
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetailResponse'
              examples:
                success:
                  summary: 获取店铺详情成功
                  value:
                    code: 200
                    data:
                      id: "1"
                      name: "商南茶庄"
                      logo: "/images/shop-logo.png"
                      description: "专营商南高山绿茶"
                      rating: 4.8
                      salesCount: 1000
                      followCount: 500
                      ownerId: "cy100003"
                      isFollowed: false
                failure:
                  summary: 获取店铺详情失败
                  value:
                    code: 4102
                    data: null
                not_found:
                  summary: 店铺不存在
                  value:
                    code: 4103
                    data: null

    put:
      operationId: updateShop
      tags:
        - 店铺模块
      summary: 更新店铺信息
      description: 商家更新店铺信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新店铺信息成功
                  value:
                    code: 4001
                    data: null
                failure:
                  summary: 更新店铺信息失败
                  value:
                    code: 4104
                    data: null

  /shop/my:
    get:
      operationId: getMyShop
      tags:
        - 店铺模块
      summary: 获取我的店铺信息
      description: 获取当前登录商家的店铺信息
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopDetailResponse'
              examples:
                success:
                  summary: 获取我的店铺成功
                  value:
                    code: 200
                    data:
                      id: "1"
                      name: "商南茶庄"
                      logo: "/images/shop-logo.png"
                      description: "专营商南高山绿茶"
                      rating: 4.8
                      salesCount: 1000
                      followCount: 500
                failure:
                  summary: 获取我的店铺失败
                  value:
                    code: 4105
                    data: null

  /shop/{shopId}/teas:
    get:
      operationId: getShopTeas
      tags:
        - 店铺模块
      summary: 获取店铺茶叶列表
      description: 获取指定店铺的茶叶商品列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeaListResponse'
              examples:
                success:
                  summary: 获取店铺茶叶成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "1"
                          name: "商南绿茶"
                          price: 99.00
                          status: 1
                      total: 20
                failure:
                  summary: 获取店铺茶叶失败
                  value:
                    code: 4107
                    data: null
    post:
      operationId: addShopTea
      tags:
        - 店铺模块
      summary: 添加茶叶到店铺
      description: 商家为店铺添加新的茶叶商品
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加店铺茶叶成功
                  value:
                    code: 4002
                    data: null
                failure:
                  summary: 添加店铺茶叶失败
                  value:
                    code: 4108
                    data: null

  /shop/teas/{teaId}:
    put:
      operationId: updateShopTea
      tags:
        - 店铺模块
      summary: 更新店铺茶叶
      description: 商家更新店铺中的茶叶信息
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeaRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新店铺茶叶成功
                  value:
                    code: 4003
                    data: null
                failure:
                  summary: 更新店铺茶叶失败
                  value:
                    code: 4109
                    data: null
    delete:
      operationId: deleteShopTea
      tags:
        - 店铺模块
      summary: 删除店铺茶叶
      description: 商家删除店铺中的茶叶
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除店铺茶叶成功
                  value:
                    code: 4004
                    data: null
                failure:
                  summary: 删除店铺茶叶失败
                  value:
                    code: 4110
                    data: null

  /shop/teas/{teaId}/status:
    put:
      operationId: updateShopTeaStatus
      tags:
        - 店铺模块
      summary: 茶叶上下架
      description: 商家更新店铺茶叶的上下架状态
      security:
        - BearerAuth: []
      parameters:
        - name: teaId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: integer
                  enum: [0, 1]
                  description: 0=下架, 1=上架
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_online:
                  summary: 茶叶上架成功
                  value:
                    code: 4005
                    data: null
                success_offline:
                  summary: 茶叶下架成功
                  value:
                    code: 4006
                    data: null
                failure_online:
                  summary: 茶叶上架失败
                  value:
                    code: 4111
                    data: null
                failure_offline:
                  summary: 茶叶下架失败
                  value:
                    code: 4112
                    data: null

  /shop/{shopId}/statistics:
    get:
      operationId: getShopStatistics
      tags:
        - 店铺模块
      summary: 获取店铺统计数据
      description: 获取店铺的销售统计数据
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
            description: 开始日期
        - name: endDate
          in: query
          schema:
            type: string
            format: date
            description: 结束日期
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShopStatisticsResponse'
              examples:
                success:
                  summary: 获取店铺统计成功
                  value:
                    code: 200
                    data:
                      totalSales: 50000.00
                      orderCount: 200
                      productCount: 30
                      followCount: 500
                failure:
                  summary: 获取店铺统计失败
                  value:
                    code: 4106
                    data: null

  /shop/{shopId}/logo:
    post:
      operationId: uploadShopLogo
      tags:
        - 店铺模块
      summary: 上传店铺Logo
      description: 商家上传店铺Logo图片
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Logo图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadResponse'
              examples:
                success:
                  summary: 上传Logo成功
                  value:
                    code: 4007
                    data:
                      url: "/uploads/shop/logo_1.jpg"
                failure:
                  summary: 上传Logo失败
                  value:
                    code: 4113
                    data: null
                file_type_error:
                  summary: 文件类型错误
                  value:
                    code: 4114
                    data: null
                file_size_error:
                  summary: 文件过大
                  value:
                    code: 4115
                    data: null

  /shop/{shopId}/banners:
    get:
      operationId: getShopBanners
      tags:
        - 店铺模块
      summary: 获取店铺Banner列表
      description: 获取店铺的轮播Banner列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BannerListResponse'
              examples:
                success:
                  summary: 获取Banner列表成功
                  value:
                    code: 200
                    data:
                      - id: "1"
                        imageUrl: "/images/banner1.jpg"
                        title: "新品上市"
                        linkUrl: "/tea/1"
                        sortOrder: 1
                failure:
                  summary: 获取Banner列表失败
                  value:
                    code: 4116
                    data: null
    post:
      operationId: uploadShopBanner
      tags:
        - 店铺模块
      summary: 上传店铺Banner
      description: 商家上传店铺Banner图片
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: Banner图片
                title:
                  type: string
                  description: Banner标题
                linkUrl:
                  type: string
                  description: 跳转链接
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 上传Banner成功
                  value:
                    code: 4008
                    data: null
                failure:
                  summary: 上传Banner失败
                  value:
                    code: 4117
                    data: null
                file_type_error:
                  summary: 文件类型错误
                  value:
                    code: 4118
                    data: null
                file_size_error:
                  summary: 文件过大
                  value:
                    code: 4119
                    data: null

  /shop/banners/{bannerId}:
    put:
      operationId: updateShopBanner
      tags:
        - 店铺模块
      summary: 更新店铺Banner
      description: 商家更新Banner信息
      security:
        - BearerAuth: []
      parameters:
        - name: bannerId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                linkUrl:
                  type: string
                sortOrder:
                  type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新Banner成功
                  value:
                    code: 4009
                    data: null
                failure:
                  summary: 更新Banner失败
                  value:
                    code: 4120
                    data: null
    delete:
      operationId: deleteShopBanner
      tags:
        - 店铺模块
      summary: 删除店铺Banner
      description: 商家删除Banner
      security:
        - BearerAuth: []
      parameters:
        - name: bannerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除Banner成功
                  value:
                    code: 4010
                    data: null
                failure:
                  summary: 删除Banner失败
                  value:
                    code: 4121
                    data: null

  /shop/banners/order:
    put:
      operationId: updateBannerOrder
      tags:
        - 店铺模块
      summary: 更新Banner顺序
      description: 商家更新Banner的显示顺序
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                orders:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      order:
                        type: integer
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新Banner排序成功
                  value:
                    code: 4011
                    data: null
                failure:
                  summary: 更新Banner排序失败
                  value:
                    code: 4122
                    data: null

  /shop/{shopId}/announcements:
    get:
      operationId: getShopAnnouncements
      tags:
        - 店铺模块
      summary: 获取店铺公告列表
      description: 获取店铺的公告列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementListResponse'
              examples:
                success:
                  summary: 获取公告列表成功
                  value:
                    code: 200
                    data:
                      - id: "1"
                        title: "春茶上市"
                        content: "2025年春茶已上市"
                        isTop: true
                        createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 获取公告列表失败
                  value:
                    code: 4123
                    data: null

    post:
      operationId: createShopAnnouncement
      tags:
        - 店铺模块
      summary: 创建店铺公告
      description: 商家创建店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnnouncementRequest'
            example:
              title: "春茶上市"
              content: "2025年春茶已上市"
              isTop: true
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建公告成功
                  value:
                    code: 4012
                    data: null
                failure:
                  summary: 创建公告失败
                  value:
                    code: 4124
                    data: null

  /shop/announcements/{announcementId}:
    put:
      operationId: updateShopAnnouncement
      tags:
        - 店铺模块
      summary: 更新店铺公告
      description: 商家更新店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: announcementId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnnouncementRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新公告成功
                  value:
                    code: 4013
                    data: null
                failure:
                  summary: 更新公告失败
                  value:
                    code: 4125
                    data: null

    delete:
      operationId: deleteShopAnnouncement
      tags:
        - 店铺模块
      summary: 删除店铺公告
      description: 商家删除店铺公告
      security:
        - BearerAuth: []
      parameters:
        - name: announcementId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除公告成功
                  value:
                    code: 4014
                    data: null
                failure:
                  summary: 删除公告失败
                  value:
                    code: 4126
                    data: null

  /shop/{shopId}/reviews:
    get:
      operationId: getShopReviews
      tags:
        - 店铺模块
      summary: 获取店铺评价列表
      description: 获取店铺的用户评价列表
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
              examples:
                success:
                  summary: 获取店铺评价成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          userId: "cy100002"
                          username: "茶友"
                          rating: 5
                          content: "店铺服务很好"
                          createTime: "2025-01-01T12:00:00Z"
                      total: 50
                failure:
                  summary: 获取店铺评价失败
                  value:
                    code: 4130
                    data: null

    post:
      operationId: submitShopReview
      tags:
        - 店铺模块
      summary: 提交店铺评价
      description: 提交对店铺的评价
      security:
        - BearerAuth: []
      parameters:
        - name: shopId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                content:
                  type: string
                images:
                  type: array
                  items:
                    type: string
            example:
              rating: 5
              content: "店铺服务很好"
              images: []
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 提交店铺评价成功
                  value:
                    code: 4017
                    data: null
                failure_not_purchased:
                  summary: 未购买过该店铺商品
                  value:
                    code: 4131
                    data: null
                failure_submit:
                  summary: 提交评价失败
                  value:
                    code: 4132
                    data: null

  # ==================== 订单模块 ====================
  /order/create:
    post:
      operationId: createOrder
      tags:
        - 订单模块
      summary: 创建订单
      description: 用户创建新的购买订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
            example:
              items:
                - teaId: "1"
                  specId: "1"
                  quantity: 2
              addressId: "1"
              remark: "请尽快发货"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
              examples:
                success:
                  summary: 订单创建成功
                  value:
                    code: 5005
                    data:
                      orderId: "order001"
                      totalPrice: 199.00
                      status: 0
                failure:
                  summary: 创建订单失败
                  value:
                    code: 5110
                    data: null
                failure_stock:
                  summary: 商品库存不足
                  value:
                    code: 5111
                    data: null
                failure_unavailable:
                  summary: 商品已下架或不可用
                  value:
                    code: 5112
                    data: null

  /order/list:
    get:
      operationId: getOrderList
      tags:
        - 订单模块
      summary: 获取订单列表
      description: 获取当前用户的订单列表，支持状态筛选
      security:
        - BearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2, 3, 4]
            description: 0=待付款, 1=待发货, 2=待收货, 3=已完成, 4=已取消
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "order001"
                          status: 1
                          totalPrice: 199.00
                          createTime: "2024-01-15T10:30:00Z"
                      total: 20
                failure:
                  summary: 获取失败
                  value:
                    code: 5113
                    data: null

  /order/{id}:
    get:
      operationId: getOrderDetail
      tags:
        - 订单模块
      summary: 获取订单详情
      description: 根据ID获取订单详细信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      id: "order001"
                      userId: "cy100002"
                      status: 1
                      totalPrice: 199.00
                      items:
                        - teaId: "1"
                          teaName: "商南绿茶"
                          quantity: 2
                          price: 99.00
                      address:
                        receiverName: "张三"
                        receiverPhone: "13800138000"
                        detailAddress: "陕西省商洛市商南县茶城路1号"
                      createTime: "2024-01-15T10:30:00Z"
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5114
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5115
                    data: null
                failure:
                  summary: 获取失败
                  value:
                    code: 5116
                    data: null

  /order/pay:
    post:
      operationId: payOrder
      tags:
        - 订单模块
      summary: 支付订单
      description: 用户支付订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, paymentMethod]
              properties:
                orderId:
                  type: string
                paymentMethod:
                  type: string
                  enum: [alipay, wechat, balance]
                  description: 支付方式
            example:
              orderId: "order001"
              paymentMethod: "alipay"
      responses:
        '200':
          description: 支付成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_paid:
                  summary: 订单已支付
                  value:
                    code: 5006
                    data: null
                success:
                  summary: 支付成功
                  value:
                    code: 5007
                    data: null
                failure:
                  summary: 支付失败
                  value:
                    code: 5117
                    data: null
                failure_cancelled:
                  summary: 支付已取消
                  value:
                    code: 5118
                    data: null
                failure_timeout:
                  summary: 支付超时
                  value:
                    code: 5119
                    data: null
                failure_balance:
                  summary: 余额不足
                  value:
                    code: 5120
                    data: null

  /order/cancel:
    post:
      operationId: cancelOrder
      tags:
        - 订单模块
      summary: 取消订单
      description: 用户取消待付款订单
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
            example:
              id: "order001"
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 取消成功
                  value:
                    code: 5008
                    data: null
                failure:
                  summary: 取消失败
                  value:
                    code: 5121
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5122
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5123
                    data: null

  /order/confirm:
    post:
      operationId: confirmOrder
      tags:
        - 订单模块
      summary: 确认收货
      description: 用户确认收货
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: string
            example:
              id: "order001"
      responses:
        '200':
          description: 确认成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 确认成功
                  value:
                    code: 5009
                    data: null
                failure:
                  summary: 确认失败
                  value:
                    code: 5124
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5125
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5126
                    data: null

  /order/{id}/ship:
    post:
      operationId: shipOrder
      tags:
        - 订单模块
      summary: 发货
      description: 商家发货并填写物流信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: logisticsCompany
          in: query
          required: true
          schema:
            type: string
        - name: logisticsNumber
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 发货成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 发货成功
                  value:
                    code: 5014
                    data: null
                failure:
                  summary: 发货失败
                  value:
                    code: 5135
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5136
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5137
                    data: null

  /order/review:
    post:
      operationId: reviewOrder
      tags:
        - 订单模块
      summary: 评价订单
      description: 用户对订单进行评价
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, rating, content]
              properties:
                orderId:
                  type: string
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                content:
                  type: string
                images:
                  type: array
                  items:
                    type: string
            example:
              orderId: "order001"
              rating: 5
              content: "商品很好"
              images: []
      responses:
        '200':
          description: 评价成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 评价成功
                  value:
                    code: 5010
                    data: null
                failure:
                  summary: 评价失败
                  value:
                    code: 5127
                    data: null

  /order/batch-ship:
    post:
      operationId: batchShipOrder
      tags:
        - 订单模块
      summary: 批量发货
      description: 商家批量发货
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderIds, logisticsCompany, logisticsNumber]
              properties:
                orderIds:
                  type: array
                  items:
                    type: string
                logisticsCompany:
                  type: string
                logisticsNumber:
                  type: string
            example:
              orderIds: ["order001", "order002"]
              logisticsCompany: "顺丰速运"
              logisticsNumber: "SF1234567890"
      responses:
        '200':
          description: 批量发货成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 批量发货成功
                  value:
                    code: 5015
                    data: null
                failure:
                  summary: 批量发货失败
                  value:
                    code: 5138
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5139
                    data: null

  /order/refund:
    post:
      operationId: refundOrderCompat
      tags:
        - 订单模块
      summary: 申请退款（兼容旧接口）
      description: 用户申请订单退款（兼容旧接口）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, reason]
              properties:
                orderId:
                  type: string
                reason:
                  type: string
            example:
              orderId: "order001"
              reason: "商品质量问题"
      responses:
        '200':
          description: 申请成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 申请成功
                  value:
                    code: 5011
                    data: null
                failure:
                  summary: 申请失败
                  value:
                    code: 5128
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5129
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5130
                    data: null

  /order/{id}/refund:
    get:
      operationId: getRefundDetail
      tags:
        - 订单模块
      summary: 获取退款详情
      description: 获取订单退款详情
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      id: 1
                      orderId: "1"
                      reason: "商品质量问题"
                      status: 0
                      createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 获取失败
                  value:
                    code: 5133
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5134
                    data: null

  /order/{id}/refund/process:
    post:
      operationId: processRefund
      tags:
        - 订单模块
      summary: 审批退款
      description: 商家审批退款申请
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [approve]
              properties:
                approve:
                  type: boolean
                reason:
                  type: string
            example:
              approve: true
              reason: ""
      responses:
        '200':
          description: 审批成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_approve:
                  summary: 同意退款
                  value:
                    code: 5012
                    data: null
                success_reject:
                  summary: 拒绝退款
                  value:
                    code: 5013
                    data: null
                failure:
                  summary: 处理失败
                  value:
                    code: 5131
                    data: null
                failure_permission:
                  summary: 无权限
                  value:
                    code: 5132
                    data: null

  /order/{id}/logistics:
    get:
      operationId: getOrderExpress
      tags:
        - 订单模块
      summary: 查询物流信息
      description: 查询订单的物流跟踪信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExpressInfoResponse'
              examples:
                success:
                  summary: 查询成功
                  value:
                    code: 200
                    data:
                      expressCompany: "顺丰速运"
                      expressNumber: "SF1234567890"
                      traces:
                        - time: "2025-01-15T10:00:00Z"
                          status: "已发货"
                        - time: "2025-01-15T14:00:00Z"
                          status: "运输中"
                failure:
                  summary: 获取失败
                  value:
                    code: 5140
                    data: null
                failure_not_found:
                  summary: 订单不存在
                  value:
                    code: 5141
                    data: null

  /order/cart:
    get:
      operationId: getCart
      tags:
        - 订单模块
      summary: 获取购物车列表
      description: 获取当前用户的购物车商品列表
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        teaId: "1"
                        teaName: "商南绿茶"
                        teaImage: "/images/tea1.jpg"
                        specificationId: "1"
                        specName: "250g装"
                        price: 99.00
                        quantity: 2
                failure:
                  summary: 获取失败
                  value:
                    code: 5100
                    data: null

  /order/cart/add:
    post:
      operationId: addToCart
      tags:
        - 订单模块
      summary: 添加商品到购物车
      description: 将商品添加到购物车
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [teaId, quantity]
              properties:
                teaId:
                  type: string
                  description: 茶叶ID
                quantity:
                  type: integer
                  minimum: 1
                  description: 数量
                specificationId:
                  type: string
                  description: 规格ID
            example:
              teaId: "1"
              quantity: 2
              specificationId: "1"
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加成功
                  value:
                    code: 5000
                    data: null
                failure_add:
                  summary: 添加失败
                  value:
                    code: 5101
                    data: null
                failure_not_found:
                  summary: 商品不存在
                  value:
                    code: 5102
                    data: null
                failure_stock:
                  summary: 库存不足
                  value:
                    code: 5103
                    data: null
                failure_limit:
                  summary: 数量上限
                  value:
                    code: 5104
                    data: null

  /order/cart/update:
    put:
      operationId: updateCartItem
      tags:
        - 订单模块
      summary: 更新购物车商品
      description: 更新购物车中商品的数量或规格
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [id]
              properties:
                id:
                  type: integer
                quantity:
                  type: integer
                specificationId:
                  type: string
            example:
              id: 1
              quantity: 3
              specificationId: "1"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_quantity:
                  summary: 更新数量成功
                  value:
                    code: 5001
                    data: null
                success_spec:
                  summary: 更新规格成功
                  value:
                    code: 5002
                    data: null
                failure:
                  summary: 更新失败
                  value:
                    code: 5105
                    data: null
                failure_stock:
                  summary: 库存不足
                  value:
                    code: 5106
                    data: null
                failure_limit:
                  summary: 数量上限
                  value:
                    code: 5107
                    data: null

  /order/cart/remove:
    delete:
      operationId: removeFromCart
      tags:
        - 订单模块
      summary: 移除购物车商品
      description: 从购物车中删除商品
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 移除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 移除成功
                  value:
                    code: 5003
                    data: null
                failure:
                  summary: 移除失败
                  value:
                    code: 5108
                    data: null

  /order/cart/clear:
    delete:
      operationId: clearCart
      tags:
        - 订单模块
      summary: 清空购物车
      description: 清空购物车中的所有商品
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 清空成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 清空成功
                  value:
                    code: 5004
                    data: null
                failure:
                  summary: 清空失败
                  value:
                    code: 5109
                    data: null

  /order/export:
    get:
      operationId: exportOrders
      tags:
        - 订单模块
      summary: 导出订单数据
      description: 导出订单数据为Excel或CSV格式
      security:
        - BearerAuth: []
      parameters:
        - name: format
          in: query
          schema:
            type: string
            enum: [excel, csv]
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
        - name: status
          in: query
          schema:
            type: integer
            enum: [0, 1, 2, 3, 4, 5]
        - name: shopId
          in: query
          schema:
            type: string
      responses:
        '200':
          description: 导出成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 导出成功
                  value:
                    code: 200
                    data: null
                failure:
                  summary: 导出失败
                  value:
                    code: 5143
                    data: null
            application/octet-stream:
              schema:
                type: string
                format: binary

  /order/statistics:
    get:
      operationId: getOrderStatistics
      tags:
        - 订单模块
      summary: 获取订单统计数据
      description: 获取订单统计数据
      security:
        - BearerAuth: []
      parameters:
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
        - name: shopId
          in: query
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderStatisticsResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      totalOrders: 500
                      totalAmount: 50000.00
                      statusDistribution:
                        "0": 10
                        "1": 20
                        "2": 30
                        "3": 400
                        "4": 30
                        "5": 10
                      trend:
                        - date: "2025-01-01"
                          orders: 10
                          amount: 1000.00
                failure:
                  summary: 获取失败
                  value:
                    code: 5142
                    data: null

  /order/review/image:
    post:
      operationId: uploadReviewImage
      tags:
        - 订单模块
      summary: 上传订单评价图片
      description: 上传订单评价图片
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
                  description: 图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 图片上传成功
                  value:
                    code: 5016
                    data:
                      url: "/files/images/review/review_1234567890.jpg"
                failure:
                  summary: 图片上传失败
                  value:
                    code: 5144
                    data: null
                file_type_error:
                  summary: 不支持的文件类型
                  value:
                    code: 5145
                    data: null
                file_size_error:
                  summary: 文件大小超限
                  value:
                    code: 5146
                    data: null

  # ==================== 论坛模块 ====================
  /forum/home:
    get:
      operationId: getForumHome
      tags:
        - 论坛模块
      summary: 获取论坛首页数据
      description: 获取论坛首页的数据（Banner、热门帖子、最新文章等）
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取成功
                  value:
                    code: 200
                    data:
                      banners:
                        - id: 1
                          imageUrl: "/images/forum-banner1.jpg"
                          title: "茶文化专题"
                          linkUrl: "/forum/articles/1"
                      hotPosts:
                        - id: 1
                          title: "商南茶文化分享"
                          viewCount: 1000
                      latestArticles:
                        - id: 1
                          title: "茶道入门"
                          summary: "茶道基础知识"
                failure:
                  summary: 获取失败
                  value:
                    code: 6100
                    data: null

    put:
      operationId: updateForumHome
      tags:
        - 论坛模块
      summary: 更新论坛首页数据（管理员）
      description: 管理员更新论坛首页数据
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
            example: {}
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 区块内容已保存
                  value:
                    code: 6000
                    data: null
                failure:
                  summary: 保存失败
                  value:
                    code: 6101
                    data: null

  /forum/banners:
    get:
      operationId: getForumBanners
      tags:
        - 论坛模块
      summary: 获取论坛Banner列表
      description: 获取论坛Banner列表
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        imageUrl: "/images/forum-banner1.jpg"
                        title: "茶文化专题"
                        linkUrl: "/forum/articles/1"
                        sortOrder: 1
                failure:
                  summary: 获取轮播图数据失败
                  value:
                    code: 6102
                    data: null

    post:
      operationId: createForumBanner
      tags:
        - 论坛模块
      summary: 上传论坛Banner（管理员）
      description: 管理员上传论坛Banner
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                title:
                  type: string
                linkUrl:
                  type: string
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: Banner添加成功
                  value:
                    code: 6001
                    data: null
                failure:
                  summary: 保存失败
                  value:
                    code: 6103
                    data: null
                failure_type:
                  summary: 不支持的文件类型
                  value:
                    code: 6104
                    data: null
                failure_size:
                  summary: 文件大小超限
                  value:
                    code: 6105
                    data: null

  /forum/banners/{id}:
    put:
      operationId: updateForumBanner
      tags:
        - 论坛模块
      summary: 更新论坛Banner（管理员）
      description: 管理员更新论坛Banner信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                linkUrl:
                  type: string
                sortOrder:
                  type: integer
            example:
              title: "茶文化专题"
              linkUrl: "/forum/articles/1"
              sortOrder: 1
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: Banner更新成功
                  value:
                    code: 6002
                    data: null
                failure:
                  summary: 保存失败
                  value:
                    code: 6106
                    data: null

    delete:
      operationId: deleteForumBanner
      tags:
        - 论坛模块
      summary: 删除论坛Banner（管理员）
      description: 管理员删除论坛Banner
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除成功
                  value:
                    code: 6003
                    data: null
                failure:
                  summary: 删除失败
                  value:
                    code: 6107
                    data: null

  /forum/banners/order:
    put:
      operationId: updateBannerOrder
      tags:
        - 论坛模块
      summary: 更新Banner顺序（管理员）
      description: 管理员更新Banner显示顺序
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bannerIds:
                  type: array
                  items:
                    type: integer
            example:
              bannerIds: [1, 2, 3]
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 排序更新成功
                  value:
                    code: 6004
                    data: null
                failure:
                  summary: 排序更新失败
                  value:
                    code: 6108
                    data: null

  /forum/topics:
    get:
      operationId: getForumTopics
      tags:
        - 论坛模块
      summary: 获取版块列表
      description: 获取论坛版块列表
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      - id: 1
                        name: "茶文化"
                        description: "茶文化交流"
                        icon: "/icons/culture.png"
                        sortOrder: 1
                failure:
                  summary: 获取版块列表失败
                  value:
                    code: 6114
                    data: null

    post:
      operationId: createForumTopic
      tags:
        - 论坛模块
      summary: 创建版块（管理员）
      description: 管理员创建新版块
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name]
              properties:
                name:
                  type: string
                description:
                  type: string
                icon:
                  type: string
                sortOrder:
                  type: integer
            example:
              name: "茶文化"
              description: "茶文化交流"
              icon: "/icons/culture.png"
              sortOrder: 1
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 添加版块成功
                  value:
                    code: 6008
                    data: null
                failure:
                  summary: 添加版块失败
                  value:
                    code: 6116
                    data: null

  /forum/topics/{id}:
    get:
      operationId: getForumTopic
      tags:
        - 论坛模块
      summary: 获取版块详情
      description: 根据版块ID获取版块详细信息
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      id: 1
                      name: "茶文化"
                      description: "茶文化交流"
                      icon: "/icons/culture.png"
                      postCount: 100
                failure:
                  summary: 获取版块详情失败
                  value:
                    code: 6115
                    data: null

    put:
      operationId: updateForumTopic
      tags:
        - 论坛模块
      summary: 更新版块（管理员）
      description: 管理员更新版块信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                icon:
                  type: string
            example:
              name: "茶文化"
              description: "茶文化交流"
              icon: "/icons/culture.png"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 更新版块成功
                  value:
                    code: 6009
                    data: null
                failure:
                  summary: 更新版块失败
                  value:
                    code: 6117
                    data: null

    delete:
      operationId: deleteForumTopic
      tags:
        - 论坛模块
      summary: 删除版块（管理员）
      description: 管理员删除版块
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除版块成功
                  value:
                    code: 6010
                    data: null
                failure:
                  summary: 删除版块失败
                  value:
                    code: 6118
                    data: null

  /forum/posts:
    get:
      operationId: getForumPosts
      tags:
        - 论坛模块
      summary: 获取帖子列表
      description: 获取论坛帖子列表，支持分类筛选和排序
      parameters:
        - name: categoryId
          in: query
          schema:
            type: string
            description: 分类ID
        - name: keyword
          in: query
          schema:
            type: string
            description: 搜索关键词
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [latest, hot, recommend]
            default: latest
            description: 排序方式
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "1"
                          title: "茶文化分享"
                          content: "今天来聊聊商南茶的历史..."
                          authorId: "cy100002"
                          authorName: "茶友"
                          categoryId: "cat001"
                          viewCount: 100
                          likeCount: 10
                          commentCount: 5
                          isLiked: false
                          isFavorited: false
                          createTime: "2025-01-15T10:30:00Z"
                      total: 50
                failure:
                  summary: 获取帖子列表失败
                  value:
                    code: 6119
                    data: null

    post:
      operationId: createForumPost
      tags:
        - 论坛模块
      summary: 发布帖子
      description: 用户发布新的论坛帖子
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
            example:
              title: "茶文化分享"
              content: "今天来聊聊商南茶的历史..."
              categoryId: "cat001"
              images: ["/images/post1.jpg"]
      responses:
        '200':
          description: 发布成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePostResponse'
              examples:
                success:
                  summary: 帖子发布成功
                  value:
                    code: 6011
                    data:
                      postId: "post001"
                      title: "茶文化分享"
                      createTime: "2024-01-15T10:30:00Z"
                failure:
                  summary: 帖子发布失败
                  value:
                    code: 6120
                    data: null

  /forum/posts/image:
    post:
      operationId: uploadPostImage
      tags:
        - 论坛模块
      summary: 上传帖子图片
      description: 用户发帖时上传图片（封面图或内容图）
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: 图片文件
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                    properties:
                      url:
                        type: string
                        description: 图片访问URL
                      path:
                        type: string
                        description: 图片存储路径
              examples:
                success:
                  summary: 图片上传成功
                  value:
                    code: 6028
                    data:
                      url: "http://localhost:8080/files/images/posts/2024/01/18/20240118120530_abc123.jpg"
                      path: "files/images/posts/2024/01/18/20240118120530_abc123.jpg"
                failure1:
                  summary: 图片上传失败
                  value:
                    code: 6140
                    data: null
                failure2:
                  summary: 不支持的文件类型
                  value:
                    code: 6141
                    data: null
                failure3:
                  summary: 文件大小超限
                  value:
                    code: 6142
                    data: null

  /forum/posts/pending:
    get:
      operationId: getPendingPosts
      tags:
        - 论坛模块
      summary: 获取待审核帖子列表（管理员）
      description: 管理员获取待审核的帖子列表
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: pageSize
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          title: "待审核帖子"
                          authorName: "茶友"
                          status: 0
                          createTime: "2025-01-01T12:00:00Z"
                      total: 10
                failure:
                  summary: 获取待审核帖子列表失败
                  value:
                    code: 6121
                    data: null

  /forum/posts/{id}:
    get:
      operationId: getForumPostDetail
      tags:
        - 论坛模块
      summary: 获取帖子详情
      description: 根据ID获取帖子详细内容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      id: "1"
                      title: "茶文化分享"
                      content: "今天来聊聊商南茶的历史..."
                      authorId: "cy100002"
                      authorName: "茶友"
                      authorAvatar: "/images/avatar.png"
                      categoryId: "cat001"
                      images: ["/images/post1.jpg"]
                      viewCount: 100
                      likeCount: 10
                      commentCount: 5
                      isLiked: false
                      isFavorited: false
                      createTime: "2025-01-15T10:30:00Z"
                failure:
                  summary: 获取帖子详情失败
                  value:
                    code: 6122
                    data: null

    put:
      operationId: updateForumPost
      tags:
        - 论坛模块
      summary: 更新帖子
      description: 作者更新自己的帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePostRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 帖子更新成功
                  value:
                    code: 6012
                    data: null
                failure:
                  summary: 帖子更新失败
                  value:
                    code: 6123
                    data: null
    delete:
      operationId: deleteForumPost
      tags:
        - 论坛模块
      summary: 删除帖子
      description: 作者或管理员删除帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 帖子删除成功
                  value:
                    code: 6013
                    data: null
                failure:
                  summary: 帖子删除失败
                  value:
                    code: 6124
                    data: null

  /forum/posts/{id}/replies:
    get:
      operationId: getPostComments
      tags:
        - 论坛模块
      summary: 获取帖子回复列表
      description: 获取帖子的回复列表，支持分页
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "1"
                          postId: "1"
                          userId: "cy100002"
                          username: "茶友"
                          avatar: "/images/avatar.png"
                          content: "写得很好"
                          likeCount: 5
                          isLiked: false
                          createTime: "2025-01-15T11:00:00Z"
                      total: 20
                failure:
                  summary: 获取回复列表失败
                  value:
                    code: 6129
                    data: null
    post:
      operationId: addPostComment
      tags:
        - 论坛模块
      summary: 创建回复
      description: 对帖子进行回复
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [content]
              properties:
                content:
                  type: string
                  description: 评论内容
                  minLength: 1
                  maxLength: 500
                parentId:
                  type: string
                  description: 父评论ID（回复评论时使用）
      responses:
        '200':
          description: 发表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 回复发布成功
                  value:
                    code: 6018
                    data: null
                failure:
                  summary: 回复发布失败
                  value:
                    code: 6130
                    data: null

  /forum/replies/{id}:
    delete:
      operationId: deleteComment
      tags:
        - 论坛模块
      summary: 删除评论
      description: 作者或管理员删除评论
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 评论已删除
                  value:
                    code: 6019
                    data: null
                failure:
                  summary: 评论删除失败
                  value:
                    code: 6131
                    data: null

  /forum/posts/{id}/approve:
    post:
      operationId: approvePost
      tags:
        - 论坛模块
      summary: 审核通过帖子（管理员）
      description: 管理员审核通过帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 审核成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 帖子审核通过
                  value:
                    code: 6022
                    data: null
                failure:
                  summary: 审核通过失败
                  value:
                    code: 6134
                    data: null

  /forum/posts/{id}/reject:
    post:
      operationId: rejectPost
      tags:
        - 论坛模块
      summary: 审核拒绝帖子（管理员）
      description: 管理员审核拒绝帖子
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [reason]
              properties:
                reason:
                  type: string
            example:
              reason: "内容不符合规范"
      responses:
        '200':
          description: 审核成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 帖子审核拒绝
                  value:
                    code: 6023
                    data: null
                failure:
                  summary: 审核拒绝失败
                  value:
                    code: 6135
                    data: null

  /forum/posts/{id}/sticky:
    put:
      operationId: stickyPost
      tags:
        - 论坛模块
      summary: 设置帖子置顶（管理员）
      description: 管理员设置帖子置顶状态
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: isSticky
          in: query
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_sticky:
                  summary: 置顶成功
                  value:
                    code: 6024
                    data: null
                success_unsticky:
                  summary: 取消置顶成功
                  value:
                    code: 6025
                    data: null
                failure_sticky:
                  summary: 置顶失败
                  value:
                    code: 6136
                    data: null
                failure_unsticky:
                  summary: 取消置顶失败
                  value:
                    code: 6137
                    data: null

  /forum/posts/{id}/essence:
    put:
      operationId: essencePost
      tags:
        - 论坛模块
      summary: 设置帖子精华（管理员）
      description: 管理员设置帖子精华状态
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: isEssence
          in: query
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success_essence:
                  summary: 加精成功
                  value:
                    code: 6026
                    data: null
                success_unessence:
                  summary: 取消加精成功
                  value:
                    code: 6027
                    data: null
                failure_essence:
                  summary: 加精失败
                  value:
                    code: 6138
                    data: null
                failure_unessence:
                  summary: 取消加精失败
                  value:
                    code: 6139
                    data: null

  /forum/articles:
    get:
      operationId: getArticles
      tags:
        - 论坛模块
      summary: 获取文章列表
      description: 获取茶文化文章列表
      parameters:
        - name: categoryId
          in: query
          schema:
            type: string
        - name: keyword
          in: query
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleListResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: "1"
                          title: "商南茶的历史"
                          summary: "商南茶有着悠久的历史..."
                          coverImage: "/images/article1.jpg"
                          authorId: "cy100001"
                          authorName: "管理员"
                          viewCount: 500
                          createTime: "2025-01-01T00:00:00Z"
                      total: 20
                failure:
                  summary: 获取文章列表失败
                  value:
                    code: 6109
                    data: null
    post:
      operationId: createArticle
      tags:
        - 论坛模块
      summary: 创建文章（管理员）
      description: 管理员创建茶文化文章
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleRequest'
            example:
              title: "商南茶的历史"
              content: "商南茶有着悠久的历史..."
              summary: "商南茶历史简介"
              coverImage: "/images/article1.jpg"
              categoryId: "cat001"
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 文章创建成功
                  value:
                    code: 6005
                    data: null
                failure:
                  summary: 文章创建失败
                  value:
                    code: 6111
                    data: null

  /forum/articles/{id}:
    get:
      operationId: getArticleDetail
      tags:
        - 论坛模块
      summary: 获取文章详情
      description: 根据ID获取文章详细内容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleDetailResponse'
              examples:
                success:
                  summary: 操作成功
                  value:
                    code: 200
                    data:
                      id: "1"
                      title: "商南茶的历史"
                      content: "商南茶有着悠久的历史..."
                      summary: "商南茶历史简介"
                      coverImage: "/images/article1.jpg"
                      authorId: "cy100001"
                      authorName: "管理员"
                      categoryId: "cat001"
                      viewCount: 500
                      isLiked: false
                      isFavorited: false
                      createTime: "2025-01-01T00:00:00Z"
                failure:
                  summary: 获取文章详情失败
                  value:
                    code: 6110
                    data: null
    put:
      operationId: updateArticle
      tags:
        - 论坛模块
      summary: 更新文章（管理员）
      description: 管理员更新文章内容
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 文章更新成功
                  value:
                    code: 6006
                    data: null
                failure:
                  summary: 文章更新失败
                  value:
                    code: 6112
                    data: null
    delete:
      operationId: deleteArticle
      tags:
        - 论坛模块
      summary: 删除文章（管理员）
      description: 管理员删除文章
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 文章已删除
                  value:
                    code: 6007
                    data: null
                failure:
                  summary: 文章删除失败
                  value:
                    code: 6113
                    data: null

  # ==================== 消息模块 ====================
  /message/list:
    get:
      operationId: getMessageList
      tags:
        - 消息模块
      summary: 获取消息列表
      description: 获取消息列表，支持类型筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: pageSize
          in: query
          schema:
            type: integer
        - name: type
          in: query
          schema:
            type: string
            enum: [system, chat, notification]
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取消息列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          type: "system"
                          title: "系统通知"
                          content: "欢迎使用商南茶城"
                          isRead: false
                          createTime: "2025-01-01T12:00:00Z"
                      total: 20
                failure:
                  summary: 获取消息列表失败
                  value:
                    code: 7100
                    data: null

  /message/{id}:
    get:
      operationId: getMessageDetail
      tags:
        - 消息模块
      summary: 获取消息详情
      description: 根据消息ID获取消息详细信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取消息详情成功
                  value:
                    code: 200
                    data:
                      id: 1
                      type: "system"
                      title: "系统通知"
                      content: "欢迎使用商南茶城"
                      isRead: true
                      createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 获取消息详情失败
                  value:
                    code: 7101
                    data: null

  /message/send:
    post:
      operationId: sendMessage
      tags:
        - 消息模块
      summary: 发送消息
      description: 发送消息给指定用户
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [receiverId, content]
              properties:
                receiverId:
                  type: string
                content:
                  type: string
                type:
                  type: string
                  enum: [text, image]
            example:
              receiverId: "cy100003"
              content: "你好"
              type: "text"
      responses:
        '200':
          description: 发送成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 发送消息成功
                  value:
                    code: 7000
                    data: null
                failure:
                  summary: 发送消息失败
                  value:
                    code: 7102
                    data: null

  /message/read:
    post:
      operationId: markMessageRead
      tags:
        - 消息模块
      summary: 标记消息为已读
      description: 批量标记消息为已读状态
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [messageIds]
              properties:
                messageIds:
                  type: array
                  items:
                    type: integer
            example:
              messageIds: [1, 2, 3]
      responses:
        '200':
          description: 标记成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 标记消息为已读成功
                  value:
                    code: 7001
                    data: null
                failure:
                  summary: 标记消息为已读失败
                  value:
                    code: 7103
                    data: null

  /message/delete:
    post:
      operationId: deleteMessage
      tags:
        - 消息模块
      summary: 删除消息
      description: 批量删除消息
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [messageIds]
              properties:
                messageIds:
                  type: array
                  items:
                    type: integer
            example:
              messageIds: [1, 2, 3]
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除消息成功
                  value:
                    code: 7002
                    data: null
                failure:
                  summary: 删除消息失败
                  value:
                    code: 7104
                    data: null

  /message/unread-count:
    get:
      operationId: getUnreadCount
      tags:
        - 消息模块
      summary: 获取未读消息数
      description: 获取当前用户的未读消息总数
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnreadCountResponse'
              examples:
                success:
                  summary: 获取未读消息数成功
                  value:
                    code: 200
                    data:
                      total: 10
                      system: 3
                      chat: 7
                failure:
                  summary: 获取未读消息数失败
                  value:
                    code: 7105
                    data: null

  /message/list/sessions:
    get:
      operationId: getChatSessions
      tags:
        - 消息模块
      summary: 获取聊天会话列表
      description: 获取聊天会话列表
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取聊天会话列表成功
                  value:
                    code: 200
                    data:
                      - sessionId: "session_1"
                        targetUser:
                          id: "cy100003"
                          username: "茶友"
                          avatar: "/images/avatar.png"
                        lastMessage: "你好"
                        lastMessageTime: "2025-01-01T12:00:00Z"
                        unreadCount: 2
                        isPinned: false
                failure:
                  summary: 获取聊天会话列表失败
                  value:
                    code: 7106
                    data: null

  /message/list/history:
    get:
      operationId: getChatHistory
      tags:
        - 消息模块
      summary: 获取聊天记录
      description: 获取与指定用户的聊天记录
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: query
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
        - name: pageSize
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取聊天记录成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          senderId: "cy100002"
                          receiverId: "cy100003"
                          content: "你好"
                          type: "text"
                          createTime: "2025-01-01T12:00:00Z"
                      total: 50
                failure:
                  summary: 获取聊天记录失败
                  value:
                    code: 7112
                    data: null

  /message/sessions:
    post:
      operationId: createChatSession
      tags:
        - 消息模块
      summary: 创建聊天会话
      description: 创建新的聊天会话
      security:
        - BearerAuth: []
      parameters:
        - name: targetId
          in: query
          required: true
          schema:
            type: string
        - name: targetType
          in: query
          schema:
            type: string
            enum: [user, shop]
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 创建会话成功
                  value:
                    code: 7006
                    data:
                      sessionId: "session_1"
                failure:
                  summary: 创建会话失败
                  value:
                    code: 7113
                    data: null

  /message/sessions/{sessionId}:
    delete:
      operationId: deleteChatSession
      tags:
        - 消息模块
      summary: 删除聊天会话
      description: 删除指定的聊天会话
      security:
        - BearerAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除会话成功
                  value:
                    code: 7008
                    data: null
                failure:
                  summary: 删除会话失败
                  value:
                    code: 7115
                    data: null

  /message/sessions/{sessionId}/pin:
    put:
      operationId: pinChatSession
      tags:
        - 消息模块
      summary: 置顶聊天会话
      description: 置顶或取消置顶聊天会话
      security:
        - BearerAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 置顶成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 置顶会话成功
                  value:
                    code: 7007
                    data: null
                failure:
                  summary: 置顶会话失败
                  value:
                    code: 7114
                    data: null

  /message/messages/image:
    post:
      operationId: sendImageMessage
      tags:
        - 消息模块
      summary: 发送图片消息
      description: 发送图片消息
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [sessionId, receiverId, image]
              properties:
                sessionId:
                  type: string
                receiverId:
                  type: string
                image:
                  type: string
                  format: binary
      responses:
        '200':
          description: 发送成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 发送图片消息成功
                  value:
                    code: 7009
                    data: null
                failure1:
                  summary: 发送图片消息失败
                  value:
                    code: 7116
                    data: null
                failure2:
                  summary: 不支持的文件类型
                  value:
                    code: 7117
                    data: null
                failure3:
                  summary: 文件大小超限
                  value:
                    code: 7118
                    data: null

  /message/user/{userId}:
    get:
      operationId: getUserProfile
      tags:
        - 消息模块
      summary: 获取用户主页信息
      description: 获取用户主页信息（用户信息、关注状态、统计数据）
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取用户主页成功
                  value:
                    code: 200
                    data:
                      user:
                        id: "cy100002"
                        username: "茶友"
                        nickname: "茶友昵称"
                        avatar: "/images/avatar.png"
                        role: 2
                      isFollowed: false
                      statistics:
                        postCount: 10
                        followingCount: 20
                        followerCount: 30
                failure1:
                  summary: 获取用户主页失败
                  value:
                    code: 7119
                    data: null
                failure2:
                  summary: 用户信息不完整
                  value:
                    code: 7120
                    data: null

  /message/user/{userId}/dynamic:
    get:
      operationId: getUserDynamic
      tags:
        - 消息模块
      summary: 获取用户动态
      description: 获取用户的动态列表
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
        - name: pageSize
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取用户动态成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          type: "post"
                          title: "发布了帖子"
                          content: "商南茶文化分享"
                          createTime: "2025-01-01T12:00:00Z"
                      total: 20
                failure:
                  summary: 获取用户动态失败
                  value:
                    code: 7121
                    data: null

  /message/user/{userId}/statistics:
    get:
      operationId: getUserStatistics
      tags:
        - 消息模块
      summary: 获取用户统计数据
      description: 获取用户的统计数据（帖子数、关注数、粉丝数等）
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取用户统计成功
                  value:
                    code: 200
                    data:
                      postCount: 10
                      followingCount: 20
                      followerCount: 30
                      favoriteCount: 15
                failure:
                  summary: 获取用户统计失败
                  value:
                    code: 7122
                    data: null

  /message/user/posts:
    get:
      operationId: getUserPosts
      tags:
        - 消息模块
      summary: 获取用户发布的帖子列表
      description: 获取当前用户发布的帖子列表
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [latest, hot]
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取用户帖子成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          title: "商南茶文化分享"
                          viewCount: 100
                          likeCount: 10
                          createTime: "2025-01-01T12:00:00Z"
                      total: 10
                failure:
                  summary: 获取用户帖子失败
                  value:
                    code: 7123
                    data: null

  /message/user/reviews:
    get:
      operationId: getUserReviews
      tags:
        - 消息模块
      summary: 获取用户评价记录
      description: 获取当前用户的评价记录
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取用户评价成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          orderId: "order001"
                          rating: 5
                          content: "商品很好"
                          createTime: "2025-01-01T12:00:00Z"
                      total: 10
                failure:
                  summary: 获取用户评价失败
                  value:
                    code: 7124
                    data: null

  /message/notifications:
    get:
      operationId: getNotifications
      tags:
        - 消息模块
      summary: 获取通知列表
      description: 获取通知列表，支持类型筛选和分页
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: pageSize
          in: query
          schema:
            type: integer
        - name: type
          in: query
          schema:
            type: string
            enum: [system, order, forum, follow]
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取通知列表成功
                  value:
                    code: 200
                    data:
                      list:
                        - id: 1
                          type: "system"
                          title: "系统通知"
                          content: "欢迎使用商南茶城"
                          isRead: false
                          createTime: "2025-01-01T12:00:00Z"
                      total: 20
                failure:
                  summary: 获取通知列表失败
                  value:
                    code: 7100
                    data: null

  /message/notifications/{id}:
    get:
      operationId: getNotificationDetail
      tags:
        - 消息模块
      summary: 获取通知详情
      description: 根据通知ID获取通知详细信息
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 获取通知详情成功
                  value:
                    code: 200
                    data:
                      id: 1
                      type: "system"
                      title: "系统通知"
                      content: "欢迎使用商南茶城"
                      isRead: true
                      createTime: "2025-01-01T12:00:00Z"
                failure:
                  summary: 获取通知详情失败
                  value:
                    code: 7101
                    data: null

    delete:
      operationId: deleteNotification
      tags:
        - 消息模块
      summary: 删除通知
      description: 删除指定通知
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 删除通知成功
                  value:
                    code: 7003
                    data: null
                failure:
                  summary: 删除通知失败
                  value:
                    code: 7107
                    data: null

  /message/notifications/batch-read:
    put:
      operationId: batchMarkNotificationsRead
      tags:
        - 消息模块
      summary: 批量标记通知为已读
      description: 批量标记通知为已读状态
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: integer
            example: [1, 2, 3]
      responses:
        '200':
          description: 标记成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 批量标记通知为已读成功
                  value:
                    code: 7004
                    data: null
                failure:
                  summary: 批量标记通知为已读失败
                  value:
                    code: 7108
                    data: null

  /message/notifications/batch:
    delete:
      operationId: batchDeleteNotifications
      tags:
        - 消息模块
      summary: 批量删除通知
      description: 批量删除通知
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: integer
            example: [1, 2, 3]
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              examples:
                success:
                  summary: 批量删除通知成功
                  value:
                    code: 7005
                    data: null
                failure:
                  summary: 批量删除通知失败
                  value:
                    code: 7109
                    data: null


components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT 认证令牌

  schemas:
    # ========== 基础响应 ==========
    BaseResponse:
      type: object
      required:
        - code
      properties:
        code:
          type: integer
          description: 业务状态码
        data:
          nullable: true
          description: 响应数据

    # ========== 用户模块基础 Schemas ==========
    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          description: 用户名
          minLength: 3
          maxLength: 50
        password:
          type: string
          description: 密码
          format: password
          minLength: 6

    LoginResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [2000, 2100, 2105]
          description: |
            业务状态码：
            - 2000: 登录成功
            - 2100: 用户名或密码错误
            - 2105: 用户已被禁用
        data:
          type: object
          nullable: true
          description: 登录成功时返回token对象，失败时为null
          properties:
            token:
              type: string
              description: |
                JWT Token字符串，格式为 header.payload.signature
                
                Payload解码后包含：
                - sub: 用户ID (如 "cy100002")
                - role: 用户角色 (1=管理员, 2=普通用户, 3=商家)
                - username: 用户名
                - iat: 签发时间 (Unix时间戳，秒)
                - exp: 过期时间 (Unix时间戳，秒)
                - iss: 签发者 ("shangnantea")
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeTEwMDAwMiIsInJvbGUiOjIsInVzZXJuYW1lIjoidGVzdHVzZXIiLCJpYXQiOjE3MzcwMDAwMDAsImV4cCI6MTg5MzQ1NjAwMCwiaXNzIjoic2hhbmduYW50ZWEifQ.mock_signature_for_testing"

    RegisterRequest:
      type: object
      required:
        - username
        - password
        - confirmPassword
      properties:
        username:
          type: string
          description: 用户名
          minLength: 3
          maxLength: 50
        password:
          type: string
          description: 密码
          format: password
          minLength: 6
        confirmPassword:
          type: string
          description: 确认密码
          format: password
          minLength: 6
        email:
          type: string
          format: email
          description: 邮箱
        phone:
          type: string
          description: 手机号

    RegisterResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [2001, 2102]
          description: 2001=注册成功, 2102=注册失败
        data:
          type: object
          nullable: true
          properties:
            id:
              type: string
              description: 用户ID
            username:
              type: string
              description: 用户名
            nickname:
              type: string
              description: 昵称
            avatar:
              type: string
              description: 头像URL
            role:
              type: integer
              description: 角色
            status:
              type: integer
              description: 状态

    RefreshTokenResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200, 2102, 2103]
          description: |
            业务状态码：
            - 200: 刷新成功
            - 2102: Token无效或已被篡改
            - 2103: 未登录（未携带Token）
        data:
          type: object
          nullable: true
          description: 刷新成功时返回新token对象，失败时为null
          properties:
            token:
              type: string
              description: |
                新的JWT Token字符串
                
                Payload结构与登录返回的token相同：
                - sub: 用户ID
                - role: 用户角色
                - username: 用户名
                - iat: 新的签发时间
                - exp: 新的过期时间（24小时后）
                - iss: "shangnantea"
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeTEwMDAwMiIsInJvbGUiOjIsInVzZXJuYW1lIjoidGVzdHVzZXIiLCJpYXQiOjE3MzcwMDAwMDAsImV4cCI6MTg5MzQ1NjAwMCwiaXNzIjoic2hhbmduYW50ZWEifQ.mock_signature_for_testing"

    UserInfoResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
          description: 200=获取成功
        data:
          $ref: '#/components/schemas/UserInfo'

    UserInfo:
      type: object
      properties:
        id:
          type: string
          description: 用户ID
        username:
          type: string
          description: 用户名
        nickname:
          type: string
          description: 昵称
        avatar:
          type: string
          description: 头像URL
        email:
          type: string
          format: email
          description: 邮箱
        phone:
          type: string
          description: 手机号
        role:
          type: integer
          description: 角色 (1=管理员, 2=普通用户, 3=商家)
        status:
          type: integer
          description: 状态 (0=禁用, 1=启用)

    # ========== 用户模块 Schemas ==========
    UpdateUserRequest:
      type: object
      properties:
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string

    UpdatePasswordRequest:
      type: object
      required:
        - oldPassword
        - newPassword
        - confirmNewPassword
      properties:
        oldPassword:
          type: string
          format: password
        newPassword:
          type: string
          format: password
        confirmNewPassword:
          type: string
          format: password

    ResetPasswordRequest:
      type: object
      required:
        - username
        - newPassword
      properties:
        username:
          type: string
        phone:
          type: string
        email:
          type: string
        verificationCode:
          type: string
        newPassword:
          type: string
          format: password

    AddressListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Address'

    Address:
      type: object
      properties:
        id:
          type: integer
        receiverName:
          type: string
        receiverPhone:
          type: string
        province:
          type: string
        city:
          type: string
        district:
          type: string
        detailAddress:
          type: string
        isDefault:
          type: integer
          enum: [0, 1]

    CertificationResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Certification'

    Certification:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: string
        shopName:
          type: string
        businessLicense:
          type: string
        idCardFront:
          type: string
        idCardBack:
          type: string
        status:
          type: integer
          enum: [0, 1, 2]
          description: 0=待审核, 1=已通过, 2=已拒绝
        createTime:
          type: string
          format: date-time

    CertificationRequest:
      type: object
      required:
        - shopName
        - businessLicense
        - idCardFront
        - idCardBack
      properties:
        shopName:
          type: string
        businessLicense:
          type: string
        idCardFront:
          type: string
        idCardBack:
          type: string

    FollowListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Follow'

    Follow:
      type: object
      properties:
        id:
          type: integer
        targetId:
          type: string
        targetType:
          type: string
          enum: [user, shop]
        targetName:
          type: string
        targetAvatar:
          type: string
        createTime:
          type: string
          format: date-time

    FollowRequest:
      type: object
      required:
        - targetId
        - targetType
      properties:
        targetId:
          type: string
        targetType:
          type: string
          enum: [user, shop]

    FavoriteListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Favorite'

    Favorite:
      type: object
      properties:
        id:
          type: integer
        targetId:
          type: string
        targetType:
          type: string
          enum: [tea, post, article]
        targetName:
          type: string
        targetImage:
          type: string
        createTime:
          type: string
          format: date-time

    FavoriteRequest:
      type: object
      required:
        - itemId
        - itemType
      properties:
        itemId:
          type: string
          description: 收藏项ID（茶叶ID、帖子ID、文章ID等）
        itemType:
          type: string
          description: 收藏项类型
          enum: [tea, post, tea_article]

    LikeRequest:
      type: object
      required:
        - targetId
        - targetType
      properties:
        targetId:
          type: string
          description: 目标ID（帖子ID、回复ID、评价ID、文章ID等）
        targetType:
          type: string
          description: 目标类型
          enum: [post, reply, review, article]

    PreferencesResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Preferences'

    Preferences:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark]
        displayMode:
          type: string
          enum: [grid, list]
        language:
          type: string

    PreferencesRequest:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark]
        displayMode:
          type: string
          enum: [grid, list]
        language:
          type: string

    UserListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/UserInfo'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    CreateAdminRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
        password:
          type: string
          format: password
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        avatar:
          type: string

    AdminUpdateUserRequest:
      type: object
      properties:
        nickname:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        status:
          type: integer
          enum: [0, 1]
        avatar:
          type: string

    CertificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Certification'
            total:
              type: integer

    # ========== 茶叶模块 Schemas ==========
    TeaListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [3000, 200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Tea'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    Tea:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        categoryId:
          type: integer
        shopId:
          type: string
        price:
          type: number
          format: double
        originalPrice:
          type: number
          format: double
        stock:
          type: integer
        sales:
          type: integer
        description:
          type: string
        images:
          type: array
          items:
            type: string
        status:
          type: integer
          enum: [0, 1]

    TeaRequest:
      type: object
      properties:
        name:
          type: string
        categoryId:
          type: integer
        shopId:
          type: string
        price:
          type: number
          format: double
        originalPrice:
          type: number
          format: double
        stock:
          type: integer
        description:
          type: string
        images:
          type: array
          items:
            type: string
        status:
          type: integer
          enum: [0, 1]

    TeaDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [3001, 200]
        data:
          $ref: '#/components/schemas/Tea'

    TeaCategoryListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/TeaCategory'

    TeaCategory:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        parentId:
          type: integer
        sortOrder:
          type: integer
        icon:
          type: string

    TeaCategoryRequest:
      type: object
      properties:
        name:
          type: string
        parentId:
          type: integer
        sortOrder:
          type: integer
        icon:
          type: string

    ReviewListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Review'
            total:
              type: integer

    Review:
      type: object
      properties:
        id:
          type: integer
        userId:
          type: string
        username:
          type: string
        avatar:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        content:
          type: string
        images:
          type: array
          items:
            type: string
        createTime:
          type: string
          format: date-time

    ReviewStatsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            averageRating:
              type: number
              format: float
            totalCount:
              type: integer
            ratingDistribution:
              type: object
              additionalProperties:
                type: integer

    ReviewRequest:
      type: object
      required:
        - teaId
        - rating
        - content
      properties:
        teaId:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        content:
          type: string
        images:
          type: array
          items:
            type: string
        orderId:
          type: string

    SpecificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Specification'

    Specification:
      type: object
      properties:
        id:
          type: string
        teaId:
          type: string
        specName:
          type: string
        price:
          type: number
          format: double
        stock:
          type: integer
        isDefault:
          type: integer
          enum: [0, 1]

    SpecificationRequest:
      type: object
      properties:
        specName:
          type: string
        price:
          type: number
          format: double
        stock:
          type: integer
        isDefault:
          type: integer
          enum: [0, 1]

    UploadImagesResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [1001]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              url:
                type: string

    TeaListSimpleResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              name:
                type: string
              price:
                type: number
              images:
                type: array
                items:
                  type: string

    # ========== 店铺模块 Schemas ==========
    ShopListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Shop'
            total:
              type: integer
            page:
              type: integer
            pageSize:
              type: integer

    Shop:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        logo:
          type: string
        description:
          type: string
        rating:
          type: number
          format: float
        salesCount:
          type: integer
        followCount:
          type: integer
        ownerId:
          type: string

    ShopRequest:
      type: object
      properties:
        name:
          type: string
        logo:
          type: string
        description:
          type: string

    ShopDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/Shop'

    ShopStatisticsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            totalSales:
              type: number
              format: double
            orderCount:
              type: integer
            productCount:
              type: integer
            followCount:
              type: integer

    BannerListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Banner'

    Banner:
      type: object
      properties:
        id:
          type: string
        imageUrl:
          type: string
        title:
          type: string
        linkUrl:
          type: string
        sortOrder:
          type: integer

    AnnouncementListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/Announcement'

    Announcement:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        content:
          type: string
        isTop:
          type: boolean
        createTime:
          type: string
          format: date-time

    AnnouncementRequest:
      type: object
      properties:
        title:
          type: string
        content:
          type: string
        isTop:
          type: boolean

    FollowStatusResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            isFollowed:
              type: boolean

    # ========== 订单模块 Schemas ==========
    CreateOrderRequest:
      type: object
      required:
        - items
        - addressId
      properties:
        items:
          type: array
          items:
            type: object
            properties:
              teaId:
                type: string
              specId:
                type: string
              quantity:
                type: integer
                minimum: 1
        addressId:
          type: string
        remark:
          type: string

    CreateOrderResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [4000]
        data:
          type: object
          properties:
            orderId:
              type: string
            totalPrice:
              type: number
              format: double
            status:
              type: integer

    OrderListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Order'
            total:
              type: integer

    Order:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        shopId:
          type: string
        status:
          type: integer
          enum: [0, 1, 2, 3, 4]
          description: 0=待付款, 1=待发货, 2=待收货, 3=已完成, 4=已取消
        totalPrice:
          type: number
          format: double
        createTime:
          type: string
          format: date-time

    OrderDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            userId:
              type: string
            status:
              type: integer
            totalPrice:
              type: number
            items:
              type: array
              items:
                type: object
                properties:
                  teaId:
                    type: string
                  teaName:
                    type: string
                  quantity:
                    type: integer
                  price:
                    type: number
            address:
              type: object
              properties:
                receiverName:
                  type: string
                receiverPhone:
                  type: string
                detailAddress:
                  type: string
            createTime:
              type: string
              format: date-time

    PayOrderResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [4002]
        data:
          type: object
          properties:
            paymentUrl:
              type: string

    ExpressInfoResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            expressCompany:
              type: string
            expressNumber:
              type: string
            traces:
              type: array
              items:
                type: object
                properties:
                  time:
                    type: string
                    format: date-time
                  status:
                    type: string

    CartResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/CartItem'
            totalPrice:
              type: number
              format: double

    CartItem:
      type: object
      properties:
        id:
          type: string
        teaId:
          type: string
        teaName:
          type: string
        specId:
          type: string
        specName:
          type: string
        price:
          type: number
          format: double
        quantity:
          type: integer
        selected:
          type: boolean

    OrderStatisticsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            totalOrders:
              type: integer
            totalSales:
              type: number
              format: double
            pendingOrders:
              type: integer
            shippedOrders:
              type: integer
            completedOrders:
              type: integer
            cancelledOrders:
              type: integer

    # ========== 论坛模块 Schemas ==========
    PostListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Post'
            total:
              type: integer

    Post:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        content:
          type: string
        authorId:
          type: string
        authorName:
          type: string
        categoryId:
          type: string
        viewCount:
          type: integer
        likeCount:
          type: integer
        commentCount:
          type: integer
        isLiked:
          type: boolean
          description: 当前用户是否已点赞该帖子
        isFavorited:
          type: boolean
          description: 当前用户是否已收藏该帖子
        createTime:
          type: string
          format: date-time

    PostDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            title:
              type: string
            content:
              type: string
            authorId:
              type: string
            authorName:
              type: string
            authorAvatar:
              type: string
            categoryId:
              type: string
            images:
              type: array
              items:
                type: string
            viewCount:
              type: integer
            likeCount:
              type: integer
            commentCount:
              type: integer
            isLiked:
              type: boolean
            createTime:
              type: string
              format: date-time

    UpdatePostRequest:
      type: object
      properties:
        title:
          type: string
        content:
          type: string
        categoryId:
          type: string
        images:
          type: array
          items:
            type: string

    CommentListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Comment'
            total:
              type: integer

    Comment:
      type: object
      properties:
        id:
          type: string
        postId:
          type: string
        userId:
          type: string
        username:
          type: string
        avatar:
          type: string
        content:
          type: string
        likeCount:
          type: integer
        createTime:
          type: string
          format: date-time

    ForumCategoryListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            $ref: '#/components/schemas/ForumCategory'

    ForumCategory:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        sortOrder:
          type: integer

    ForumCategoryRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        sortOrder:
          type: integer

    ArticleListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Article'
            total:
              type: integer

    Article:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        summary:
          type: string
        coverImage:
          type: string
        authorId:
          type: string
        authorName:
          type: string
        viewCount:
          type: integer
        createTime:
          type: string
          format: date-time

    ArticleDetailResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            id:
              type: string
            title:
              type: string
            content:
              type: string
            summary:
              type: string
            coverImage:
              type: string
            authorId:
              type: string
            authorName:
              type: string
            categoryId:
              type: string
            viewCount:
              type: integer
            createTime:
              type: string
              format: date-time

    ArticleRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
        content:
          type: string
        summary:
          type: string
        coverImage:
          type: string
        categoryId:
          type: string

    PostListSimpleResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              title:
                type: string
              viewCount:
                type: integer
              likeCount:
                type: integer

    SearchResultResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            posts:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  title:
                    type: string
                  type:
                    type: string
            articles:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  title:
                    type: string
                  type:
                    type: string
            total:
              type: integer

    # ========== 消息模块 Schemas ==========
    ConversationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Conversation'
            total:
              type: integer

    Conversation:
      type: object
      properties:
        id:
          type: string
        targetUserId:
          type: string
        targetUsername:
          type: string
        targetAvatar:
          type: string
        lastMessage:
          type: string
        lastMessageTime:
          type: string
          format: date-time
        unreadCount:
          type: integer

    MessageListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Message'
            total:
              type: integer

    Message:
      type: object
      properties:
        id:
          type: string
        senderId:
          type: string
        receiverId:
          type: string
        content:
          type: string
        type:
          type: string
          enum: [text, image, file]
        isRead:
          type: boolean
        createTime:
          type: string
          format: date-time

    SendMessageRequest:
      type: object
      required:
        - content
        - type
      properties:
        content:
          type: string
        type:
          type: string
          enum: [text, image, file]

    SendMessageResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [7000]
        data:
          type: object
          properties:
            messageId:
              type: string
            createTime:
              type: string
              format: date-time

    UnreadCountResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            chatCount:
              type: integer
            notificationCount:
              type: integer
            totalCount:
              type: integer

    NotificationListResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            list:
              type: array
              items:
                $ref: '#/components/schemas/Notification'
            total:
              type: integer

    Notification:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          enum: [system, like, comment, follow]
        title:
          type: string
        content:
          type: string
        isRead:
          type: boolean
        createTime:
          type: string
          format: date-time

    MessageSettingsResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          $ref: '#/components/schemas/MessageSettings'

    MessageSettings:
      type: object
      properties:
        enableChatNotification:
          type: boolean
        enableLikeNotification:
          type: boolean
        enableCommentNotification:
          type: boolean
        enableFollowNotification:
          type: boolean
        enableSystemNotification:
          type: boolean

    MessageSettingsRequest:
      type: object
      properties:
        enableChatNotification:
          type: boolean
        enableLikeNotification:
          type: boolean
        enableCommentNotification:
          type: boolean
        enableFollowNotification:
          type: boolean
        enableSystemNotification:
          type: boolean

    BlacklistResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
              username:
                type: string
              avatar:
                type: string
              createTime:
                type: string
                format: date-time

    # ========== 公共模块 Schemas ==========
    UploadResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [1001, 2012, 5030]
        data:
          type: object
          properties:
            url:
              type: string
            avatarUrl:
              type: string

    CaptchaResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [200]
        data:
          type: object
          properties:
            captchaId:
              type: string
            captchaImage:
              type: string

    AddressRequest:
      type: object
      required:
        - receiverName
        - receiverPhone
      properties:
        receiverName:
          type: string
          description: 收货人姓名
        receiverPhone:
          type: string
          description: 收货人电话
        province:
          type: string
          description: 省份
        city:
          type: string
          description: 城市
        district:
          type: string
          description: 区县
        detailAddress:
          type: string
          description: 详细地址
        isDefault:
          type: integer
          enum: [0, 1]
          description: 是否默认地址

    CreatePostRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
          description: 帖子标题
          minLength: 1
          maxLength: 200
        content:
          type: string
          description: 帖子内容
          minLength: 1
        categoryId:
          type: string
          description: 分类ID
        images:
          type: array
          items:
            type: string
          description: 图片URL列表

    CreatePostResponse:
      type: object
      properties:
        code:
          type: integer
          enum: [6000]
          description: 6000=帖子发布成功
        data:
          type: object
          properties:
            postId:
              type: string
              description: 帖子ID
            title:
              type: string
              description: 帖子标题
            createTime:
              type: string
              format: date-time
              description: 创建时间
