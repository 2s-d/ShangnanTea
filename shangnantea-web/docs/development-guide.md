# 商南茶文化平台 - 前端开发指南

## 文档说明

本文档整合了项目开发过程中的重要决策、架构设计和开发规范，用于指导后续的状态管理和API开发工作。

**文档版本**: 1.0  
**创建日期**: 2024-12-17  
**适用阶段**: 状态管理与API开发阶段

---

## 1. 项目概述

### 1.1 项目定位
商南茶文化推广与销售平台是一个集茶叶销售、文化推广、社区交流于一体的综合平台。

### 1.2 技术架构

#### 前端技术栈
- **框架**: Vue 3.2.37
- **状态管理**: Vuex 4.0.2
- **路由**: Vue Router 4.0.16
- **UI组件库**: Element Plus 2.2.6
- **HTTP客户端**: Axios 0.27.2
- **构建工具**: Vue CLI 5.0.6
- **CSS预处理器**: SCSS

#### 后端技术栈
- **框架**: Spring Boot 2.7.x
- **ORM框架**: MyBatis
- **数据库**: MySQL 8.0
- **安全框架**: 自定义Token认证（类JWT结构）
- **API文档**: Swagger/SpringDoc

### 1.3 项目结构

```
shangnantea-web/
├── public/              # 静态资源
├── src/
│   ├── api/             # API接口定义
│   ├── assets/          # 项目资源
│   ├── components/      # 公共组件（按模块分类）
│   ├── composables/     # 组合式函数
│   ├── router/          # 路由配置
│   ├── store/           # Vuex状态管理
│   │   └── modules/     # 模块化store
│   ├── utils/           # 工具类
│   └── views/           # 页面组件（按模块分类）
```

---

## 2. 用户角色与权限设计

### 2.1 用户角色定义

系统中有三种主要用户角色，每种角色拥有不同的导航栏布局和权限：

#### 普通用户（角色ID: 2）
- **导航栏**：茶文化-茶叶商城-茶友论坛-我的订单-消息管理-个人主页-购物车-下滑栏
- **下滑栏菜单**：点击右上角头像显示下拉菜单
  - 个人设置（个性修改、修改密码、商家认证申请）
  - 收货地址管理
  - 退出登录
- **功能权限**：
  - 购买茶叶
  - 参与社区讨论
  - 查看茶文化知识
  - 申请商家认证
- **禁止访问页面**：用户管理页面、订单管理页面、商家店铺管理页面、内容管理页面、茶叶管理页面

#### 茶叶商家（角色ID: 3）
- **导航栏**：茶文化-茶叶商城-茶友论坛-订单管理-商家店铺-消息管理-个人主页-购物车-下滑栏
- **下滑栏菜单**：点击右上角头像显示下拉菜单
  - 个人中心（修改个人资料、修改密码）
  - 收货地址管理
  - 退出登录
- **功能权限**：
  - 继承普通用户所有权限
  - 管理店铺茶叶商品
  - 处理自己店铺订单
  - 与用户交流
  - 管理自己店铺
- **禁止访问页面**：用户管理页面、内容管理页面、茶叶管理页面

#### 平台管理员（角色ID: 1）
- **导航栏**：茶文化-茶叶管理-订单管理-内容管理-用户管理-消息管理-个人主页-购物车-下滑栏
- **下滑栏菜单**：点击右上角头像显示下拉菜单
  - 个人中心（修改个人资料、修改密码）
  - 收货地址管理
  - 退出登录
- **功能权限**：
  - 管理用户/商家
  - 维护平台内容（论坛内容、茶文化内容管理）
  - 审核店铺认证（在用户管理中实现）
  - 管理平台直售茶叶和平台订单
- **禁止访问页面**：店铺管理页面

### 2.2 权限控制层级

- **页面级权限**：基于角色控制页面访问
- **操作级权限**：基于角色控制按钮/功能的显示与使用
- **数据级权限**：控制数据访问范围（如商家只能查看自己店铺的订单）

---

## 3. 核心业务模块详细功能规格

项目严格按照六大核心业务模块进行划分，以下是每个模块的详细功能规格：

### 3.1 用户模块 (User Module)

#### 3.1.1 登录注册与账户安全
- **用户注册**：支持手机号、用户名注册
- **用户登录**：支持手机号、用户名登录
- **密码修改**：在个人中心修改密码
- **密码找回**：通过手机号找回密码
- **账户安全设置**：安全相关设置
- **用户身份验证**：Token验证机制

#### 3.1.2 个人资料管理
- **基本信息维护**：姓名、性别、生日等
- **头像上传与修改**：支持图片上传
- **个人简介设置**：用户简介编辑
- **联系方式管理**：手机号、邮箱等

#### 3.1.3 收货地址管理
- **添加地址**：新增收货地址
- **编辑地址**：修改已有地址
- **删除地址**：删除不需要的地址
- **设置默认地址**：指定默认收货地址
- **地址验证与格式化**：地址格式验证
- **地址薄管理**：管理多个地址

#### 3.1.4 商家认证流程
**完整流程**：
1. 普通用户在个人中心申请商家认证
2. 提交认证材料（身份证、营业执照等）
3. 管理员审核认证申请
4. 系统自动向用户发送认证结果通知
5. 用户确认通知后：
   - **通过认证**：用户角色变更为商家，系统自动创建店铺
   - **被拒绝**：保留认证信息，用户可修改后重新提交

**技术细节**：
- 认证申请表作为临时存储，不直接参与店铺创建
- 店铺ID在用户确认通知后动态生成

#### 3.1.5 用户管理（管理员功能）
- **用户列表查看与搜索**：查看所有用户，支持搜索
- **用户角色管理**：修改用户角色
- **账户状态控制**：启用/禁用账户
- **用户行为统计**：查看用户行为数据
- **商家认证申请处理**：审核商家认证申请

---

### 3.2 茶叶模块 (Tea Module)

#### 3.2.1 茶叶分类管理
- **分类体系**：绿茶、红茶、白茶等
- **产地分类**：按产地分类
- **工艺分类**：按制作工艺分类
- **季节分类**：按采摘季节分类

#### 3.2.2 茶叶商品管理
**茶叶类型**：
- **店铺茶叶**：商家上传，关联特定店铺（在店铺模块中管理）
- **平台直售茶叶**：管理员上传，使用固定平台店铺ID

**管理功能**：
- 茶叶基本信息管理
- 茶叶多规格设置（不同重量、包装）
- 茶叶图片管理（主图、详情图）
- 库存与价格管理

#### 3.2.3 茶叶商城

**搜索功能设计**：
- 顶部搜索栏支持切换搜索类型（茶叶/店铺）
- 搜索结果根据类型自动切换显示模式
- 支持多种筛选条件组合（价格区间、评分、销量等）
- 根据搜索类型显示不同的筛选项

**茶叶卡片设计**：
- 采用方形布局，突出茶叶主图
- 包含茶叶名称、价格、评分、销量信息
- 显示所属店铺名称（可点击跳转）
- 提供"加入购物车"快捷按钮
- 点击茶叶卡片主体跳转至茶叶详情页

**茶叶详情页设计**：
- 顶部图片轮播展示茶叶多角度图片
- 详细展示茶叶名称、价格、规格选择
- 显示所属店铺信息，点击可跳转至店铺
- 提供"联系客服"功能，直接与卖家沟通（跳转到聊天页面）
- 展示茶叶详情、用户评价等信息
- 底部固定栏提供"加入购物车"和"立即购买"按钮

**浏览与推荐**：
- 多条件筛选（分类、价格、评分）
- 关键词搜索
- 排序（销量、价格、评分）
- 茶叶推荐（基于随机推荐，预留算法推荐接口）

#### 3.2.4 茶叶评价系统
- 评价必须在订单完成后进行
- 用户订单完成后出现"待评价"操作
- 评价内容、评分与晒图功能
- 商家可在茶叶详情页回复客户评价
- 评价显示在茶叶详情页面

---

### 3.3 店铺模块 (Shop Module)

#### 3.3.1 店铺管理
- **店铺基本信息设置**：店铺名称、简介等
- **店铺装修**：首页、Banner设置
- **店铺公告管理**：发布和管理公告
- **经营数据统计**：基本销售数据（无专门图表）

#### 3.3.2 店铺茶叶管理
- **商家茶叶上传与管理**：上传和管理店铺茶叶
- **规格与价格设置**：设置茶叶规格和价格
- **库存管理**：管理茶叶库存
- **茶叶上下架操作**：控制茶叶销售状态
- **商品图片管理**：管理茶叶图片

#### 3.3.3 店铺展示

**店铺卡片设计**：
- 采用长横条形式布局，突出店铺视觉形象
- 包含店铺Logo、店铺名称、简介、评分和销量信息
- 显示店铺特色茶叶缩略图（3-5个）
- 点击店铺卡片跳转至对应店铺详情页

**店铺详情页设计**：
- 顶部展示店铺基本信息和宣传Banner
- 提供店铺公告、联系方式等信息
- 展示该店铺所有茶叶商品（使用茶叶卡片组件）
- 提供店铺内部搜索功能
- 包含"联系客服"按钮，跳转到聊天界面
- 提供"关注店铺"按钮

**其他功能**：
- 店铺首页展示
- 商品列表展示
- 店铺评分与评价
- 店铺搜索与推荐

---

### 3.4 订单模块 (Order Module)

#### 3.4.1 购物车管理
- **添加商品**：从茶叶详情页添加到购物车
- **移除商品**：从购物车移除商品
- **修改数量**：调整商品数量
- **选择规格**：选择商品规格
- **购物车结算**：批量结算购物车商品

#### 3.4.2 订单流程

**完整订单流程**：
1. 用户在茶叶详情页可添加购物车或立即购买
2. 购物车页面可以选择茶叶进行结算
3. 立即购买或购物车结算都会跳转到结算页
4. 在结算页确认订单信息（收货地址、支付方式等）后，生成订单（初始状态为待支付）
5. 生成订单后跳转到支付页面
6. **取消支付或10分钟未支付**：订单状态变为已取消
7. **完成支付**：订单状态变为待发货，进入我的订单/订单管理页面
8. 商家或管理员发货：订单状态变为待收货
9. 用户收货确认：订单状态变为已完成
10. 完成后用户可评价商品（可选择跳过评价）

**订单处理权限分离**：
- 管理员只能操作平台直售的订单
- 商家只能操作自己店铺的订单

**单商品订单设计**：
- 订单只支持单个商品（可选规格和数量）
- 便于单品退货和发货处理

#### 3.4.3 支付系统
- **多支付方式集成**：支持多种支付方式
- **支付安全保障**：支付安全机制
- **退款处理**：退款流程
- **交易流水管理**：交易记录管理

#### 3.4.4 订单管理
- **订单状态查询**：按状态筛选订单
- **订单历史记录**：查看历史订单
- **订单统计分析**：订单数据统计
- **订单导出**：导出订单数据

---

### 3.5 论坛模块 (Forum Module)

论坛模块虽名为"论坛"，但实际承担了整个平台的内容功能，分为三个主要部分：

#### 3.5.1 主菜单茶文化（首页功能）

**定位**：以茶文化为主，拥有传统首页该有的功能

**内容管理**：
- 轮播广告展示（Banner管理）
- 茶文化特色展示
- 精选茶叶推荐
- 茶艺体验区展示
- 茶界动态与最新资讯
- 合作伙伴展示
- 茶文化知识文章（单向输出内容）
- 产地介绍
- 泡茶方法指南
- 茶叶鉴赏

**设计特点**：
- 视觉冲击力强的Banner区
- 多区块内容模块展示
- 提供到商城和论坛的导航入口
- 只有管理员可通过内容管理进行编辑

**权限特点**：
- 只有管理员可进行内容管理和创建
- 用户和商家可浏览、点赞、收藏
- 属于静态内容，与论坛互动内容区分

#### 3.5.2 茶友论坛功能

**定位**：用户社区交流平台，与茶文化首页并列同级

**版块设置**：
- 茶类主题区
- 茶文化讨论区
- 购买交流区
- 活动专区

**帖子功能**：
- 发布/编辑/删除帖子
- 帖子置顶/精华设置
- 多级回复功能
- 点赞/收藏功能
- @用户功能

**权限控制**：
- 普通用户可发帖、回复、点赞
- 管理员可管理所有帖子内容
- 帖子回复无需审核（预留审核功能接口）

#### 3.5.3 内容管理功能（管理员功能）

**定位**：管理员专用的内容维护中心

**分为两部分**：

1. **主菜单茶文化管理**：
   - 首页Banner轮播图管理
   - 首页板块内容设置
   - 茶文化专栏文章管理
   - 推荐内容设置

2. **论坛管理**：
   - 论坛版块创建与管理
   - 帖子审核与管理
   - 用户发言监控
   - 内容违规处理

**权限控制**：
- 仅管理员（角色ID: 1）可访问
- 在管理员导航栏的"内容管理"菜单下

---

### 3.6 消息模块 (Message Module)

#### 3.6.1 消息模块导航结构

- **导航栏位置**：所有角色（普通用户、商家、管理员）导航栏中均有"消息管理"和"个人主页"入口
- **消息模块组织**：
  - "消息管理"：处理通知和即时聊天功能
  - "个人主页"：处理用户资料、关注和收藏管理功能

#### 3.6.2 消息管理功能

**系统通知**：
- **四种通知类型**：
  1. **帖子回复或@通知**：可跳转定位到相应内容
  2. **纯文本通知**：系统公告等纯文字信息
  3. **带外部链接通知**：可跳转到外部资源
  4. **含操作通知**：如商家认证确认通知，含操作按钮
- 通知状态管理（已读/未读）
- 通知分类展示
- 批量处理（全部已读、删除等）

**即时聊天与店铺客服**：
- **聊天功能分类**：
  1. **好友聊天**：用户间私信交流
  2. **客服咨询**：用户与商家或平台客服交流
  3. **店铺客服**：茶叶详情页和店铺页面的客服咨询入口（跳转到聊天页面）
- 左侧会话对象栏，右侧聊天框布局
- 历史消息查询
- 图片发送功能
- 表情发送功能
- 未读消息提醒
- 会话置顶和删除

#### 3.6.3 个人主页功能

**个人主页设计**：
- 个人基础信息展示（头像、用户名、简介等）
- 用户动态展示（最近发帖、评论等）
- 用户角色标识（普通用户/商家/管理员）
- 商家用户展示店铺链接
- 关注按钮（针对他人查看时）
- 私信按钮（针对他人查看时，跳转到聊天页面）

**关注与收藏管理**：
- **关注列表**：包含用户和店铺，点击可跳转至详情页
- **收藏列表**：包含商品和帖子，点击可查看详情
- **收藏内容类型分类**：
  - 茶文化内容收藏
  - 茶叶商品收藏
  - 论坛帖子收藏
- 关注动态更新
- 收藏内容管理
- 分类筛选功能

**发布内容管理**：
- 用户发布的帖子列表
- 用户的茶叶评价记录
- 按时间排序和分类筛选
- 编辑和删除自己的内容

**数据统计**：
- 用户注册时长
- 获得的点赞/收藏总数
- 发帖数量统计
- 交易数据概览（对商家用户）

#### 3.6.4 消息模块页面组织

**已创建页面**：
- 消息通知页面（NotificationsPage）：系统通知的查看和管理
- 聊天页面（ChatPage）：私信和客服功能的实现

**待创建页面**：
- 个人主页页面（ProfilePage）：个人资料和统计信息展示
- 关注管理页面（FollowsPage）：管理关注的用户和店铺
- 收藏管理页面（FavoritesPage）：管理收藏的内容、商品和帖子
- 发布内容页面（PublishedContentPage）：管理发布的帖子和评价

---

## 4. 核心业务流程

### 4.1 茶叶购买流程

1. 浏览/搜索茶叶商城
2. 查看茶叶详情
3. 选择规格和数量
4. 加入购物车或立即结算
5. 结算生成订单（待支付状态）
6. 选择收货地址和支付方式
7. 完成支付（状态变为待发货）
8. 等待商家发货（状态变为待收货）
9. 确认收货（状态变为已完成）
10. 评价商品

### 4.2 商家入驻流程

1. 注册普通账户
2. 在个人中心申请商家认证
3. 提交认证材料
4. 等待平台管理员审核
5. 收到系统通知认证结果
6. 确认通知，身份变更为商家
7. 系统自动创建店铺
8. 完善店铺信息
9. 上传茶叶商品
10. 店铺正式运营

### 4.3 社区互动流程

1. 通过茶文化首页了解基本茶文化知识
2. 浏览茶友论坛的各个主题区
3. 阅读感兴趣的帖子
4. 发表回复/评论
5. 发布新帖子讨论茶叶相关话题
6. 收藏/点赞有价值的内容
7. 关注感兴趣的用户/商家
8. 通过私信与其他茶友交流

### 4.4 页面跳转关系

**茶叶相关跳转**：
- 茶叶卡片 → 茶叶详情页
- 茶叶详情页 → 店铺详情页（点击店铺名称）
- 茶叶详情页 → 聊天页面（联系客服）
- 茶叶详情页 → 购物车/结算页（加入购物车/立即购买）

**店铺相关跳转**：
- 店铺卡片 → 店铺详情页
- 店铺详情页 → 茶叶详情页（点击茶叶卡片）
- 店铺详情页 → 聊天页面（联系客服）

**消息相关跳转**：
- 茶叶详情页 → 聊天页面（联系客服，传递shopId）
- 店铺详情页 → 聊天页面（联系客服，传递shopId）
- 关注列表 → 聊天页面（发消息，传递userId）
- 个人主页 → 聊天页面（私信按钮，传递userId）

**订单相关跳转**：
- 茶叶详情页 → 结算页（立即购买）
- 购物车 → 结算页（结算）
- 结算页 → 支付页（生成订单后）
- 支付页 → 订单列表（支付完成/取消）

---

## 5. 数据流向规范

### 3.1 标准数据流

```
用户交互 → 组件调用Vuex Actions → Actions调用API接口 → 更新Vuex State → 视图自动更新
```

### 3.2 严格禁止的行为

- ❌ **禁止组件直接调用API**：所有API调用必须通过Vuex Actions
- ❌ **禁止跨模块访问**：组件只能调用对应模块的Vuex Actions
- ❌ **禁止组件间直接传递状态**：共享状态必须通过Vuex

### 3.3 模块职责分离

- **组件层**：负责UI展示和用户交互
- **Vuex层**：负责状态管理和业务逻辑
- **API层**：负责与后端通信

---

## 6. Vuex状态管理规范

### 4.1 模块结构

每个Vuex模块应包含：

```javascript
export default {
  namespaced: true,
  
  state: {
    // 状态定义
  },
  
  getters: {
    // 派生状态
  },
  
  mutations: {
    // 同步状态更新（全大写+下划线）
  },
  
  actions: {
    // 异步操作和API调用（小驼峰）
  }
}
```

### 4.2 命名规范

- **State**: 小驼峰命名，如 `userInfo`、`teaList`
- **Getters**: 小驼峰命名，描述性名称，如 `isAdmin`、`totalCartItems`
- **Mutations**: 全大写下划线，如 `SET_USER_INFO`、`UPDATE_TEA_LIST`
- **Actions**: 小驼峰命名，动词开头，如 `login`、`fetchTeaList`、`updateUserInfo`

### 4.3 现有Vuex模块

项目已创建以下Vuex模块（需要完善）：
- `store/modules/user.js`
- `store/modules/tea.js`
- `store/modules/shop.js`
- `store/modules/order.js`
- `store/modules/forum.js`
- `store/modules/message.js`

---

## 7. API接口规范

### 5.1 API文件组织

API文件按模块划分，与Vuex模块一一对应：
- `api/user.js` - 用户相关接口
- `api/tea.js` - 茶叶相关接口
- `api/shop.js` - 店铺相关接口
- `api/order.js` - 订单相关接口
- `api/forum.js` - 论坛相关接口
- `api/message.js` - 消息相关接口

### 5.2 API方法命名

- 查询单个：`getXXX`、`findXXX`
- 查询列表：`listXXX`、`findAllXXX`
- 创建：`createXXX`、`addXXX`
- 更新：`updateXXX`
- 删除：`deleteXXX`、`removeXXX`

### 5.3 请求拦截器

所有API请求通过 `api/index.js` 的统一拦截器处理：
- 自动附加Token到请求头
- 统一错误处理
- 请求/响应日志记录（开发环境）

---

## 8. 权限控制规范

### 6.1 Token结构

采用类JWT结构的token：`base64Payload.signature`

```javascript
// payload包含
{
  id: userId,
  username: username,
  role: roleId,  // 1-管理员，2-普通用户，3-商家
  exp: expireTime
}
```

### 6.2 权限验证流程

1. **路由守卫**：验证token有效性，检查页面访问权限
2. **API拦截器**：验证token，附加到请求头
3. **组件权限**：使用权限工具类判断操作权限

### 6.3 权限工具类

使用 `utils/permission.js` 进行权限判断：
- `hasRole(role)` - 检查角色
- `isAdmin()` - 是否管理员
- `isShop()` - 是否商家
- `isLoggedIn()` - 是否已登录

---

## 9. 消息提示系统

### 9.1 消息架构

消息系统按模块分类，每个模块有三种消息类型：

1. **success**：操作成功消息
2. **error**：错误/失败消息  
3. **prompt**：提示/验证消息

### 9.2 消息工具使用

```javascript
// 导入模块消息工具
import userMessages from '@/utils/userMessages'
import teaMessages from '@/utils/teaMessages'

// 成功消息
userMessages.success.showLoginSuccess()
teaMessages.success.showAddToCartSuccess()

// 错误消息
userMessages.error.showLoginFailure('用户名或密码错误')
teaMessages.error.showLoadFailed()

// 提示消息
userMessages.prompt.showUsernameRequired()
```

### 9.3 消息规范

- **success**：操作成功反馈（登录成功、添加成功等）
- **error**：操作失败/错误提示（登录失败、网络错误等）
- **prompt**：用户提示（表单验证、确认提示等）

详细使用指南请参考：`docs/tasks/message-utils-guide.md`

---

## 10. 组合式函数（Composables）

### 8.1 已创建的组合式函数

- `useAuth` - 用户认证
- `useCart` - 购物车管理
- `useFormValidation` - 表单验证
- `useImageUpload` - 图片上传
- `usePagination` - 分页处理
- `useStorage` - 本地存储

### 8.2 使用原则

- 优先使用现有组合式函数
- 新功能考虑封装为组合式函数
- 组合式函数应保持单一职责

---

## 11. 数据库设计优先原则

### 9.1 核心原则

**数据库设计是基础设施，所有功能开发必须基于现有数据库结构**

### 9.2 开发约束

- ✅ 开发前必须先查阅数据库设计文档
- ✅ 表单字段必须与数据库字段对应
- ✅ 不能假设后端会为UI调整数据库
- ❌ 严禁开发数据库不支持的功能

### 9.3 超出范围处理

如果功能超出数据库能力：
- 视为超出项目范围
- 暂不开发
- 如需变更，需提交变更申请

---

## 12. 开发流程

### 10.1 功能开发标准顺序

1. **需求分析与设计**
   - 明确功能需求
   - 确定数据结构和API接口
   - 规划组件和状态设计

2. **API层实现**
   - 在 `api/` 目录创建或修改API文件
   - 定义API方法
   - 实现Mock数据（开发环境）

3. **Vuex状态管理实现**
   - 在 `store/modules/` 创建或修改模块
   - 定义state、mutations、actions、getters
   - 在 `store/index.js` 注册模块

4. **组件实现**
   - 创建或修改页面组件
   - 通过Vuex连接数据
   - 实现交互逻辑

5. **路由配置**
   - 在 `router/index.js` 添加路由
   - 设置路由元信息（权限等）

6. **测试与调试**
   - 测试功能完整性
   - 检查数据流向
   - 验证边界条件

### 10.2 组件与Vuex模块绑定规范

- 组件应当只与其对应的Vuex模块交互
- 例如：`ShopManagePage.vue` 只调用 `shop/` 命名空间下的Actions
- 跨模块功能应在对应模块的Vuex中创建Action，由该Action内部调用其他模块的API方法

---

## 13. 代码规范

### 11.1 文件命名

- **组件文件**: PascalCase，如 `TeaDetailPage.vue`
- **Vuex模块**: 小写，如 `user.js`、`tea.js`
- **API文件**: 小写，如 `userApi.js`、`teaApi.js`
- **工具类**: 小驼峰，如 `tokenStorage.js`

### 11.2 代码格式

- 使用4个空格缩进
- 每行代码不超过120个字符
- 花括号使用K&R风格（左括号不换行）

### 11.3 注释规范

- 类、方法必须有注释，说明用途、参数和返回值
- 复杂业务逻辑需添加详细注释
- 临时代码使用TODO标记

---

## 14. 当前开发阶段

### 12.1 已完成

- ✅ UI组件开发基本完成
- ✅ 页面路由配置完成
- ✅ 基础组件库搭建完成
- ✅ 消息系统架构完成

### 12.2 当前任务

- 🔄 **状态管理完善**：完善所有Vuex模块的state、mutations、actions、getters
- 🔄 **API接口实现**：完善所有API文件的接口定义和Mock数据
- 🔄 **数据流连接**：将组件与Vuex、API正确连接

### 12.3 后续计划

- ⏳ Bug修复
- ⏳ 前后端联调
- ⏳ 功能测试
- ⏳ 性能优化

---

## 15. 重要决策记录

### 13.1 架构决策

1. **前后端分离架构**：前端独立部署，通过API与后端通信
2. **模块化设计**：按业务模块划分，保持高内聚低耦合
3. **Vuex集中式状态管理**：所有共享状态通过Vuex管理
4. **组合式API优先**：新组件优先使用组合式API

### 13.2 开发策略

1. **数据库设计优先**：功能开发必须基于现有数据库结构
2. **严格数据流向**：组件 → Vuex → API，禁止跨层调用
3. **模块职责分明**：组件只与对应Vuex模块交互
4. **消息分层处理**：API层、业务层、UI层消息分离

---

## 16. 参考资料

### 14.1 相关文档

- `shangnantea-technical-architecture.md` - 技术架构设计
- `shangnantea-features.md` - 功能模块规划
- `shangnantea-service-controller-structure.md` - 服务层架构
- `docs/tasks/message-utils-guide.md` - 消息提示工具使用指南
- `composition-api-migration.md` - 组合式API迁移指南

### 14.2 工具和资源

- Element Plus官方文档：https://element-plus.org/
- Vue 3官方文档：https://vuejs.org/
- Vuex 4文档：https://vuex.vuejs.org/

---

## 17. 更新日志

### v1.1 (2024-12-17)
- 添加详细的产品功能规格章节
- 整合用户角色与权限设计
- 添加六大模块的详细功能描述
- 添加核心业务流程和页面跳转关系
- 完善UI设计细节（茶叶卡片、店铺卡片等）

### v1.0 (2024-12-17)
- 创建综合开发指南
- 整合项目架构、模块划分、开发规范
- 明确当前开发阶段和任务

---

**注意**: 本文档将随着项目进展持续更新，请定期查阅最新版本。

