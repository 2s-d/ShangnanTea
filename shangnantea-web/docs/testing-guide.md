# 商南茶文化平台 Vue 3 迁移测试指南

本文档提供了在 Vue 2 到 Vue 3 迁移过程中的功能测试指南，确保迁移过程中核心功能正常工作。

## 测试环境准备

1. **安装依赖**
   ```bash
   npm install
   ```

2. **启动开发服务器**
   ```bash
   npm run serve
   ```

3. **清除浏览器缓存和本地存储**
   - 在浏览器中打开开发者工具
   - 在应用程序/存储选项卡中清除网站数据
   - 建议使用隐私模式进行测试

## 核心功能测试清单

### 1. 用户认证系统测试

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 用户注册 | 1. 访问注册页<br>2. 填写有效信息并提交 | 注册成功，自动跳转到登录页 | □ |
| 用户登录 | 1. 访问登录页<br>2. 输入有效凭据并提交 | 登录成功，跳转到首页，显示用户菜单 | □ |
| 自动登录 | 1. 登录后关闭浏览器<br>2. 重新打开网站 | 自动恢复登录状态 | □ |
| 用户登出 | 点击退出登录按钮 | 成功登出，跳转到首页，状态清除 | □ |
| 密码修改 | 1. 访问密码修改页<br>2. 输入旧密码和新密码 | 密码成功更新 | □ |

### 2. 权限控制测试

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 角色权限显示 | 以不同角色登录（普通用户/管理员/商家） | 正确显示对应角色的菜单和操作 | □ |
| 直接访问受限页面 | 未登录状态下直接访问需要登录的页面URL | 自动重定向到登录页 | □ |
| 权限指令 | 检查使用 `v-permission` 的元素显示 | 根据用户权限正确显示/隐藏元素 | □ |
| 路由守卫 | 尝试访问无权限的页面 | 被重定向到403页面 | □ |

### 3. 数据交互测试

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 商品展示 | 访问茶叶商城页面 | 正确加载并显示茶叶列表 | □ |
| 商品筛选 | 使用筛选条件和搜索 | 显示符合条件的商品 | □ |
| 商品详情 | 点击茶叶卡片 | 正确显示茶叶详情页 | □ |
| 加入购物车 | 在茶叶详情页点击"加入购物车" | 成功添加商品到购物车 | □ |
| 购物车操作 | 修改商品数量和删除商品 | 购物车状态正确更新 | □ |
| 提交订单 | 从购物车提交订单 | 成功创建订单 | □ |

### 4. 前端路由和导航测试

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 导航菜单 | 点击导航栏各链接 | 正确跳转到对应页面 | □ |
| 返回按钮 | 在浏览器中使用返回按钮 | 正确返回到前一页 | □ |
| 路由参数 | 访问带参数的路由（如商品详情） | 正确加载相应的数据 | □ |
| 404页面 | 访问不存在的URL | 显示404页面 | □ |

### 5. 响应式行为测试

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 数据双向绑定 | 在表单中修改输入值 | 绑定的数据立即更新 | □ |
| 计算属性 | 修改依赖数据 | 计算属性自动更新 | □ |
| 异步数据加载 | 进入需要异步加载数据的页面 | 显示加载状态，然后正确显示数据 | □ |
| 组件间通信 | 在父组件中更新传递给子组件的数据 | 子组件正确响应变化 | □ |

### 6. 已迁移组件的额外测试

#### ShopDetailPage.vue (已迁移到组合式 API)

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 店铺信息加载 | 访问店铺详情页 | 正确显示店铺信息和茶叶列表 | □ |
| 标签页切换 | 切换不同的标签页（全部/分类/关于） | 正确显示对应的内容 | □ |
| 商品搜索筛选 | 使用搜索框和筛选选项 | 显示符合条件的商品 | □ |
| 分页功能 | 点击分页控件 | 加载并显示对应页码的数据 | □ |

#### App.vue (已迁移到组合式 API)

| 测试项 | 详细步骤 | 预期结果 | 状态 |
|-------|---------|---------|------|
| 导航栏显示控制 | 在不同页面间切换（首页/登录页） | 正确显示/隐藏导航栏和页脚 | □ |
| 布局响应式 | 调整浏览器窗口大小 | 布局自适应调整 | □ |

## 浏览器兼容性测试

在以下浏览器中测试核心功能：

- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)
- [ ] 移动端浏览器 (iOS Safari / Android Chrome)

## 性能测试

1. **页面加载性能**
   - 使用Chrome开发者工具的Lighthouse分析页面加载性能
   - 记录首次内容绘制 (FCP) 和交互时间 (TTI)

2. **运行时性能**
   - 使用Chrome开发者工具的Performance面板记录交互过程
   - 检查是否有不必要的渲染或计算

3. **内存使用**
   - 使用Chrome开发者工具的Memory面板检查内存使用
   - 长时间使用后检查是否存在内存泄漏

## 回归测试

每次修改组件API风格后，执行以下回归测试：

1. 验证组件的所有原有功能正常工作
2. 确认与其他组件的交互没有问题
3. 检查性能是否保持一致或有所改善

## 问题报告格式

发现问题时，请使用以下格式记录：

```
问题描述: [简要描述问题]
复现步骤: 
1. 
2. 
3. 
预期行为:
实际行为:
环境信息: [浏览器, 操作系统]
截图: [如有]
```

## 测试结果记录

每次完成一轮测试后，更新测试结果文档：

- 测试日期
- 测试版本
- 测试覆盖的功能
- 发现的问题及其严重程度
- 修复状态

通过持续测试确保迁移过程中的功能稳定性和用户体验一致性。 