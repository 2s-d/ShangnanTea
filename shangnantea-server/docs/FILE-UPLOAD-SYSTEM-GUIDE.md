# 文件上传系统全流程指南

> **文档定位**：这是一份完整的文件上传系统指导文档，记录了项目中所有图片上传接口的设计思路、实现方案和技术细节。
> 
> **使用说明**：
> - 🔴 **必须掌握** - 核心流程，必须清晰理解
> - 🟡 **需要了解** - 重要概念，了解存在即可
> - 🟢 **参考资料** - 辅助信息，需要时查阅
>
> **⚠️ 重要：文档同步维护原则**
> 
> 本文档记录了我们的文件上传系统的完整设计方案，包括：
> - 9个图片上传接口的详细信息
> - 统一的文件处理工具类
> - 分类存储策略
> - 数据库存储方案
> - 完整的业务流程
> 
> **给 AI 的关键提示**：当你在工作中发现以下情况时，**必须主动更新本文档**：
> - ✅ 新增了图片上传接口
> - ✅ 修改了文件存储路径规则
> - ✅ 更新了FileUploadUtils工具类
> - ✅ 改变了数据库存储方案
> - ✅ 发现文档内容与实际代码不符
> 
> 这样才能确保后续丢失上下文的 AI 能够准确理解我们的设计思路，直接继续开发。

## 目录

- [🔴 图片上传接口统计（必读）](#-图片上传接口统计必读)
- [🔴 文件上传全流程](#-文件上传全流程)
- [🔴 工具类使用指南](#-工具类使用指南)
- [🟡 数据库存储方案](#-数据库存储方案)
- [🟡 文件存储策略](#-文件存储策略)
- [🟢 接口实现模板](#-接口实现模板)
- [🟢 常见问题与优化](#-常见问题与优化)

---

## 🔴 图片上传接口统计（必读）

### 接口总览

**项目共有 9 个图片上传接口**，采用统一的技术方案：

| 序号 | 接口名称 | 路径 | Type分类 | 数据库表 | 存储字段 | 业务场景 |
|------|----------|------|----------|----------|----------|----------|
| 1 | uploadAvatar | /user/avatar | avatars | users | avatar | 用户头像上传 |
| 2 | uploadCertificationImage | /user/merchant/certification/image | certifications | shop_certifications | - | 商家认证图片 |