# 腾讯云短信申请傻瓜式教程

## 📌 重要提示

- ⏰ 整个流程大约需要 **30分钟**
- 💰 费用：**免费**（新用户有100条免费额度）
- 📱 需要准备：身份证、手机号

---

## 第一步：注册腾讯云账号（5分钟）

### 1.1 打开腾讯云官网

在浏览器中输入：**https://cloud.tencent.com**

### 1.2 点击右上角"免费注册"

### 1.3 选择注册方式

推荐使用：**微信扫码注册**（最快）

或者：**QQ登录**

### 1.4 完成注册

按照提示完成注册即可。

---

## 第二步：实名认证（5分钟）

### 2.1 登录后，会提示你进行实名认证

如果没有提示，点击右上角头像 → **账号信息** → **实名认证**

### 2.2 选择"个人认证"

**不要选择企业认证！**

### 2.3 填写个人信息

- 姓名：填写你的真实姓名
- 身份证号：填写你的身份证号
- 上传身份证照片：
  - 身份证正面照
  - 身份证反面照

### 2.4 人脸识别

按照提示完成人脸识别（用手机扫码）

### 2.5 等待审核

通常 **1-5分钟** 就会审核通过

---

## 第三步：开通短信服务（2分钟）

### 3.1 进入短信控制台

**方法1**：直接访问这个链接
```
https://console.cloud.tencent.com/smsv2
```

**方法2**：
1. 在腾讯云首页顶部搜索框输入：**短信**
2. 点击搜索结果中的"短信 SMS"

### 3.2 开通短信服务

如果是第一次使用，会看到"开通短信服务"的按钮

点击 **"开通"** 按钮

**注意**：开通是免费的，不会扣费！

---

## 第四步：创建短信应用（2分钟）

### 4.1 点击左侧菜单"应用管理"

### 4.2 点击"创建应用"按钮

### 4.3 填写应用信息

- **应用名称**：`商南茶城`
- **应用简介**：`商南茶文化推广与销售平台`

### 4.4 点击"创建"

### 4.5 记录 SDK AppID

创建成功后，会显示一个 **SDK AppID**（类似：`1400xxxxxx`）

**重要**：把这个 SDK AppID 复制保存到记事本！

---

## 第五步：申请短信签名（5分钟）

### 5.1 点击左侧菜单"国内短信" → "签名管理"

### 5.2 点击"创建签名"按钮

### 5.3 填写签名信息

**签名类型**：选择 **"网站"**

**签名用途**：选择 **"自用（签名为本账号实名认证的公司、网站、产品名等）"**

**签名内容**：`商南茶城`

**证明类型**：选择 **"其他"**

**证明上传**：
- 如果你有网站备案，上传备案截图
- 如果没有，上传一个简单的项目说明文档（Word或PDF）
  - 内容可以写：
    ```
    项目名称：商南茶文化推广与销售平台
    项目类型：毕业设计项目
    用途：用于发送用户注册、登录、重置密码等验证码短信
    开发者：[你的姓名]
    学校：[你的学校]
    ```

**申请说明**：
```
本人是在校学生，该项目为毕业设计项目。
项目名称为"商南茶文化推广与销售平台"，
需要使用短信验证码功能用于用户注册、登录和密码重置等场景。
```

### 5.4 点击"提交"

### 5.5 等待审核

- 审核时间：通常 **1-2小时**
- 工作时间提交审核更快
- 审核结果会通过短信和站内信通知

**注意**：在等待签名审核的同时，可以继续下面的步骤！

---

## 第六步：申请短信模板（5分钟）

### 6.1 点击左侧菜单"国内短信" → "正文模板管理"

### 6.2 点击"创建正文模板"按钮

### 6.3 填写模板信息

**模板名称**：`验证码短信`

**短信类型**：选择 **"验证码"**

**短信内容**：
```
您的验证码是：{1}，5分钟内有效，请勿泄露。
```

**重要说明**：
- `{1}` 是模板变量，代表验证码
- **不要删除 `{1}`**
- **不要改成 `{0}`**
- 腾讯云的模板变量从 `{1}` 开始

**申请说明**：
```
用于用户注册、登录、重置密码等场景的验证码发送。
```

### 6.4 点击"提交"

### 6.5 等待审核

- 审核时间：通常 **1-2小时**
- 验证码类型的模板审核最快
- 审核结果会通过短信和站内信通知

### 6.6 记录模板ID

审核通过后，会显示一个 **模板ID**（类似：`1234567`）

**重要**：把这个模板ID复制保存到记事本！

---

## 第七步：获取API密钥（3分钟）

### 7.1 访问密钥管理页面

**直接访问这个链接**：
```
https://console.cloud.tencent.com/cam/capi
```

或者：
1. 点击右上角头像
2. 选择"访问管理"
3. 点击左侧"访问密钥" → "API密钥管理"

### 7.2 点击"新建密钥"按钮

### 7.3 完成身份验证

会要求你进行身份验证（微信扫码或短信验证）

### 7.4 记录密钥

创建成功后，会显示：
- **SecretId**：类似 `AKIDxxxxxxxxxxxxxxxxxxxxx`
- **SecretKey**：类似 `xxxxxxxxxxxxxxxxxxxxxxxx`

**重要警告**：
- ⚠️ **SecretKey 只显示一次！**
- ⚠️ **必须立即复制保存！**
- ⚠️ 如果忘记保存，只能删除重新创建

**建议**：
- 复制到记事本
- 或者点击"下载"按钮保存到本地

---

## 第八步：填写配置到项目（3分钟）

### 8.1 打开项目配置文件

文件路径：`shangnantea-server/src/main/resources/application.yml`

### 8.2 找到腾讯云短信配置部分

```yaml
# 腾讯云短信配置
tencent:
  sms:
    enabled: false
    secret-id: YOUR_SECRET_ID
    secret-key: YOUR_SECRET_KEY
    sdk-app-id: YOUR_SDK_APP_ID
    sign-name: 商南茶城
    template-id: YOUR_TEMPLATE_ID
```

### 8.3 替换配置

把你刚才保存的信息填进去：

```yaml
# 腾讯云短信配置
tencent:
  sms:
    enabled: true  # 改为 true 启用真实发送
    secret-id: AKIDxxxxxxxxxxxxxxxxxxxxx  # 粘贴你的 SecretId
    secret-key: xxxxxxxxxxxxxxxxxxxxxxxx  # 粘贴你的 SecretKey
    sdk-app-id: 1400xxxxxx  # 粘贴你的 SDK AppID
    sign-name: 商南茶城  # 你的签名（不要加【】）
    template-id: 1234567  # 粘贴你的模板ID
```

**注意**：
- `sign-name` 不要加【】，只写 `商南茶城`
- 所有配置项都不要有多余的空格

### 8.4 保存文件

按 `Ctrl + S` 保存

---

## 第九步：重启项目测试（2分钟）

### 9.1 重启Spring Boot项目

```bash
cd shangnantea-server
mvn spring-boot:run
```

### 9.2 测试发送验证码

使用Postman或其他工具发送请求：

```
POST http://localhost:8080/api/user/verification-code/send
Content-Type: application/json

{
  "contact": "你的手机号",
  "contactType": "phone",
  "sceneType": "register"
}
```

### 9.3 查看结果

- **成功**：手机会收到验证码短信
- **失败**：查看后端日志的错误信息

---

## 📋 配置信息汇总表

把你获取的信息填写在这里，方便查看：

| 配置项 | 值 | 说明 |
|--------|---|------|
| SDK AppID | `1400______` | 第四步获取 |
| 签名内容 | `商南茶城` | 第五步申请 |
| 模板ID | `_______` | 第六步获取 |
| SecretId | `AKID_______________` | 第七步获取 |
| SecretKey | `_______________` | 第七步获取（只显示一次！） |

---

## ❓ 常见问题

### Q1: 签名审核不通过怎么办？

**A**: 
1. 查看审核失败原因（会通过短信通知）
2. 常见原因：
   - 证明材料不清晰 → 重新上传清晰的图片
   - 签名内容不符 → 改成更通用的名称，如"验证码平台"
3. 修改后重新提交

### Q2: 模板审核不通过怎么办？

**A**: 
1. 验证码类型的模板通常很容易通过
2. 确保模板内容简洁，不包含营销内容
3. 推荐模板：`您的验证码是：{1}，5分钟内有效，请勿泄露。`

### Q3: SecretKey忘记保存了怎么办？

**A**: 
1. 删除刚才创建的密钥
2. 重新点击"新建密钥"
3. 这次一定要立即保存！

### Q4: 发送短信失败怎么办？

**A**: 
1. 检查配置是否正确填写
2. 检查签名和模板是否已审核通过
3. 查看后端日志的详细错误信息
4. 确认账户余额是否充足（新用户有100条免费额度）

### Q5: 审核要多久？

**A**: 
- 工作日：1-2小时
- 非工作日：可能需要等到下个工作日
- 建议在工作日的工作时间提交

### Q6: 测试时不想消耗免费额度怎么办？

**A**: 
在配置文件中设置 `enabled: false`，使用模拟模式：
```yaml
tencent:
  sms:
    enabled: false  # 模拟模式，不会真实发送
```

---

## ✅ 完成检查清单

在完成每一步后，打勾确认：

- [ ] 1. 注册腾讯云账号
- [ ] 2. 完成个人实名认证
- [ ] 3. 开通短信服务
- [ ] 4. 创建短信应用（获得 SDK AppID）
- [ ] 5. 申请短信签名（等待审核）
- [ ] 6. 申请短信模板（等待审核）
- [ ] 7. 获取API密钥（SecretId 和 SecretKey）
- [ ] 8. 填写配置到 application.yml
- [ ] 9. 重启项目测试
- [ ] 10. 成功收到短信

---

## 🎉 恭喜完成！

如果你成功收到了短信，说明配置完全正确！

现在你的验证码系统已经可以真实发送短信了！🎊

---

## 📞 需要帮助？

如果遇到问题，可以：
1. 查看后端日志的错误信息
2. 检查配置是否正确
3. 确认签名和模板是否已审核通过
4. 联系我帮你排查问题

---

**最后更新时间**：2026-02-04
