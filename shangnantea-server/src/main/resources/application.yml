server:
  port: 8080
  servlet:
    context-path: /api

spring:
  main:
    allow-bean-definition-overriding: true
  datasource:
    url: jdbc:mysql://localhost:3306/teasystem.sql?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  redis:
    host: localhost
    port: 6379
    timeout: 3000ms
    database: 0
  mail:
    host: smtp.qq.com
    port: 587
    username: 2109382180@qq.com  # 替换成你的QQ邮箱
    password: vdqspjzvfzvndicc  # 替换成你的授权码
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

# 阿里云短信认证服务配置
aliyun:
  sms:
    enabled: true  # 是否启用真实短信发送
    access-key-id: LTAI5tDPN4V6wV44swrMkF6W  # 替换成你的阿里云 AccessKeyId
    access-key-secret: VZq6ab76HBok09RIvIffum1SViunLP # 替换成你的阿里云 AccessKeySecret
    sign-name: 商南茶城  # 短信签名
    template-code: 100001  # 短信认证服务模板代码（登录/注册模板）

mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.shangnantea.model.entity.user
  configuration:
    map-underscore-to-camel-case: true

logging:
  level:
    com.shangnantea: debug
  pattern:
    # 在控制台日志中输出 requestId，方便从 APIFox 的响应头 X-Request-Id 快速定位到对应后端日志
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} [requestId:%X{requestId}] - %msg%n"
    # 文件日志也输出 requestId，便于脚本按 requestId 检索
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} [requestId:%X{requestId}] - %msg%n"
  file:
    # 额外落盘一份日志，便于批量测试后按 requestId/时间窗口汇总筛选
    name: logs/shangnantea-server.log

# JWT配置
jwt:
  secret: shangnantea-secure-jwt-secret-key-2025
  expiration: 86400000 

# 应用配置
app:
  base-url: http://localhost:8080

# 支付宝配置（沙箱环境）
alipay:
  # 应用ID（需要替换成你的沙箱APPID）
  app-id: 你的沙箱APPID
  # 商户私钥（需要替换成你的应用私钥）
  private-key: 你的应用私钥
  # 支付宝公钥（需要替换成支付宝公钥）
  public-key: 支付宝公钥
  # 支付宝网关地址（沙箱环境）
  gateway-url: https://openapi-sandbox.dl.alipaydev.com/gateway.do
  # 签名类型
  sign-type: RSA2
  # 字符编码
  charset: UTF-8
  # 返回格式
  format: json
  # 同步回调地址（前端支付结果页面）
  return-url: http://localhost:5173/order/payment
  # 异步回调地址（后端接口）
  notify-url: http://你的公网IP:8080/api/order/alipay/notify
